"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{2011:(st,Ce,P)=>{P.d(Ce,{Dh:()=>de,GT:()=>fe,cc:()=>Te,hO:()=>Ge,on:()=>B,pX:()=>J,xv:()=>ae});var g=P(5e3),W=P(127),O=P(5813);st=P.hmd(st);const se=["ngOnDestroy"],J=(ve,Je,We,De={})=>new Proxy(ve,{get:(ye,_e)=>We.runOutsideAngular(()=>{var je;if(ve[_e])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(_e,ve[_e]),ve[_e];if(se.indexOf(_e)>-1)return()=>{};const Ue=Je.toPromise().then(te=>{const qe=te&&te[_e];return"function"==typeof qe?qe.bind(te):qe&&qe.then?qe.then(Q=>We.run(()=>Q)):We.run(()=>qe)});return new Proxy(()=>{},{get:(te,qe)=>Ue[qe],apply:(te,qe,Q)=>Ue.then(ie=>{var X;const Ee=ie&&ie(...Q);return(null===(X=null==De?void 0:De.spy)||void 0===X?void 0:X.apply)&&De.spy.apply(_e,Q,Ee),Ee})})})}),fe=(ve,Je)=>{Je.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(De=>{Object.defineProperty(ve.prototype,De,Object.getOwnPropertyDescriptor(We.prototype||We,De))})})};class re{constructor(Je){return Je}}const de=new g.OlP("angularfire2.app.options"),ae=new g.OlP("angularfire2.app.name");function B(ve,Je,We){const ye="object"==typeof We&&We||{};ye.name=ye.name||"string"==typeof We&&We||"[DEFAULT]";const je=W.Z.apps.filter(Ue=>Ue&&Ue.name===ye.name)[0]||Je.runOutsideAngular(()=>W.Z.initializeApp(ve,ye));try{JSON.stringify(ve)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new re(je)}const j=(ve,...Je)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[ve](...Je)},Z={provide:re,useFactory:B,deps:[de,g.R0b,[new g.FiY,ae]]};let Ge=(()=>{class ve{constructor(We){W.Z.registerVersion("angularfire",O.q4.full,"core"),W.Z.registerVersion("angularfire",O.q4.full,"app-compat"),W.Z.registerVersion("angular",g.q4F.full,We.toString())}static initializeApp(We,De){return{ngModule:ve,providers:[{provide:de,useValue:We},{provide:ae,useValue:De}]}}}return ve.\u0275fac=function(We){return new(We||ve)(g.LFG(g.Lbi))},ve.\u0275mod=g.oAB({type:ve}),ve.\u0275inj=g.cJS({providers:[Z]}),ve})();function Te(ve,Je,We,De,ye){const[,_e,je]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===ve)||[];if(_e)return function Me(ve,Je){try{return ve.toString()===Je.toString()}catch(We){return ve===Je}}(ye,je)||(he("error",`${Je} was already initialized on the ${We} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ye,was:je})),_e;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([ve,Ue,ye]),Ue}}const Pe=!!st.hot,he=(ve,...Je)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[ve](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,Ce,P)=>{P.d(Ce,{q4:()=>ul,iC:()=>cl,HU:()=>ll,vb:()=>uh,JM:()=>ua});var g=P(5e3),W=P(5867),O=P(5861),se=P(9681),J=P(2090),fe=P(4859),re=P(1877);const de="@firebase/installations",j="w:0.5.8",Z="FIS_v2",ve=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function We({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:Q(D.expiresIn),creationTime:Date.now()}}function ye(D,b){return _e.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return ve.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Ue(D,{refreshToken:b}){const M=je(D);return M.append("Authorization",function ie(D){return`${Z} ${D}`}(b)),M}function te(D){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Q(D){return Number(D.replace("s","000"))}function X(D,b){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=We(D),q=je(D),ee=b.getImmediate({optional:!0});if(ee){const gt=yield ee.getHeartbeatsHeader();gt&&q.append("x-firebase-client",gt)}const Ze={method:"POST",headers:q,body:JSON.stringify({fid:M,authVersion:Z,appId:D.appId,sdkVersion:j})},nt=yield te(()=>fetch(F,Ze));if(nt.ok){const gt=yield nt.json();return{fid:gt.fid||M,registrationStatus:2,refreshToken:gt.refreshToken,authToken:De(gt.authToken)}}throw yield ye("Create Installation",nt)})).apply(this,arguments)}function pe(D){return new Promise(b=>{setTimeout(b,D)})}const vt=/^[cdef][\w-]{21}$/;function tn(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function He(D){return function Oe(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return vt.test(M)?M:""}catch(D){return""}}function Ft(D){return`${D.appName}!${D.appId}`}const zn=new Map;function En(D,b){const M=Ft(D);Gt(M,b),function Lt(D,b){const M=function Jr(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=D=>{Gt(D.data.key,D.data.fid)}),Qn}();M&&M.postMessage({key:D,fid:b}),function hs(){0===zn.size&&Qn&&(Qn.close(),Qn=null)}()}(M,b)}function Gt(D,b){const M=zn.get(D);if(M)for(const F of M)F(b)}let Qn=null;const wr="firebase-installations-store";let Bi=null;function ji(){return Bi||(Bi=(0,J.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(wr)})),Bi}function at(D,b){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,O.Z)(function*(D,b){const M=Ft(D),q=(yield ji()).transaction(wr,"readwrite"),ee=q.objectStore(wr),Se=yield ee.get(M);return yield ee.put(b,M),yield q.complete,(!Se||Se.fid!==b.fid)&&En(D,b.fid),b})).apply(this,arguments)}function Wn(D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,O.Z)(function*(D){const b=Ft(D),F=(yield ji()).transaction(wr,"readwrite");yield F.objectStore(wr).delete(b),yield F.complete})).apply(this,arguments)}function Xr(D,b){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(D,b){const M=Ft(D),q=(yield ji()).transaction(wr,"readwrite"),ee=q.objectStore(wr),Se=yield ee.get(M),Ze=b(Se);return void 0===Ze?yield ee.delete(M):yield ee.put(Ze,M),yield q.complete,Ze&&(!Se||Se.fid!==Ze.fid)&&En(D,Ze.fid),Ze})).apply(this,arguments)}function fn(D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,O.Z)(function*(D){let b;const M=yield Xr(D.appConfig,F=>{const q=fs(F),ee=zo(D,q);return b=ee.registrationPromise,ee.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function fs(D){return Pt(D||{fid:tn(),registrationStatus:0})}function zo(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(ve.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Vt(D,b){return rt.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:mt(D)}:{installationEntry:b}}function rt(){return(rt=(0,O.Z)(function*(D,b){try{const M=yield X(D,b);return at(D.appConfig,M)}catch(M){throw Je(M)&&409===M.customData.serverCode?yield Wn(D.appConfig):yield at(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function mt(D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(D){let b=yield Mi(D.appConfig);for(;1===b.registrationStatus;)yield pe(100),b=yield Mi(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield fn(D);return F||M}return b})).apply(this,arguments)}function Mi(D){return Xr(D,b=>{if(!b)throw ve.create("installation-not-found");return Pt(b)})}function Pt(D){return function $s(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function or(D,b){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=ut(D,M),q=Ue(D,M),ee=b.getImmediate({optional:!0});if(ee){const gt=yield ee.getHeartbeatsHeader();gt&&q.append("x-firebase-client",gt)}const Ze={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:j,appId:D.appId}})},nt=yield te(()=>fetch(F,Ze));if(nt.ok)return De(yield nt.json());throw yield ye("Generate Auth Token",nt)})).apply(this,arguments)}function ut(D,{fid:b}){return`${We(D)}/${b}/authTokens:generate`}function ar(D){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(D,b=!1){let M;const F=yield Xr(D.appConfig,ee=>{if(!Mt(ee))throw ve.create("not-registered");const Se=ee.authToken;if(!b&&U(Se))return ee;if(1===Se.requestStatus)return M=Ke(D,b),ee;{if(!navigator.onLine)throw ve.create("app-offline");const Ze=$(ee);return M=lt(D,Ze),Ze}});return M?yield M:F.authToken})).apply(this,arguments)}function Ke(D,b){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,b){let M=yield Ye(D.appConfig);for(;1===M.authToken.requestStatus;)yield pe(100),M=yield Ye(D.appConfig);const F=M.authToken;return 0===F.requestStatus?ar(D,b):F})).apply(this,arguments)}function Ye(D){return Xr(D,b=>{if(!Mt(b))throw ve.create("not-registered");return function ue(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function lt(D,b){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(D,b){try{const M=yield or(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield at(D.appConfig,F),M}catch(M){if(!Je(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield at(D.appConfig,F)}else yield Wn(D.appConfig);throw M}})).apply(this,arguments)}function Mt(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function $(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Le(){return(Le=(0,O.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield fn(b);return F?F.catch(console.error):ar(b).catch(console.error),M.fid})).apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(D,b=!1){const M=D;return yield ur(M),(yield ar(M,b)).token})).apply(this,arguments)}function ur(D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(D){const{registrationPromise:b}=yield fn(D);b&&(yield b)})).apply(this,arguments)}function Un(D){return ve.create("missing-app-config-values",{valueName:D})}const Ko="installations",xe=D=>{const b=D.getProvider("app").getImmediate(),M=function $i(D){if(!D||!D.options)throw Un("App Configuration");if(!D.name)throw Un("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw Un(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},At=D=>{const b=D.getProvider("app").getImmediate(),M=(0,se._getProvider)(b,Ko).getImmediate();return{getId:()=>function K(D){return Le.apply(this,arguments)}(M),getToken:q=>function ft(D){return qt.apply(this,arguments)}(M,q)}};(function ln(){(0,se._registerComponent)(new fe.wA(Ko,xe,"PUBLIC")),(0,se._registerComponent)(new fe.wA("installations-internal",At,"PRIVATE"))})(),(0,se.registerVersion)(de,"0.5.8"),(0,se.registerVersion)(de,"0.5.8","esm2017");const er="@firebase/remote-config",An=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qd{constructor(b,M,F,q){this.client=b,this.storage=M,this.storageCache=F,this.logger=q}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,q=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${q}.`),q}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(q&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return q;b.eTag=q&&q.eTag;const ee=yield M.client.fetch(b),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Se),ee})()}}function dc(D=navigator){return D.languages&&D.languages[0]||D.language}class ja{constructor(b,M,F,q,ee,Se){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=q,this.apiKey=ee,this.appId=Se}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,q]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},nt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:q,app_id:M.appId,language_code:dc()},gt={method:"POST",headers:Ze,body:JSON.stringify(nt)},Bt=fetch(Se,gt),_t=new Promise((Cr,Gr)=>{b.signal.addEventListener(()=>{const Di=new Error("The operation was aborted.");Di.name="AbortError",Gr(Di)})});let xn;try{yield Promise.race([Bt,_t]),xn=yield Bt}catch(Cr){let Gr="fetch-client-network";throw"AbortError"===Cr.name&&(Gr="fetch-timeout"),An.create(Gr,{originalErrorMessage:Cr.message})}let vn=xn.status;const da=xn.headers.get("ETag")||void 0;let To,br;if(200===xn.status){let Cr;try{Cr=yield xn.json()}catch(Gr){throw An.create("fetch-client-parse",{originalErrorMessage:Gr.message})}To=Cr.entries,br=Cr.state}if("INSTANCE_STATE_UNSPECIFIED"===br?vn=500:"NO_CHANGE"===br?vn=304:("NO_TEMPLATE"===br||"EMPTY_CONFIG"===br)&&(To={}),304!==vn&&200!==vn)throw An.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:da,config:To}})()}}class vp{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var q=this;return(0,O.Z)(function*(){yield function Pn(D,b){return new Promise((M,F)=>{const q=Math.max(b-Date.now(),0),ee=setTimeout(M,q);D.addEventListener(()=>{clearTimeout(ee),F(An.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const ee=yield q.client.fetch(b);return yield q.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function hc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ee))throw ee;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield q.storage.setThrottleMetadata(Se),q.attemptFetch(b,Se)}})()}}class fc{constructor(b,M,F,q,ee){this.app=b,this._client=M,this._storageCache=F,this._storage=q,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lu(D,b){const M=D.target.error||void 0;return An.create(b,{originalErrorMessage:M&&M.message})}const _s="app_namespace_store";class Dp{constructor(b,M,F,q=function Ip(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Lu(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(_s,{keyPath:"compositeKey"})}}catch(M){b(An.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((q,ee)=>{const Ze=F.transaction([_s],"readonly").objectStore(_s),nt=M.createCompositeKey(b);try{const gt=Ze.get(nt);gt.onerror=Bt=>{ee(Lu(Bt,"storage-get"))},gt.onsuccess=Bt=>{const _t=Bt.target.result;q(_t?_t.value:void 0)}}catch(gt){ee(An.create("storage-get",{originalErrorMessage:gt&&gt.message}))}})})()}set(b,M){var F=this;return(0,O.Z)(function*(){const q=yield F.openDbPromise;return new Promise((ee,Se)=>{const nt=q.transaction([_s],"readwrite").objectStore(_s),gt=F.createCompositeKey(b);try{const Bt=nt.put({compositeKey:gt,value:M});Bt.onerror=_t=>{Se(Lu(_t,"storage-set"))},Bt.onsuccess=()=>{ee()}}catch(Bt){Se(An.create("storage-set",{originalErrorMessage:Bt&&Bt.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((q,ee)=>{const Ze=F.transaction([_s],"readwrite").objectStore(_s),nt=M.createCompositeKey(b);try{const gt=Ze.delete(nt);gt.onerror=Bt=>{ee(Lu(Bt,"storage-delete"))},gt.onsuccess=()=>{q()}}catch(gt){ee(An.create("storage-delete",{originalErrorMessage:gt&&gt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class gc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),q=b.storage.getActiveConfig(),ee=yield M;ee&&(b.lastFetchStatus=ee);const Se=yield F;Se&&(b.lastSuccessfulFetchTimestampMillis=Se);const Ze=yield q;Ze&&(b.activeConfig=Ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function qs(){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}!function go(){(0,se._registerComponent)(new fe.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),q=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,J.hl)())throw An.create("indexed-db-unavailable");const{projectId:ee,apiKey:Se,appId:Ze}=F.options;if(!ee)throw An.create("registration-project-id");if(!Se)throw An.create("registration-api-key");if(!Ze)throw An.create("registration-app-id");const nt=new Dp(Ze,F.name,M=M||"firebase"),gt=new gc(nt),Bt=new re.Yd(er);Bt.logLevel=re.in.ERROR;const _t=new ja(q,se.SDK_VERSION,M,ee,Se,Ze),xn=new vp(_t,nt),vn=new Qd(xn,nt,gt,Bt),da=new fc(F,vn,gt,nt,Bt);return function ti(D){const b=(0,J.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(da),da},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(er,"0.3.7"),(0,se.registerVersion)(er,"0.3.7","esm2017")}();const Vu="/firebase-messaging-sw.js",vs="/firebase-cloud-messaging-push-scope",Fr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zs="google.c.a.c_id",Yo="google.c.a.c_l",mc="google.c.a.ts",bp="google.c.a.e";var Es=(()=>{return(D=Es||(Es={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Es;var D})();function ri(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ha(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),q=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)q[ee]=F.charCodeAt(ee);return q}const Ga="fcm_token_details_db",nr="fcm_token_object_Store";function Xd(D){return qa.apply(this,arguments)}function qa(){return qa=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Ga))return null;let b=null;return(yield(0,J.X3)(Ga,5,function(){var F=(0,O.Z)(function*(q,ee,Se,Ze){var nt;if(ee<2||!q.objectStoreNames.contains(nr))return;const gt=Ze.objectStore(nr),Bt=yield gt.index("fcmSenderId").get(D);if(yield gt.clear(),Bt)if(2===ee){const _t=Bt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;b={token:_t.fcmToken,createTime:null!==(nt=_t.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:ri(_t.vapidKey)}}}else if(3===ee){const _t=Bt;b={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ri(_t.auth),p256dh:ri(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ri(_t.vapidKey)}}}else if(4===ee){const _t=Bt;b={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ri(_t.auth),p256dh:ri(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ri(_t.vapidKey)}}}});return function(q,ee,Se,Ze){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Ga),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),yc(b)?b:null}),qa.apply(this,arguments)}function yc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const zi="firebase-messaging-store";let Qo=null;function Uu(){return Qo||(Qo=(0,J.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(zi)})),Qo}function dn(D){return _o.apply(this,arguments)}function _o(){return(_o=(0,O.Z)(function*(D){const b=Ks(D),F=yield(yield Uu()).transaction(zi).objectStore(zi).get(b);if(F)return F;{const q=yield Xd(D.appConfig.senderId);if(q)return yield ws(D,q),q}})).apply(this,arguments)}function ws(D,b){return sn.apply(this,arguments)}function sn(){return(sn=(0,O.Z)(function*(D,b){const M=Ks(D),q=(yield Uu()).transaction(zi,"readwrite");return yield q.objectStore(zi).put(b,M),yield q.complete,b})).apply(this,arguments)}function _c(D){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(D){const b=Ks(D),F=(yield Uu()).transaction(zi,"readwrite");yield F.objectStore(zi).delete(b),yield F.complete})).apply(this,arguments)}function Ks({appConfig:D}){return D.appId}const Sn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Jo(D,b){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(D,b){const M=yield Ds(D),F=ct(b),q={method:"POST",headers:M,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(Vr(D.appConfig),q)).json()}catch(Se){throw Sn.create("token-subscribe-failed",{errorInfo:Se})}if(ee.error)throw Sn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Sn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function cr(D,b){return Is.apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(D,b){const M=yield Ds(D),F=ct(b.subscriptionOptions),q={method:"PATCH",headers:M,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${Vr(D.appConfig)}/${b.token}`,q)).json()}catch(Se){throw Sn.create("token-update-failed",{errorInfo:Se})}if(ee.error)throw Sn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Sn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function Wi(D,b){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ds(D)};try{const ee=yield(yield fetch(`${Vr(D.appConfig)}/${b}`,F)).json();if(ee.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(q){throw Sn.create("token-unsubscribe-failed",{errorInfo:q})}})).apply(this,arguments)}function Vr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ds(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function ct({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const q={web:{endpoint:M,auth:b,p256dh:D}};return F!==Fr&&(q.web.applicationPubKey=F),q}const Za=6048e5;function Xo(D){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,O.Z)(function*(D){const b=yield vc(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:ri(b.getKey("auth")),p256dh:ri(b.getKey("p256dh"))},F=yield dn(D.firebaseDependencies);if(F){if(vo(F.subscriptionOptions,M))return Date.now()>=F.createTime+Za?Bu(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Wi(D.firebaseDependencies,F.token)}catch(q){console.warn(q)}return we(D.firebaseDependencies,M)}return we(D.firebaseDependencies,M)})).apply(this,arguments)}function Qa(D){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(D){const b=yield dn(D.firebaseDependencies);b&&(yield Wi(D.firebaseDependencies,b.token),yield _c(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Bu(D,b){return ju.apply(this,arguments)}function ju(){return(ju=(0,O.Z)(function*(D,b){try{const M=yield cr(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield ws(D.firebaseDependencies,F),M}catch(M){throw yield Qa(D),M}})).apply(this,arguments)}function we(D,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(D,b){const F={token:yield Jo(D,b),createTime:Date.now(),subscriptionOptions:b};return yield ws(D,F),F.token})).apply(this,arguments)}function vc(D,b){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ha(b)})})).apply(this,arguments)}function vo(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Eo(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ur(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const q=b.notification.image;q&&(D.notification.image=q)}(b,D),function $u(D,b){!b.data||(D.data=b.data)}(b,D),function Hu(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const M=b.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Ec(D){return"object"==typeof D&&!!D&&zs in D}function Gu(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function Cs(D){return Sn.create("missing-app-config-values",{valueName:D})}Gu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Gu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rr{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Xa(D){if(!D||!D.options)throw Cs("App Configuration Object");if(!D.name)throw Cs("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw Cs(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:q,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ii(D){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Vu,{scope:vs}),D.swRegistration.update().catch(()=>{})}catch(b){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Ts(D,b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ii(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function qu(D,b){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Fr)})).apply(this,arguments)}function zu(){return(zu=(0,O.Z)(function*(D,b){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield qu(D,null==b?void 0:b.vapidKey),yield Ts(D,null==b?void 0:b.serviceWorkerRegistration),Xo(D)})).apply(this,arguments)}function ea(D,b,M){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(D,b,M){const F=Wu(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[zs],message_name:M[Yo],message_time:M[mc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wu(D){switch(D){case Es.NOTIFICATION_CLICKED:return"notification_open";case Es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wc(){return(wc=(0,O.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Es.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Eo(M)):D.onMessageHandler.next(Eo(M)));const F=M.data;Ec(F)&&"1"===F[bp]&&(yield ea(D,M.messageType,F))})).apply(this,arguments)}const Zu="@firebase/messaging",Ic=D=>{const b=new rr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ku(D,b){return wc.apply(this,arguments)}(b,M)),b},Ys=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function nu(D,b){return zu.apply(this,arguments)}(b,F)}};function bc(){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Dc(){(0,se._registerComponent)(new fe.wA("messaging",Ic,"PUBLIC")),(0,se._registerComponent)(new fe.wA("messaging-internal",Ys,"PRIVATE")),(0,se.registerVersion)(Zu,"0.9.12"),(0,se.registerVersion)(Zu,"0.9.12","esm2017")}();const Qu="analytics",uy="firebase_id",na="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ru="https://www.googletagmanager.com/gtag/js",kn=new re.Yd("@firebase/analytics");function Cc(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function Cp(D,b){const M=document.createElement("script");M.src=`${ru}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function wo(D,b,M,F,q,ee){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,O.Z)(function*(D,b,M,F,q,ee){const Se=F[q];try{if(Se)yield b[Se];else{const nt=(yield Cc(M)).find(gt=>gt.measurementId===q);nt&&(yield b[nt.appId])}}catch(Ze){kn.error(Ze)}D("config",q,ee)})).apply(this,arguments)}function Xu(D,b,M,F,q){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(D,b,M,F,q){try{let ee=[];if(q&&q.send_to){let Se=q.send_to;Array.isArray(Se)||(Se=[Se]);const Ze=yield Cc(M);for(const nt of Se){const gt=Ze.find(_t=>_t.measurementId===nt),Bt=gt&&b[gt.appId];if(!Bt){ee=[];break}ee.push(Bt)}}0===ee.length&&(ee=Object.values(b)),yield Promise.all(ee),D("event",F,q||{})}catch(ee){kn.error(ee)}})).apply(this,arguments)}function Tp(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(ru))return b;return null}const gn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ra=new class tl{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Xs(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Sc(D){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,q={method:"GET",headers:Xs(F)},ee=na.replace("{app-id}",M),Se=yield fetch(ee,q);if(200!==Se.status&&304!==Se.status){let Ze="";try{const nt=yield Se.json();(null===(b=nt.error)||void 0===b?void 0:b.message)&&(Ze=nt.error.message)}catch(nt){}throw gn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Ze})}return Se.json()})).apply(this,arguments)}function Io(D){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(D,b=ra,M){const{appId:F,apiKey:q,measurementId:ee}=D.options;if(!F)throw gn.create("no-app-id");if(!q){if(ee)return{measurementId:ee,appId:F};throw gn.create("no-api-key")}const Se=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new iu;return setTimeout((0,O.Z)(function*(){Ze.abort()}),void 0!==M?M:6e4),Dt({appId:F,apiKey:q,measurementId:ee},Se,Ze,b)})).apply(this,arguments)}function Dt(D,b,M){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,q=ra){const{appId:ee,measurementId:Se}=D;try{yield Ap(F,b)}catch(Ze){if(Se)return kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:ee,measurementId:Se};throw Ze}try{const Ze=yield Sc(D);return q.deleteThrottleMetadata(ee),Ze}catch(Ze){if(!nl(Ze)){if(q.deleteThrottleMetadata(ee),Se)return kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:ee,measurementId:Se};throw Ze}const nt=503===Number(Ze.customData.httpStatus)?(0,J.$s)(M,q.intervalMillis,30):(0,J.$s)(M,q.intervalMillis),gt={throttleEndTimeMillis:Date.now()+nt,backoffCount:M+1};return q.setThrottleMetadata(ee,gt),kn.debug(`Calling attemptFetch again in ${nt} millis`),Dt(D,gt,F,q)}})).apply(this,arguments)}function Ap(D,b){return new Promise((M,F)=>{const q=Math.max(b-Date.now(),0),ee=setTimeout(M,q);D.addEventListener(()=>{clearTimeout(ee),F(gn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function nl(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class iu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function nh(){return eo.apply(this,arguments)}function eo(){return(eo=(0,O.Z)(function*(){if(!(0,J.hl)())return kn.warn(gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return kn.warn(gn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(D,b,M,F,q,ee,Se){var Ze;const nt=Io(D);nt.then(vn=>{M[vn.measurementId]=vn.appId,D.options.measurementId&&vn.measurementId!==D.options.measurementId&&kn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>kn.error(vn)),b.push(nt);const gt=nh().then(vn=>{if(vn)return F.getId()}),[Bt,_t]=yield Promise.all([nt,gt]);Tp()||Cp(ee,Bt.measurementId),q("js",new Date);const xn=null!==(Ze=null==Se?void 0:Se.config)&&void 0!==Ze?Ze:{};return xn.origin="firebase",xn.update=!0,null!=_t&&(xn[uy]=_t),q("config",Bt.measurementId,xn),Bt.measurementId})).apply(this,arguments)}class Do{constructor(b){this.app=b}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}}let Br={},to=[];const rl={};let oi,xs,no="dataLayer",jn=!1;function Ri(D,b,M){!function il(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,q)=>`(${q+1}) ${F}`).join(" "),M=gn.create("invalid-analytics-context",{errorInfo:b});kn.warn(M.message)}}();const F=D.options.appId;if(!F)throw gn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw gn.create("no-api-key");kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Br[F])throw gn.create("already-exists",{id:F});if(!jn){!function Zi(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(no);const{wrappedGtag:ee,gtagCore:Se}=function th(D,b,M,F,q){let ee=function(...Se){window[F].push(arguments)};return window[q]&&"function"==typeof window[q]&&(ee=window[q]),window[q]=function Ac(D,b,M,F){function ee(){return(ee=(0,O.Z)(function*(Se,Ze,nt){try{"event"===Se?yield Xu(D,b,M,Ze,nt):"config"===Se?yield wo(D,b,M,F,Ze,nt):D("set",Ze)}catch(gt){kn.error(gt)}})).apply(this,arguments)}return function q(Se,Ze,nt){return ee.apply(this,arguments)}}(ee,D,b,M),{gtagCore:ee,wrappedGtag:window[q]}}(Br,to,rl,no,"gtag");xs=ee,oi=Se,jn=!0}return Br[F]=function si(D,b,M,F,q,ee,Se){return Bn.apply(this,arguments)}(D,to,rl,b,oi,no,M),new Do(D)}function ia(){return(ia=(0,O.Z)(function*(D,b,M,F,q){if(q&&q.global)D("event",M,F);else{const ee=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function so(){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}const al="@firebase/analytics";!function ih(){(0,se._registerComponent)(new fe.wA(Qu,(b,{options:M})=>Ri(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new fe.wA("analytics-internal",function D(b){try{const M=b.getProvider(Qu).getImmediate();return{logEvent:(F,q,ee)=>function Nc(D,b,M,F){D=(0,J.m9)(D),function Mc(D,b,M,F,q){return ia.apply(this,arguments)}(xs,Br[D.app.options.appId],b,M,F).catch(q=>kn.error(q))}(M,F,q,ee)}}catch(M){throw gn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(al,"0.7.8"),(0,se.registerVersion)(al,"0.7.8","esm2017")}();var Pc=P(4408),sh=P(7565);const au=new class _n extends sh.v{}(class Ni extends Pc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):b.flush(this)}});var Ir=P(4986),uu=P(8505),Dr=P(9468),Ii=P(5363);const ul=new g.GfV("7.3.0"),Xi="__angularfire_symbol__analyticsIsSupportedValue",$r="__angularfire_symbol__analyticsIsSupported",Hr="__angularfire_symbol__remoteConfigIsSupportedValue",oa="__angularfire_symbol__remoteConfigIsSupported",aa="__angularfire_symbol__messagingIsSupportedValue",kc="__angularfire_symbol__messagingIsSupported";function ua(D,b,M){if(b){if(1===b.length)return b[0];const ee=b.filter(Se=>Se.app===M);if(1===ee.length)return ee[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[$r]||(globalThis[$r]=so().then(D=>globalThis[Xi]=D).catch(()=>globalThis[Xi]=!1)),globalThis[kc]||(globalThis[kc]=bc().then(D=>globalThis[aa]=D).catch(()=>globalThis[aa]=!1)),globalThis[oa]||(globalThis[oa]=qs().then(D=>globalThis[Hr]=D).catch(()=>globalThis[Hr]=!1));const uh=(D,b)=>{const M=b?[b]:(0,W.C6)(),F=[];return M.forEach(q=>{q.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function oo(){}class la{constructor(b,M=au){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const q=this.zone;return this.delegate.schedule(function(Se){q.runGuarded(()=>{b.apply(this,[Se])})},M,F)}}class lh{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oo,{},oo,oo)),M.pipe((0,uu.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ll=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new la(Zone.current)),this.insideAngular=M.run(()=>new la(Zone.current,Ir.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function es(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function cl(D){return es(),function ts(D){return function(M){return(M=M.lift(new lh(D.ngZone))).pipe((0,Dr.R)(D.outsideAngular),(0,Ii.Q)(D.insideAngular))}}(es())(D)}},2090:(st,Ce,P)=>{P.d(Ce,{$s:()=>$s,BH:()=>Te,G6:()=>te,L:()=>ae,LL:()=>Oe,Lj:()=>Ot,Mn:()=>je,Sg:()=>Me,UG:()=>ve,US:()=>re,X3:()=>lt,ZB:()=>Z,ZR:()=>pe,b$:()=>De,d:()=>ye,eu:()=>Q,hl:()=>qe,jU:()=>Je,m9:()=>ut,ne:()=>at,pd:()=>Bi,r3:()=>Gt,ru:()=>We,tV:()=>B,uI:()=>he,vZ:()=>hs,w1:()=>_e,xO:()=>Si,xb:()=>Qn,z$:()=>Pe,zI:()=>ie,zd:()=>wr});var g=P(5861);const J=function(U){const L=[];let $=0;for(let ue=0;ue<U.length;ue++){let K=U.charCodeAt(ue);K<128?L[$++]=K:K<2048?(L[$++]=K>>6|192,L[$++]=63&K|128):55296==(64512&K)&&ue+1<U.length&&56320==(64512&U.charCodeAt(ue+1))?(K=65536+((1023&K)<<10)+(1023&U.charCodeAt(++ue)),L[$++]=K>>18|240,L[$++]=K>>12&63|128,L[$++]=K>>6&63|128,L[$++]=63&K|128):(L[$++]=K>>12|224,L[$++]=K>>6&63|128,L[$++]=63&K|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let K=0;K<U.length;K+=3){const Le=U[K],ft=K+1<U.length,qt=ft?U[K+1]:0,ur=K+2<U.length,Ut=ur?U[K+2]:0;let un=(15&qt)<<2|Ut>>6,Zn=63&Ut;ur||(Zn=64,ft||(un=64)),ue.push($[Le>>2],$[(3&Le)<<4|qt>>4],$[un],$[Zn])}return ue.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,ue=0;for(;$<U.length;){const K=U[$++];if(K<128)L[ue++]=String.fromCharCode(K);else if(K>191&&K<224){const Le=U[$++];L[ue++]=String.fromCharCode((31&K)<<6|63&Le)}else if(K>239&&K<365){const ur=((7&K)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[ue++]=String.fromCharCode(55296+(ur>>10)),L[ue++]=String.fromCharCode(56320+(1023&ur))}else{const Le=U[$++],ft=U[$++];L[ue++]=String.fromCharCode((15&K)<<12|(63&Le)<<6|63&ft)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let K=0;K<U.length;){const Le=$[U.charAt(K++)],qt=K<U.length?$[U.charAt(K)]:0;++K;const Ut=K<U.length?$[U.charAt(K)]:64;++K;const Ct=K<U.length?$[U.charAt(K)]:64;if(++K,null==Le||null==qt||null==Ut||null==Ct)throw Error();ue.push(Le<<2|qt>>4),64!==Ut&&(ue.push(qt<<4&240|Ut>>2),64!==Ct&&ue.push(Ut<<6&192|Ct))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ae=function(U){return function(U){const L=J(U);return re.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return re.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Z(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!Ge($)||(U[$]=Z(U[$],L[$]));return U}function Ge(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,ue)=>{$?this.reject($):this.resolve(ue),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,ue))}}}function Me(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=L||"demo-project",K=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:K,exp:K+3600,auth_time:K,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(ft)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Je(){return"object"==typeof self&&self.self===self}function We(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Pe().indexOf("Electron/")>=0}function _e(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function je(){return Pe().indexOf("MSAppHost/")>=0}function te(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function Q(){return new Promise((U,L)=>{try{let $=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(ue);K.onsuccess=()=>{K.result.close(),$||self.indexedDB.deleteDatabase(ue),U(!0)},K.onupgradeneeded=()=>{$=!1},K.onerror=()=>{var Le;L((null===(Le=K.error)||void 0===Le?void 0:Le.message)||"")}}catch($){L($)}})}function ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(L,$,ue){super($),this.code=L,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor(L,$,ue){this.service=L,this.serviceName=$,this.errors=ue}create(L,...$){const ue=$[0]||{},K=`${this.service}/${L}`,Le=this.errors[L],ft=Le?function vt(U,L){return U.replace($t,($,ue)=>{const K=L[ue];return null!=K?String(K):`<${ue}?>`})}(Le,ue):"Error";return new pe(K,`${this.serviceName}: ${ft} (${K}).`,ue)}}const $t=/\{\$([^}]+)}/g;function Gt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Qn(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function hs(U,L){if(U===L)return!0;const $=Object.keys(U),ue=Object.keys(L);for(const K of $){if(!ue.includes(K))return!1;const Le=U[K],ft=L[K];if(Er(Le)&&Er(ft)){if(!hs(Le,ft))return!1}else if(Le!==ft)return!1}for(const K of ue)if(!$.includes(K))return!1;return!0}function Er(U){return null!==U&&"object"==typeof U}function Si(U){const L=[];for(const[$,ue]of Object.entries(U))Array.isArray(ue)?ue.forEach(K=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(ue));return L.length?"&"+L.join("&"):""}function wr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[K,Le]=ue.split("=");L[decodeURIComponent(K)]=decodeURIComponent(Le)}}),L}function Bi(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function at(U,L){const $=new Pr(U,L);return $.subscribe.bind($)}class Pr{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(ue=>{this.error(ue)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,ue){let K;if(void 0===L&&void 0===$&&void 0===ue)throw new Error("Missing Observer.");K=function Vn(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:ue},void 0===K.next&&(K.next=Xr),void 0===K.error&&(K.error=Xr),void 0===K.complete&&(K.complete=Xr);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(ft){}}),this.observers.push(K),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(ue){"undefined"!=typeof console&&console.error&&console.error(ue)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xr(){}function $s(U,L=1e3,$=2){const ue=L*Math.pow($,U),K=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+K)}function ut(U){return U&&U._delegate?U._delegate:U}function ar(U,L){return new Promise(($,ue)=>{U.onsuccess=K=>{$(K.target.result)},U.onerror=K=>{var Le;ue(`${L}: ${null===(Le=K.target.error)||void 0===Le?void 0:Le.message}`)}})}class Rt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$="readonly"){return new Ke(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new be(this._db.createObjectStore(L,$))}close(){this._db.close()}}class Ke{constructor(L){this._transaction=L,this.complete=new Promise(($,ue)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{ue(this._transaction.error)},this._transaction.onabort=()=>{ue(this._transaction.error)}})}objectStore(L){return new be(this._transaction.objectStore(L))}}class be{constructor(L){this._store=L}index(L){return new Ye(this._store.index(L))}createIndex(L,$,ue){return new Ye(this._store.createIndex(L,$,ue))}get(L){return ar(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return ar(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return ar(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return ar(this._store.clear(),"Error clearing IndexedDB object store")}}class Ye{constructor(L){this._index=L}get(L){return ar(this._index.get(L),"Error reading from IndexedDB")}}function lt(U,L,$){return new Promise((ue,K)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=ft=>{ue(new Rt(ft.target.result))},Le.onerror=ft=>{var qt;K(`Error opening indexedDB: ${null===(qt=ft.target.error)||void 0===qt?void 0:qt.message}`)},Le.onupgradeneeded=ft=>{$(new Rt(Le.result),ft.oldVersion,ft.newVersion,new Ke(Le.transaction))}}catch(Le){K(`Error opening indexedDB: ${Le.message}`)}})}function Ot(U){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(U){return new Promise((L,$)=>{try{const ue=indexedDB.deleteDatabase(U);ue.onsuccess=()=>{L()},ue.onerror=K=>{var Le;$(`Error deleting indexedDB database "${U}": ${null===(Le=K.target.error)||void 0===Le?void 0:Le.message}`)}}catch(ue){$(`Error deleting indexedDB database "${U}": ${ue.message}`)}})})).apply(this,arguments)}},9752:(st,Ce,P)=>{var g=P(5e3);let W=null;function O(){return W}const re=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ae(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Z()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Z()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ge(){return new j((0,g.LFG)(re))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(n){const e=(0,g.LFG)(re).location;return new We((0,g.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Je=new g.OlP("appBaseHref");let We=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const d=this.prepareExternalUrl(o+Pe(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){const d=this.prepareExternalUrl(o+Pe(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(Je,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let d=this.prepareExternalUrl(o+Pe(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){let d=this.prepareExternalUrl(o+Pe(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(Je,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(Ue(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Pe,n.joinWithSlash=Te,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function _e(){return new ye((0,g.LFG)(he),(0,g.LFG)(de))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}class ms{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,l,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ms(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===l?void 0:l);else if(null!==l){const m=r.get(l);r.move(m,d),Hi(m,o)}});for(let o=0,l=r.length;o<l;o++){const m=r.get(o).context;m.index=o,m.count=l,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Hi(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Hi(n,e){n.context.$implicit=e.item}let ti=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Va("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Va("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class rn{constructor(){this.$implicit=null,this.ngIf=null}}function Va(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let yo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function nr(n){return"server"===n}let za=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Wa((0,g.LFG)(re),window)}),n})();class Wa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Qo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const d=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=zi(this.window.history)||zi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function zi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ws extends class _o extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){W||(W=n)}(new ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _c(){return sn=sn||document.querySelector("base"),sn?sn.getAttribute("href"):null}();return null==t?null:function Ks(n){Ws=Ws||document.createElement("a"),Ws.setAttribute("href",n);const e=Ws.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function po(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Ws,sn=null;const lr=new g.OlP("TRANSITION_ID"),Jo=[{provide:g.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[lr,re,g.zs3],multi:!0}];class vi{static init(){(0,g.VLi)(new vi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,d=!1;const m=function(w){d=d||w,l--,0==l&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let cr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Is=new g.OlP("EventManagerPlugins");let Wi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const d=o[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Is),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ka{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Vr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends Vr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bs))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function bs(n){O().remove(n)}const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Za=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(Za,n),t.push(o))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new vo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new $u(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Hu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Wi),g.LFG(Ds),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class vo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ct[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=ct[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ct[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(r)):this.eventManager.addEventListener(e,t,xt(r))}}class $u extends vo{constructor(e,t,r,o){super(e),this.component=r;const l=we(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Bu(n){return"_ngcontent-%COMP%".replace(Za,n)}(o+"-"+r.id),this.hostAttr=function ju(n){return"_nghost-%COMP%".replace(Za,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hu extends vo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=we(o.id,o.styles,[]);for(let d=0;d<l.length;d++){const m=document.createElement("style");m.textContent=l[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ec=(()=>{class n extends Ka{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Gu=["alt","control","meta","shift"],Cs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let eu=(()=>{class n extends Ka{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let d="";if(Gu.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ts(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&rr.hasOwnProperty(e)&&(e=rr[e]))}return Cs[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Gu.forEach(l=>{l!=o&&ii[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const zu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Ei(){ws.makeCurrent(),vi.init()},multi:!0},{provide:re,useFactory:function tu(){return(0,g.RDi)(document),document},deps:[]}]),ea=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function qu(){return new g.qLn},deps:[]},{provide:Is,useClass:Ec,multi:!0,deps:[re,g.R0b,g.Lbi]},{provide:Is,useClass:eu,multi:!0,deps:[re]},{provide:pn,useClass:pn,deps:[Wi,Ds,g.AFp]},{provide:g.FYo,useExisting:pn},{provide:Vr,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[re]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Wi,useClass:Wi,deps:[Is,g.R0b]},{provide:class dn{},useClass:cr,deps:[]}];let ta=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:lr,useExisting:g.AFp},Jo]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ea,imports:[yo,g.hGG]}),n})();"undefined"!=typeof window&&window;var Mn=P(8996),gn=P(8306);const{isArray:el}=Array,{getPrototypeOf:Yi,prototype:tl,keys:ra}=Object;function Xs(n){if(1===n.length){const e=n[0];if(el(e))return{args:e,keys:null};if(function Sc(n){return n&&"object"==typeof n&&Yi(n)===tl}(e)){const t=ra(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Xt=P(8421),Io=P(7669),mn=P(5403),Dt=P(4004);const{isArray:Ms}=Array;function nl(n){return(0,Dt.U)(e=>function Ap(n,e){return Ms(e)?n(...e):n(e)}(n,e))}function iu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let eo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),si=(()=>{class n extends eo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Bn=new g.OlP("NgValueAccessor"),to={provide:Bn,useExisting:(0,g.Gpc)(()=>bo),multi:!0},no=new g.OlP("CompositionEventMode");let bo=(()=>{class n extends eo{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rl(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(no,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([to]),g.qOj]}),n})();function oi(n){return null==n||0===n.length}function xs(n){return null!=n&&"number"==typeof n.length}const jn=new g.OlP("NgValidators"),ro=new g.OlP("NgAsyncValidators"),il=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ri{static min(e){return function Mc(n){return e=>{if(oi(e.value)||oi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ia(n){return e=>{if(oi(e.value)||oi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function sl(n){return oi(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function wi(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ol(n){return oi(n.value)||il.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function io(n){return e=>oi(e.value)||!xs(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function sa(n){return e=>xs(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Qi(n){if(!n)return Ji;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(oi(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return yn(e)}static composeAsync(e){return Sp(e)}}function Ji(n){return null}function ai(n){return null!=n}function xc(n){const e=(0,g.QGY)(n)?(0,Mn.D)(n):n;return(0,g.CqO)(e),e}function su(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function so(n,e){return e.map(t=>t(n))}function rh(n){return n.map(e=>function ou(n){return!n.validate}(e)?e:t=>e.validate(t))}function yn(n){if(!n)return null;const e=n.filter(ai);return 0==e.length?null:function(t){return su(so(t,e))}}function Rc(n){return null!=n?yn(rh(n)):null}function Sp(n){if(!n)return null;const e=n.filter(ai);return 0==e.length?null:function(t){return function nh(...n){const e=(0,Io.jO)(n),{args:t,keys:r}=Xs(n),o=new gn.y(l=>{const{length:d}=t;if(!d)return void l.complete();const m=new Array(d);let w=d,C=d;for(let x=0;x<d;x++){let N=!1;(0,Xt.Xf)(t[x]).subscribe((0,mn.x)(l,G=>{N||(N=!0,C--),m[x]=G},()=>w--,void 0,()=>{(!w||!N)&&(C||l.next(r?iu(r,m):m),l.complete())}))}});return e?o.pipe(nl(e)):o}(so(t,e).map(xc)).pipe((0,Dt.U)(su))}}function Nc(n){return null!=n?Sp(rh(n)):null}function al(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Oc(n){return n._rawValidators}function ih(n){return n._rawAsyncValidators}function Pc(n){return n?Array.isArray(n)?n:[n]:[]}function Ni(n,e){return Array.isArray(n)?n.includes(e):n===e}function sh(n,e){const t=Pc(e);return Pc(n).forEach(o=>{Ni(t,o)||t.push(o)}),t}function _n(n,e){return Pc(e).filter(t=>!Ni(n,t))}class au{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Nc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jr extends au{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ir extends au{get formDirective(){return null}get path(){return null}}class uu{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let ul=(()=>{class n extends uu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(jr,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),Xi=(()=>{class n extends uu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ir,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function hr(n,e){ts(n,e),e.valueAccessor.writeValue(n.value),function dl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function M(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function D(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ca(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Rs(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Co(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ts(n,e){const t=Oc(n);null!==e.validator?n.setValidators(al(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ih(n);null!==e.asyncValidator?n.setAsyncValidators(al(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Co(e._rawValidators,o),Co(e._rawAsyncValidators,o)}function Rs(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Oc(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=ih(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return Co(e._rawValidators,r),Co(e._rawAsyncValidators,r),t}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const br="VALID",Cr="INVALID",Gr="PENDING",Di="DISABLED";function Lc(n){return(Vc(n)?n.validators:n)||null}function hl(n){return Array.isArray(n)?Rc(n):n||null}function Ao(n,e){return(Vc(e)?e.asyncValidators:n)||null}function ch(n){return Array.isArray(n)?Nc(n):n||null}function Vc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const dh=n=>n instanceof Np,ns=n=>n instanceof Uc,cu=n=>n instanceof Op;function xp(n){return dh(n)?n.value:n.getRawValue()}function Rp(n,e){const t=ns(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function hh(n,e){ns(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class du{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=hl(this._rawValidators),this._composedAsyncValidatorFn=ch(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===br}get invalid(){return this.status===Cr}get pending(){return this.status==Gr}get disabled(){return this.status===Di}get enabled(){return this.status!==Di}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=hl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ch(e)}addValidators(e){this.setValidators(sh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_n(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_n(e,this._rawAsyncValidators))}hasValidator(e){return Ni(this._rawValidators,e)}hasAsyncValidator(e){return Ni(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Gr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Di,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=br,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===br||this.status===Gr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Di:br}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Gr,this._hasOwnPendingAsyncValidator=!0;const t=xc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Mp(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=ns(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:cu(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Di:this.errors?Cr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gr)?Gr:this._anyControlsHaveStatus(Cr)?Cr:br}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Np extends du{constructor(e=null,t,r){super(Lc(t),Ao(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vc(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Uc extends du{constructor(e,t,r){super(Lc(t),Ao(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hh(this,e),Object.keys(e).forEach(r=>{Rp(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=xp(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Op extends du{constructor(e,t,r){super(Lc(t),Ao(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hh(this,e),e.forEach((r,o)=>{Rp(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>xp(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Fp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const cy={provide:Bn,useExisting:(0,g.Gpc)(()=>yh),multi:!0};let yh=(()=>{class n extends si{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[g._Bn([cy]),g.qOj]}),n})(),rs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const Lp=new g.OlP("NgModelWithFormControlWarning"),Up={provide:Ir,useExisting:(0,g.Gpc)(()=>jc)};let jc=(()=>{class n extends Ir{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rs(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return hr(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ca(t.control||null,t,!1),vn(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function _t(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ca(r||null,t),dh(o)&&(hr(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function F(n,e){ts(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function q(n,e){return Rs(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ts(this.form,this),this._oldForm&&Rs(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(jn,10),g.Y36(ro,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Up]),g.qOj,g.TTD]}),n})();const hu={provide:jr,useExisting:(0,g.Gpc)(()=>$c)};let $c=(()=>{class n extends jr{constructor(t,r,o,l,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function xn(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===bo?t=l:function Bt(n){return Object.getPrototypeOf(n.constructor)===si}(l)?r=l:o=l}),o||r||t||null}(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function gt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function lu(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(Ir,13),g.Y36(jn,10),g.Y36(ro,10),g.Y36(Bn,10),g.Y36(Lp,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([hu]),g.qOj,g.TTD]}),n})(),C0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[rs]]}),n})(),fr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Lp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[C0]}),n})(),Zc=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,l=null,d=null;return null!=r&&(function _l(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(l=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(l=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Uc(o,{asyncValidators:d,updateOn:m,validators:l})}control(t,r,o){return new Np(t,r,o)}array(t,r,o){const l=t.map(d=>this._createControl(d));return new Op(l,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return dh(t)||ns(t)||cu(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:fr}),n})();function tt(...n){const e=(0,Io.yG)(n);return(0,Mn.D)(n,e)}var li=P(7579);class bi extends li.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var pr=P(4671),vl=P(9672);function El(n,e,t){n?(0,vl.f)(t,n,e):e()}var wl=P(576);function Il(n,e){const t=(0,wl.m)(n)?n:()=>n,r=o=>o.error(t());return new gn.y(e?o=>e.schedule(r,0,o):r)}const Yc=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ci=P(8189);function Ah(...n){return function Jp(){return(0,Ci.J)(1)}()((0,Mn.D)(n,(0,Io.yG)(n)))}function Qc(n){return new gn.y(e=>{(0,Xt.Xf)(n()).subscribe(e)})}var gu=P(515),Sh=P(727),on=P(4482);function Jc(){return(0,on.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Mh extends gn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,on.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Sh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Sh.w0.EMPTY)}return e}refCount(){return Jc()(this)}}function qr(n,e){return(0,on.e)((t,r)=>{let o=null,l=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,mn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const x=l++;(0,Xt.Xf)(n(w,x)).subscribe(o=(0,mn.x)(r,N=>r.next(e?e(w,N,x,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var is=P(5698);function Mo(...n){const e=(0,Io.yG)(n);return(0,on.e)((t,r)=>{(e?Ah(n,t,e):Ah(n,t)).subscribe(r)})}function xh(n,e,t,r,o){return(l,d)=>{let m=t,w=e,C=0;l.subscribe((0,mn.x)(d,x=>{const N=C++;w=m?n(w,x,N):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function mu(n,e){return(0,on.e)(xh(n,e,arguments.length>=2,!0))}function ao(n,e){return(0,on.e)((t,r)=>{let o=0;t.subscribe((0,mn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}function Ns(n){return(0,on.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe((0,mn.x)(t,void 0,void 0,d=>{l=(0,Xt.Xf)(n(d,Ns(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Tr=P(5577);function Dl(n,e){return(0,wl.m)(e)?(0,Tr.z)(n,e,1):(0,Tr.z)(n,1)}function Rh(n){return n<=0?()=>gu.E:(0,on.e)((e,t)=>{let r=[];e.subscribe((0,mn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Xp(n=y){return(0,on.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function y(){return new Yc}function h(n){return(0,on.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function v(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ao((o,l)=>n(o,l,r)):pr.y,(0,is.q)(1),t?h(e):Xp(()=>new Yc))}var T=P(8505);class H{constructor(e,t){this.id=e,this.url=t}}class ne extends H{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ke extends H{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qe extends H{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pt extends H{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ot extends H{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dn extends H{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi extends H{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bl extends H{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xc extends H{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ed{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vy{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class td{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nh{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class Ey{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ro(n){return new Ey(n)}const eg="ngNavigationCancelingError";function wy(n){const e=Error("NavigationCancelingError: "+n);return e[eg]=!0,e}function XI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const d=r[l],m=n[l];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Os(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!Iy(n[o],e[o]))return!1;return!0}function Iy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function tg(n){return Array.prototype.concat.apply([],n)}function A0(n){return n.length>0?n[n.length-1]:null}function Ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function uo(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Mn.D)(Promise.resolve(n)):tt(n)}const S0={exact:function x0(n,e,t){if(!ga(n.segments,e.segments)||!rd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!x0(n.children[r],e.children[r],t))return!1;return!0},subset:by},Dy={exact:function ng(n,e){return Os(n,e)},subset:function R0(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Iy(n[t],e[t]))},ignored:()=>!0};function M0(n,e,t){return S0[t.paths](n.root,e.root,t.matrixParams)&&Dy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function by(n,e,t){return Cy(n,e,e.segments,t)}function Cy(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ga(o,t)||e.hasChildren()||!rd(o,t,r))}if(n.segments.length===t.length){if(!ga(n.segments,t)||!rd(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!by(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(ga(n.segments,o)&&rd(n.segments,o,r)&&n.children[St])&&Cy(n.children[St],e,l,r)}}function rd(n,e,t){return e.every((r,o)=>Dy[t](n[o].parameters,r.parameters))}class _u{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return eD.serialize(this)}}class kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ar(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}}class vu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ro(this.parameters)),this._parameterMap}toString(){return k0(this)}}function ga(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class rg{}class id{parse(e){const t=new oD(e);return new _u(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ph(e.root,!0)}`,r=function tD(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${kh(t)}=${kh(o)}`).join("&"):`${kh(t)}=${kh(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ty(n){return encodeURI(n)}(e.fragment)}`:""}`}}const eD=new id;function Oh(n){return n.segments.map(e=>k0(e)).join("/")}function Ph(n,e){if(!n.hasChildren())return Oh(n);if(e){const t=n.children[St]?Ph(n.children[St],!1):"",r=[];return Ar(n.children,(o,l)=>{l!==St&&r.push(`${l}:${Ph(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function O0(n,e){let t=[];return Ar(n.children,(r,o)=>{o===St&&(t=t.concat(e(r,o)))}),Ar(n.children,(r,o)=>{o!==St&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===St?[Ph(n.children[St],!1)]:[`${o}:${Ph(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${Oh(n)}/${t[0]}`:`${Oh(n)}/(${t.join("//")})`}}function P0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kh(n){return P0(n).replace(/%3B/gi,";")}function ig(n){return P0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ay(n){return decodeURIComponent(n)}function Sy(n){return Ay(n.replace(/\+/g,"%20"))}function k0(n){return`${ig(n.path)}${function F0(n){return Object.keys(n).map(e=>`;${ig(e)}=${ig(n[e])}`).join("")}(n.parameters)}`}const nD=/^[^\/()?;=#]+/;function ki(n){const e=n.match(nD);return e?e[0]:""}const rD=/^[^=?&#]+/,iD=/^[^&#]+/;class oD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new kt(e,t)),r}parseSegment(){const e=ki(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new vu(Ay(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ki(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ki(this.remaining);o&&(r=o,this.capture(r))}e[Ay(t)]=Ay(r)}parseQueryParam(e){const t=function L0(n){const e=n.match(rD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function sD(n){const e=n.match(iD);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Sy(t),l=Sy(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ki(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=St);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[St]:new kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class V0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=My(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return My(e,this._root).map(t=>t.value)}}function sg(n,e){if(n===e.value)return e;for(const t of e.children){const r=sg(n,t);if(r)return r}return null}function My(n,e){if(n===e.value)return[e];for(const t of e.children){const r=My(n,t);if(r.length)return r.unshift(e),r}return[]}class ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bt extends V0{constructor(e,t){super(e),this.snapshot=t,Vh(this,e)}toString(){return this.snapshot.toString()}}function xy(n,e){const t=function U0(n,e){const d=new Lh([],{},{},"",{},St,e,null,n.root,-1,{});return new B0("",new ma(d,[]))}(n,e),r=new bi([new vu("",{})]),o=new bi({}),l=new bi({}),d=new bi({}),m=new bi(""),w=new Tl(r,o,d,m,l,St,e,t.root);return w.snapshot=t.root,new bt(new ma(w,[]),t)}class Tl{constructor(e,t,r,o,l,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>Ro(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>Ro(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fh(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function lo(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Lh{constructor(e,t,r,o,l,d,m,w,C,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ro(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class B0 extends V0{constructor(e,t){super(t),this.url=e,Vh(this,t)}toString(){return No(this._root)}}function Vh(n,e){e.value._routerState=n,e.children.forEach(t=>Vh(n,t))}function No(n){const e=n.children.length>0?` { ${n.children.map(No).join(", ")} } `:"";return`${n.value}${e}`}function Uh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Os(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Os(e.params,t.params)||n.params.next(t.params),function T0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Os(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Os(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function og(n,e){const t=Os(n.params,e.params)&&function N0(n,e){return ga(n,e)&&n.every((t,r)=>Os(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||og(n.parent,e.parent))}function ag(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function j0(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ag(n,r,o);return ag(n,r)})}(n,e,t);return new ma(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const d=l.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>ag(n,m)),d}}const r=function mA(n){return new Tl(new bi(n.url),new bi(n.params),new bi(n.queryParams),new bi(n.fragment),new bi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>ag(n,l));return new ma(r,o)}}function Al(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Sl(n){return"object"==typeof n&&null!=n&&n.outlets}function Bh(n,e,t,r,o){let l={};if(r&&Ar(r,(m,w)=>{l[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new _u(t,l,o);const d=lg(n,e,t);return new _u(d,l,o)}function lg(n,e,t){const r={};return Ar(n.children,(o,l)=>{r[l]=o===e?t:lg(o,e,t)}),new kt(n.segments,r)}class aD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Al(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Sl);if(o&&o!==A0(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ny{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function dD(n,e,t){if(n||(n=new kt([],{})),0===n.segments.length&&n.hasChildren())return cg(n,e,t);const r=function yA(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const d=n.segments[o],m=t[r];if(Sl(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!hg(w,C,d))return l;r+=2}else{if(!hg(w,{},d))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new kt(n.segments.slice(0,r.pathIndex),{});return l.children[St]=new kt(n.segments.slice(r.pathIndex),n.children),cg(l,0,o)}return r.match&&0===o.length?new kt(n.segments,{}):r.match&&!n.hasChildren()?dg(n,e,t):r.match?cg(n,0,o):dg(n,e,t)}function cg(n,e,t){if(0===t.length)return new kt(n.segments,{});{const r=function $0(n){return Sl(n[0])?n[0].outlets:{[St]:n}}(t),o={};return Ar(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[d]=dD(n.children[d],e,l))}),Ar(n.children,(l,d)=>{void 0===r[d]&&(o[d]=l)}),new kt(n.segments,o)}}function dg(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(Sl(l)){const w=H0(l.outlets);return new kt(r,w)}if(0===o&&Al(t[0])){r.push(new vu(n.segments[e].path,G0(t[0]))),o++;continue}const d=Sl(l)?l.outlets[St]:`${l}`,m=o<t.length-1?t[o+1]:null;d&&m&&Al(m)?(r.push(new vu(d,G0(m))),o+=2):(r.push(new vu(d,{})),o++)}return new kt(r,{})}function H0(n){const e={};return Ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=dg(new kt([],{}),0,t))}),e}function G0(n){const e={};return Ar(n,(t,r)=>e[r]=`${t}`),e}function hg(n,e,t){return n==t.path&&Os(e,t.parameters)}class vA{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Uh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=sd(t);e.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,o[d],r),delete o[d]}),Ar(o,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=sd(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=sd(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=sd(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new Nh(l.value.snapshot))}),e.children.length&&this.forwardEvent(new xo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(Uh(o),o===l)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Uh(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function EA(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class q0{constructor(e,t){this.routes=e,this.module=t}}function Ml(n){return"function"==typeof n}function od(n){return n instanceof _u}const xl=Symbol("INITIAL_VALUE");function jh(){return qr(n=>function Th(...n){const e=(0,Io.yG)(n),t=(0,Io.jO)(n),{args:r,keys:o}=Xs(n);if(0===r.length)return(0,Mn.D)([],e);const l=new gn.y(function _y(n,e,t=pr.y){return r=>{El(e,()=>{const{length:o}=n,l=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)El(e,()=>{const C=(0,Mn.D)(n[w],e);let x=!1;C.subscribe((0,mn.x)(r,N=>{l[w]=N,x||(x=!0,m--),m||r.next(t(l.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>iu(o,d):pr.y));return t?l.pipe(nl(t)):l}(n.map(e=>e.pipe((0,is.q)(1),Mo(xl)))).pipe(mu((e,t)=>{let r=!1;return t.reduce((o,l,d)=>o!==xl?o:(l===xl&&(r=!0),r||!1!==l&&d!==t.length-1&&!od(l)?o:l),e)},xl),ao(e=>e!==xl),(0,Dt.U)(e=>od(e)?e:!0===e),(0,is.q)(1)))}class z0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rl,this.attachRef=null}}class Rl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new z0,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let fg=(()=>{class n{constructor(t,r,o,l,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||St,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Oy(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Rl),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Oy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tl?this.route:e===Rl?this.childContexts:this.parent.get(e,t)}}let W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[fg],encapsulation:2}),n})();function ya(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];K0(r,hD(e,r))}}function K0(n,e){n.children&&ya(n.children,e)}function hD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function $h(n){const e=n.children&&n.children.map($h),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=W0),t}function Ps(n){return n.outlet||St}function Py(n,e){const t=n.filter(r=>Ps(r)===e);return t.push(...n.filter(r=>Ps(r)!==e)),t}const Z0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Z0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||XI)(t,n,e);if(!l)return Object.assign({},Z0);const d={};Ar(l.posParams,(w,C)=>{d[C]=w.path});const m=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function wu(n,e,t,r,o="corrected"){if(t.length>0&&function ud(n,e,t){return t.some(r=>_a(n,e,r)&&Ps(r)!==St)}(n,t,r)){const d=new kt(e,function ky(n,e,t,r){const o={};o[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Ps(l)!==St){const d=new kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Ps(l)]=d}return o}(n,e,r,new kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Hh(n,e,t){return t.some(r=>_a(n,e,r))}(n,t,r)){const d=new kt(n.segments,function ad(n,e,t,r,o,l){const d={};for(const m of r)if(_a(n,t,m)&&!o[Ps(m)]){const w=new kt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,d[Ps(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const l=new kt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function _a(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Y0(n,e,t,r){return!!(Ps(n)===r||r!==St&&_a(e,t,n))&&("**"===n.path||pg(e,n,t).matched)}function Fy(n,e,t){return 0===e.length&&!n.children[t]}class Gh{constructor(e){this.segmentGroup=e||null}}class gg{constructor(e){this.urlTree=e}}function Nl(n){return Il(new Gh(n))}function Ly(n){return Il(new gg(n))}class CA{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=wu(this.urlTree.root,[],[],this.config).segmentGroup,t=new kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,St).pipe((0,Dt.U)(l=>this.createUrlTree(yg(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ns(l=>{if(l instanceof gg)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Gh?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,St).pipe((0,Dt.U)(o=>this.createUrlTree(yg(o),e.queryParams,e.fragment))).pipe(Ns(o=>{throw o instanceof Gh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new kt([],{[St]:e}):e;return new _u(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Dt.U)(l=>new kt([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,Mn.D)(o).pipe(Dl(l=>{const d=r.children[l],m=Py(t,l);return this.expandSegmentGroup(e,m,d,l).pipe((0,Dt.U)(w=>({segment:w,outlet:l})))}),mu((l,d)=>(l[d.outlet]=d.segment,l),{}),function p(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ao((o,l)=>n(o,l,r)):pr.y,Rh(1),t?h(e):Xp(()=>new Yc))}())}expandSegment(e,t,r,o,l,d){return(0,Mn.D)(r).pipe(Dl(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,d).pipe(Ns(C=>{if(C instanceof Gh)return tt(null);throw C}))),v(m=>!!m),Ns((m,w)=>{if(m instanceof Yc||"EmptyError"===m.name)return Fy(t,o,l)?tt(new kt([],{})):Nl(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,d,m){return Y0(o,t,l,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d):Nl(t):Nl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ly(l):this.lineralizeSegments(r,l).pipe((0,Tr.z)(d=>{const m=new kt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:x}=pg(t,o,l);if(!m)return Nl(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?Ly(N):this.lineralizeSegments(o,N).pipe((0,Tr.z)(G=>this.expandSegment(e,t,r,G.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Dt.U)(N=>(r._loadedConfig=N,new kt(o,{})))):tt(new kt(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=pg(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Tr.z)(x=>{const N=x.module,G=x.routes,{segmentGroup:Y,slicedSegments:ce}=wu(t,m,w,G),Fe=new kt(Y.segments,Y.children);if(0===ce.length&&Fe.hasChildren())return this.expandChildren(N,G,Fe).pipe((0,Dt.U)(Qt=>new kt(m,Qt)));if(0===G.length&&0===ce.length)return tt(new kt(m,{}));const it=Ps(r)===l;return this.expandSegment(N,Fe,G,ce,it?St:l,!0).pipe((0,Dt.U)(Kt=>new kt(m.concat(Kt.segments),Kt.children)))})):Nl(t)}getChildConfig(e,t,r){return t.children?tt(new q0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Tr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Dt.U)(l=>(t._loadedConfig=l,l))):function fD(n){return Il(wy(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):tt(new q0([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?tt(o.map(d=>{const m=e.get(d);let w;if(function IA(n){return n&&Ml(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Ml(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return uo(w)})).pipe(jh(),(0,T.b)(d=>{if(!od(d))return;const m=wy(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Dt.U)(d=>!0===d)):tt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return tt(r);if(o.numberOfChildren>1||!o.children[St])return Il(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new _u(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ar(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let d={};return Ar(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new kt(l,d)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function yg(n){const e={};for(const r of Object.keys(n.children)){const l=yg(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function J0(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new kt(n.segments.concat(e.segments),e.children)}return n}(new kt(n.segments,e))}class Vy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _g{constructor(e,t){this.component=e,this.route=t}}function gD(n,e,t){const r=n._root;return Eg(r,e?e._root:null,t,[r.value])}function vg(n,e,t){const r=function mD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Eg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=sd(e);return n.children.forEach(d=>{(function TA(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const w=function X0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ga(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ga(n.url,e.url)||!Os(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!og(n,e)||!Os(n.queryParams,e.queryParams);default:return!og(n,e)}}(d,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Vy(r)):(l.data=d.data,l._resolvedData=d._resolvedData),Eg(n,e,l.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new _g(m.outlet.component,d))}else d&&wg(e,m,o),o.canActivateChecks.push(new Vy(r)),Eg(n,null,l.component?m?m.children:null:t,r,o)})(d,l[d.value.outlet],t,r.concat([d.value]),o),delete l[d.value.outlet]}),Ar(l,(d,m)=>wg(d,t.getContext(m),o)),o}function wg(n,e,t){const r=sd(n),o=n.value;Ar(r,(l,d)=>{wg(l,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new _g(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class nE{}function rE(n){return new gn.y(e=>e.error(n))}class iE{constructor(e,t,r,o,l,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const e=wu(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,St);if(null===t)return null;const r=new Lh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ma(r,t),l=new B0(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=Fh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const d=t.children[l],m=Py(e,l),w=this.processSegmentGroup(m,d,l);if(null===w)return null;r.push(...w)}const o=Ig(r);return function sE(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const d=this.processSegmentAgainstRoute(l,t,r,o);if(null!==d)return d}return Fy(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Y0(e,t,r,o))return null;let l,d=[],m=[];if("**"===e.path){const Y=r.length>0?A0(r).parameters:{};l=new Lh(r,Y,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,By(e),Ps(e),e.component,e,oE(t),bD(t)+r.length,aE(e))}else{const Y=pg(t,e,r);if(!Y.matched)return null;d=Y.consumedSegments,m=Y.remainingSegments,l=new Lh(d,Y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,By(e),Ps(e),e.component,e,oE(t),bD(t)+d.length,aE(e))}const w=function DD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=wu(t,d,m,w.filter(Y=>void 0===Y.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const Y=this.processChildren(w,C);return null===Y?null:[new ma(l,Y)]}if(0===w.length&&0===x.length)return[new ma(l,[])];const N=Ps(e)===o,G=this.processSegment(w,C,x,N?St:o);return null===G?null:[new ma(l,G)]}}function Oo(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ig(n){const e=[],t=new Set;for(const r of n){if(!Oo(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Ig(r.children);e.push(new ma(r.value,o))}return e.filter(r=>!t.has(r))}function oE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bD(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function By(n){return n.data||{}}function aE(n){return n.resolve||{}}function uE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qh(n){return qr(e=>{const t=n(e);return t?(0,Mn.D)(t).pipe((0,Dt.U)(()=>e)):tt(e)})}class Hy extends class $y{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bg=new g.OlP("ROUTES");class lE{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Dt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=l.create(e);return new q0(tg(d.injector.get(bg,void 0,g.XFs.Self|g.XFs.Optional)).map($h),d)}),Ns(l=>{throw t._loader$=void 0,l}));return t._loader$=new Mh(o,()=>new li.x).pipe(Jc()),t._loader$}loadModuleFactory(e){return uo(e()).pipe((0,Tr.z)(t=>t instanceof g.YKP?tt(t):(0,Mn.D)(this.compiler.compileModuleAsync(t))))}}class Gy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function SA(n){throw n}function xD(n,e,t){return e.parse("/")}function qy(n,e){return tt(null)}const cE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fi=(()=>{class n{constructor(t,r,o,l,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new li.x,this.errorHandler=SA,this.malformedUriErrorHandler=xD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qy,afterPreactivation:qy},this.urlHandlingStrategy=new Gy,this.routeReuseStrategy=new Hy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Cl(){return new _u(new kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new lE(d,m,G=>this.triggerEvent(new yu(G)),G=>this.triggerEvent(new ed(G))),this.routerState=xy(this.currentUrlTree,this.rootComponentType),this.transitions=new bi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ao(o=>0!==o.id),(0,Dt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),qr(o=>{let l=!1,d=!1;return tt(o).pipe((0,T.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qr(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Po(m.source)&&(this.browserUrlTree=m.extractedUrl),tt(m).pipe(qr(N=>{const G=this.transitions.getValue();return r.next(new ne(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),G!==this.transitions.getValue()?gu.E:Promise.resolve(N)}),function pD(n,e,t,r){return qr(o=>function Q0(n,e,t,r,o){return new CA(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Dt.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,T.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function CD(n,e,t,r,o){return(0,Tr.z)(l=>function ID(n,e,t,r,o="emptyOnly",l="legacy"){try{const d=new iE(n,e,t,r,o,l).recognize();return null===d?rE(new nE):tt(d)}catch(d){return rE(d)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,Dt.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,T.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Y,N)}this.browserUrlTree=N.urlAfterRedirects}const G=new ot(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(G)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:Y,source:ce,restoredState:Fe,extras:it}=m,Wt=new ne(G,this.serializeUrl(Y),ce,Fe);r.next(Wt);const Kt=xy(Y,this.rootComponentType).snapshot;return tt(Object.assign(Object.assign({},m),{targetSnapshot:Kt,urlAfterRedirects:Y,extras:Object.assign(Object.assign({},it),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),gu.E}),qh(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Y}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Y})}),(0,T.b)(m=>{const w=new Dn(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Dt.U)(m=>Object.assign(Object.assign({},m),{guards:gD(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function yD(n,e){return(0,Tr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Uy(n,e,t,r){return(0,Mn.D)(n).pipe((0,Tr.z)(o=>function wD(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?tt(l.map(m=>{const w=vg(m,e,o);let C;if(function Eu(n){return n&&Ml(n.canDeactivate)}(w))C=uo(w.canDeactivate(n,e,t,r));else{if(!Ml(w))throw new Error("Invalid CanDeactivate guard");C=uo(w(n,e,t,r))}return C.pipe(v())})).pipe(jh()):tt(!0)}(o.component,o.route,t,e,r)),v(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Tr.z)(m=>m&&function wA(n){return"boolean"==typeof n}(m)?function eE(n,e,t,r){return(0,Mn.D)(e).pipe(Dl(o=>Ah(function vD(n,e){return null!==n&&e&&e(new vy(n)),tt(!0)}(o.route.parent,r),function _D(n,e){return null!==n&&e&&e(new td(n)),tt(!0)}(o.route,r),function tE(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(d=>function ss(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Qc(()=>tt(d.guards.map(w=>{const C=vg(w,d.node,t);let x;if(function bA(n){return n&&Ml(n.canActivateChild)}(C))x=uo(C.canActivateChild(r,n));else{if(!Ml(C))throw new Error("Invalid CanActivateChild guard");x=uo(C(r,n))}return x.pipe(v())})).pipe(jh())));return tt(l).pipe(jh())}(n,o.path,t),function ED(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const o=r.map(l=>Qc(()=>{const d=vg(l,e,t);let m;if(function DA(n){return n&&Ml(n.canActivate)}(d))m=uo(d.canActivate(e,n));else{if(!Ml(d))throw new Error("Invalid CanActivate guard");m=uo(d(e,n))}return m.pipe(v())}));return tt(o).pipe(jh())}(n,o.route,t))),v(o=>!0!==o,!0))}(r,l,n,e):tt(m)),(0,Dt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,T.b)(m=>{if(od(m.guardsResult)){const C=wy(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new Pi(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),ao(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),qh(m=>{if(m.guards.canActivateChecks.length)return tt(m).pipe((0,T.b)(w=>{const C=new bl(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),qr(w=>{let C=!1;return tt(w).pipe(function TD(n,e){return(0,Tr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return tt(t);let l=0;return(0,Mn.D)(o).pipe(Dl(d=>function jy(n,e,t,r){return function AD(n,e,t,r){const o=uE(n);if(0===o.length)return tt({});const l={};return(0,Mn.D)(o).pipe((0,Tr.z)(d=>function Dg(n,e,t,r){const o=vg(n,e,r);return uo(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,T.b)(m=>{l[d]=m}))),Rh(1),(0,Tr.z)(()=>uE(l).length===o.length?tt(l):gu.E))}(n._resolve,n,e,r).pipe((0,Dt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Fh(n,t).resolve),null)))}(d.route,r,n,e)),(0,T.b)(()=>l++),Rh(1),(0,Tr.z)(d=>l===o.length?tt(t):gu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,T.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,T.b)(w=>{const C=new Xc(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),qh(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Y}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Y})}),(0,Dt.U)(m=>{const w=function Ry(n,e,t){const r=ag(n,e._root,t?t._root:void 0);return new bt(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,T.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Dt.U)(r=>(new vA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,T.b)({next(){l=!0},complete(){l=!0}}),function R(n){return(0,on.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;l||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Ns(m=>{if(d=!0,function JI(n){return n&&n[eg]}(m)){const w=od(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Qe(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Po(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new pt(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return gu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const l={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ya(t),this.config=t.map($h),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function ug(n,e,t,r,o){if(0===t.length)return Bh(e.root,e.root,e.root,r,o);const l=function uD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new aD(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return Ar(l.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===d?(l.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new aD(t,e,r)}(t);if(l.toRoot())return Bh(e.root,e.root,new kt([],{}),r,o);const d=function lD(n,e,t){if(n.isAbsolute)return new Ny(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Ny(l,l===e.root,0)}const r=Al(n.commands[0])?0:1;return function cD(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Ny(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=d.processChildren?cg(d.segmentGroup,d.index,l.commands):dD(d.segmentGroup,d.index,l.commands);return Bh(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=od(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function hE(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},cE):!1===r?Object.assign({},dE):r,od(t))return M0(this.currentUrlTree,t,o);const l=this.parseUrl(t);return M0(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,x,N;d?(C=d.resolve,x=d.reject,N=d.promise):N=new Promise((ce,Fe)=>{C=ce,x=Fe});const G=++this.navigationId;let Y;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Y=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Y=0,this.setTransition({id:G,targetPageId:Y,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:C,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ce=>Promise.reject(ce))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Qe(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Po(n){return"imperative"!==n}let zh=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new li.x,this.subscription=t.events.subscribe(l=>{l instanceof ke&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,l,d){if(0!==t||r||o||l||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:cd(this.skipLocationChange),replaceUrl:cd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:cd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Fi),g.Y36(Tl),g.Y36(he))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function cd(n){return""===n||!!n}class Wy{}class dd{preload(e,t){return tt(null)}}let fE=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new lE(o,r,w=>t.triggerEvent(new yu(w)),w=>t.triggerEvent(new ed(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(ao(t=>t instanceof ke),Dl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,Mn.D)(o).pipe((0,Ci.J)(),(0,Dt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Tr.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Fi),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Wy))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Wh=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ne?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ke&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new nd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new g.OlP("ROUTER_CONFIGURATION"),Zy=new g.OlP("ROUTER_FORROOT_GUARD"),ND=[ye,{provide:rg,useClass:id},{provide:Fi,useFactory:function PD(n,e,t,r,o,l,d={},m,w){const C=new Fi(null,n,e,t,r,o,tg(l));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function kD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var N,G;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(G=console.groupEnd)||void 0===G||G.call(console)}),C},deps:[rg,Rl,ye,g.zs3,g.Sil,bg,Iu,[class MD{},new g.FiY],[class SD{},new g.FiY]]},Rl,{provide:Tl,useFactory:function fd(n){return n.routerState.root},deps:[Fi]},fE,dd,class Ky{preload(e,t){return t().pipe(Ns(()=>tt(null)))}},{provide:Iu,useValue:{enableTracing:!1}}];function Yy(){return new g.PXZ("Router",Fi)}let pE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[ND,Qy(t),{provide:Zy,useFactory:hd,deps:[[Fi,new g.FiY,new g.tp0]]},{provide:Iu,useValue:r||{}},{provide:he,useFactory:gE,deps:[de,[new g.tBr(Je),new g.FiY],Iu]},{provide:Wh,useFactory:OD,deps:[Fi,za,Iu]},{provide:Wy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:dd},{provide:g.PXZ,multi:!0,useFactory:Yy},[Jy,{provide:g.ip1,multi:!0,useFactory:FD,deps:[Jy]},{provide:mE,useFactory:LD,deps:[Jy]},{provide:g.tb,multi:!0,useExisting:mE}]]}}static forChild(t){return{ngModule:n,providers:[Qy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Zy,8),g.LFG(Fi,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function OD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Wh(n,e,t)}function gE(n,e,t={}){return t.useHash?new De(n,e):new We(n,e)}function hd(n){return"guarded"}function Qy(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:bg,multi:!0,useValue:n}]}let Jy=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new li.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(Fi),d=this.injector.get(Iu);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Iu),o=this.injector.get(fE),l=this.injector.get(Wh),d=this.injector.get(Fi),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),l.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function FD(n){return n.appInitializer.bind(n)}function LD(n){return n.bootstrapListener.bind(n)}const mE=new g.OlP("Router Initializer");let _E=(()=>{class n{constructor(){this.title="M\xfaltiplo"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"w-100"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g._UZ(1,"router-outlet"),g.qZA())},directives:[fg],styles:[""]}),n})();var ks=P(2011),vE=P(6451),Kh=P(5363),VD=P(6063);class UD extends li.x{constructor(e=1/0,t=1/0,r=VD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:d}=this;t||(r.push(e),!o&&r.push(l.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let d=0;d<l.length&&!e.closed;d+=r?1:2)e.next(l[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var BD=P(3099);function EE(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,BD.B)({connector:()=>new UD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Xy(n,e){return(0,wl.m)(e)?qr(()=>n,e):qr(()=>n)}var wE=P(9468),gr=P(5813);P(5867);var me=P(5861),Ol=P(9681),pd=P(4859),jt=P(2090),Du=P(1877);const DE=new Map,WD={activated:!1,tokenObservers:[]},KD={initialized:!1,enabled:!1};function Sr(n){return DE.get(n)||WD}function Li(n,e){DE.set(n,e)}function va(){return KD}class Yh{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new jt.BH,yield function ci(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new jt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Mr=new jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ag(n){if(!Sr(n).activated)throw Mr.create("use-before-activation",{appName:n.name})}function Cu(n,e){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const l={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,l)}catch(N){throw Mr.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw Mr.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw Mr.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Mr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}})).apply(this,arguments)}function _d(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ed="firebase-app-check-store";let Qh=null;function i_(){return Qh||(Qh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Mr.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ed,{keyPath:"compositeKey"})}}catch(t){e(Mr.create("storage-open",{originalErrorMessage:t.message}))}}),Qh)}function Sg(){return(Sg=(0,me.Z)(function*(n,e){const r=(yield i_()).transaction(Ed,"readwrite"),l=r.objectStore(Ed).put({compositeKey:n,value:e});return new Promise((d,m)=>{l.onsuccess=w=>{d()},r.onerror=w=>{var C;m(Mr.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Jh=new Du.Yd("@firebase/app-check");function RE(n,e){return(0,jt.hl)()?function TE(n,e){return function ME(n,e){return Sg.apply(this,arguments)}(function o_(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function OE(){return va().enabled}function JD(){return u_.apply(this,arguments)}function u_(){return(u_=(0,me.Z)(function*(){const n=va();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const c_={error:"UNKNOWN_ERROR"};function XD(n){return jt.US.encodeString(JSON.stringify(n),!1)}function d_(n){return PE.apply(this,arguments)}function PE(){return(PE=(0,me.Z)(function*(n,e=!1){const t=n.app;Ag(t);const r=Sr(t);let l,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&wa(w)&&(o=w)}if(!e&&o&&wa(o))return{token:o.token};let m,d=!1;if(OE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Cu(_d(t,yield JD()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield RE(t,w),Li(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Jh.warn(w.message):Jh.error(w),l=w}return o?(m={token:o.token},Li(t,Object.assign(Object.assign({},r),{token:o})),yield RE(t,o)):m=eb(l),d&&FE(t,m),m})).apply(this,arguments)}function h_(n,e){const t=Sr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Li(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function f_(n){const{app:e}=n,t=Sr(e);let r=t.tokenRefresher;r||(r=function OA(n){const{app:e}=n;return new Yh((0,me.Z)(function*(){let r;if(r=Sr(e).token?yield d_(n,!0):yield d_(n),r.error)throw r.error}),()=>!0,()=>{const t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Li(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function FE(n,e){const t=Sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function wa(n){return n.expireTimeMillis-Date.now()>0}function eb(n){return{token:XD(c_),error:n}}class LE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)h_(this.app,t.next);return Promise.resolve()}}const lb="app-check-internal";!function cb(){(0,Ol._registerComponent)(new pd.wA("app-check",n=>function tb(n,e){return new LE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lb).initialize()})),(0,Ol._registerComponent)(new pd.wA(lb,n=>function VE(n){return{getToken:e=>d_(n,e),addTokenListener:e=>function kE(n,e,t,r){const{app:o}=n,l=Sr(o),d={next:t,error:r,type:e};if(Li(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&wa(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),f_(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>f_(n))}(n,"INTERNAL",e),removeTokenListener:e=>h_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ol.registerVersion)("@firebase/app-check","0.5.7")}();class Pg{constructor(){return(0,gr.vb)("app-check")}}"undefined"!=typeof window&&window;var kg=P(127);const w_=new g.OlP("angularfire2.auth.use-emulator"),I_=new g.OlP("angularfire2.auth.settings"),D_=new g.OlP("angularfire2.auth.tenant-id"),b_=new g.OlP("angularfire2.auth.langugage-code"),C_=new g.OlP("angularfire2.auth.use-device-language"),T_=new g.OlP("angularfire.auth.persistence"),A_=(n,e,t,r,o,l,d,m)=>(0,ks.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,l&&w.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))w.settings[C]=x;return m&&w.setPersistence(m),w},[t,r,o,l,d,m]);let ZE=(()=>{class n{constructor(t,r,o,l,d,m,w,C,x,N,G,Y){const ce=new li.x,Fe=tt(void 0).pipe((0,Kh.Q)(d.outsideAngular),qr(()=>l.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,820)))),(0,Dt.U)(()=>(0,ks.on)(t,l,r)),(0,Dt.U)(it=>A_(it,l,m,C,x,N,w,G)),EE({bufferSize:1,refCount:!1}));if(nr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{Fe.pipe(v()).subscribe();const Wt=Fe.pipe(qr(Nt=>Nt.getRedirectResult().then(Zt=>Zt,()=>null)),gr.iC,EE({bufferSize:1,refCount:!1})),Kt=Fe.pipe(qr(Nt=>new gn.y(Zt=>({unsubscribe:l.runOutsideAngular(()=>Nt.onAuthStateChanged(hn=>Zt.next(hn),hn=>Zt.error(hn),()=>Zt.complete()))})))),Qt=Fe.pipe(qr(Nt=>new gn.y(Zt=>({unsubscribe:l.runOutsideAngular(()=>Nt.onIdTokenChanged(hn=>Zt.next(hn),hn=>Zt.error(hn),()=>Zt.complete()))}))));this.authState=Wt.pipe(Xy(Kt),(0,wE.R)(d.outsideAngular),(0,Kh.Q)(d.insideAngular)),this.user=Wt.pipe(Xy(Qt),(0,wE.R)(d.outsideAngular),(0,Kh.Q)(d.insideAngular)),this.idToken=this.user.pipe(qr(Nt=>Nt?(0,Mn.D)(Nt.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(qr(Nt=>Nt?(0,Mn.D)(Nt.getIdTokenResult()):tt(null))),this.credential=(0,vE.T)(Wt,ce,this.authState.pipe(ao(Nt=>!Nt))).pipe((0,Dt.U)(Nt=>(null==Nt?void 0:Nt.user)?Nt:null),(0,wE.R)(d.outsideAngular),(0,Kh.Q)(d.insideAngular))}return(0,ks.pX)(this,Fe,l,{spy:{apply:(it,Wt,Kt)=>{(it.startsWith("signIn")||it.startsWith("createUser"))&&Kt.then(Qt=>ce.next(Qt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ks.Dh),g.LFG(ks.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gr.HU),g.LFG(w_,8),g.LFG(I_,8),g.LFG(D_,8),g.LFG(b_,8),g.LFG(C_,8),g.LFG(T_,8),g.LFG(Pg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yb=(()=>{class n{constructor(){kg.Z.registerVersion("angularfire",gr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[ZE]}),n})();var _b=P(4986);function Fg(){return(0,on.e)((n,e)=>{let t,r=!1;n.subscribe((0,mn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function mr(n,e){return n===e}P(820);var Xe,wb=P(3942),Ib="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lo={},Lg=Lg||{},wt=Ib||self;function Ia(){}function S_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function tf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var M_="closure_uid_"+(1e9*Math.random()>>>0),QE=0;function UA(n,e,t){return n.call.apply(n.bind,arguments)}function JE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function yr(n,e,t){return(yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UA:JE).apply(null,arguments)}function os(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function zr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Da(){this.s=this.s,this.o=this.o}var ho={};Da.prototype.s=!1,Da.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function YE(n){return Object.prototype.hasOwnProperty.call(n,M_)&&n[M_]||(n[M_]=++QE)}(this);delete ho[n]}},Da.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fs=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},x_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function ew(n){return Array.prototype.concat.apply([],arguments)}function R_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Vg(n){return/^[\s\xa0]*$/.test(n)}var Ai,tw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Wr(n,e){return-1!=n.indexOf(e)}function kl(n,e){return n<e?-1:n>e?1:0}e:{var N_=wt.navigator;if(N_){var nw=N_.userAgent;if(nw){Ai=nw;break e}}Ai=""}function Ug(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function O_(n){const e={};for(const t in n)e[t]=n[t];return e}var nf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rw(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<nf.length;l++)t=nf[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Bg(n){return Bg[" "](n),n}Bg[" "]=Ia;var rf,n,P_=Wr(Ai,"Opera"),ba=Wr(Ai,"Trident")||Wr(Ai,"MSIE"),jg=Wr(Ai,"Edge"),$g=jg||ba,k_=Wr(Ai,"Gecko")&&!(Wr(Ai.toLowerCase(),"webkit")&&!Wr(Ai,"Edge"))&&!(Wr(Ai,"Trident")||Wr(Ai,"MSIE"))&&!Wr(Ai,"Edge"),sw=Wr(Ai.toLowerCase(),"webkit")&&!Wr(Ai,"Edge");function F_(){var n=wt.document;return n?n.documentMode:void 0}e:{var Hg="",Gg=(n=Ai,k_?/rv:([^\);]+)(\)|;)/.exec(n):jg?/Edge\/([\d\.]+)/.exec(n):ba?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sw?/WebKit\/(\S+)/.exec(n):P_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gg&&(Hg=Gg?Gg[1]:""),ba){var L_=F_();if(null!=L_&&L_>parseFloat(Hg)){rf=String(L_);break e}}rf=Hg}var Db={};var Cb=wt.document&&ba&&(F_()||parseInt(rf,10))||void 0,Tb=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{wt.addEventListener("test",Ia,e),wt.removeEventListener("test",Ia,e)}catch(t){}return n}();function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function sf(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(k_){e:{try{Bg(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ab[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&sf.Z.h.call(this)}}di.prototype.h=function(){this.defaultPrevented=!0},zr(sf,di);var Ab={2:"touch",3:"pen",4:"mouse"};sf.prototype.h=function(){sf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var of="closure_listenable_"+(1e6*Math.random()|0),Sb=0;function Mb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Sb,this.ca=this.fa=!1}function qg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function zg(n){this.src=n,this.g={},this.h=0}function U_(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=Fs(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(qg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function B_(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}zg.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=B_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Mb(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var j_="closure_lm_"+(1e6*Math.random()|0),Wg={};function $_(n,e,t,r,o){if(r&&r.once)return G_(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)$_(n,e[l],t,r,o);return null}return t=Ca(t),n&&n[of]?n.N(e,t,tf(r)?!!r.capture:!!r,o):H_(n,e,t,!1,r,o)}function H_(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var d=tf(o)?!!o.capture:!!o,m=Zg(n);if(m||(n[j_]=m=new zg(n)),(t=m.add(e,t,r,d,l)).proxy)return t;if(r=function aw(){var e=uw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Tb||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(z_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function G_(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)G_(n,e[l],t,r,o);return null}return t=Ca(t),n&&n[of]?n.O(e,t,tf(r)?!!r.capture:!!r,o):H_(n,e,t,!0,r,o)}function q_(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)q_(n,e[l],t,r,o);else r=tf(r)?!!r.capture:!!r,t=Ca(t),n&&n[of]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=B_(l=n.g[e],t,r,o))&&(qg(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Zg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=B_(e,t,r,o)),(t=-1<n?e[n]:null)&&Kg(t))}function Kg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[of])U_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(z_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Zg(e))?(U_(t,n),0==t.h&&(t.src=null,e[j_]=null)):qg(n)}}}function z_(n){return n in Wg?Wg[n]:Wg[n]="on"+n}function uw(n,e){if(n.ca)n=!0;else{e=new sf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Kg(n),n=t.call(r,e)}return n}function Zg(n){return(n=n[j_])instanceof zg?n:null}var Yg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ca(n){return"function"==typeof n?n:(n[Yg]||(n[Yg]=function(e){return n.handleEvent(e)}),n[Yg])}function xr(){Da.call(this),this.i=new zg(this),this.P=this,this.I=null}function Kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var o=e;rw(e=new di(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];o=Ta(d,r,!0,e)&&o}if(o=Ta(d=e.g=n,r,!0,e)&&o,o=Ta(d,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=Ta(d=e.g=t[l],r,!1,e)&&o}function Ta(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&U_(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}zr(xr,Da),xr.prototype[of]=!0,xr.prototype.removeEventListener=function(n,e,t,r){q_(this,n,e,t,r)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qg(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var lw=wt.JSON.stringify;function W_(){var n=af;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Z_,K_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new cw,n=>n.reset());class cw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jA(n){wt.setTimeout(()=>{throw n},0)}function ht(n,e){Z_||function xb(){var n=wt.Promise.resolve(void 0);Z_=function(){n.then(Rb)}}(),Y_||(Z_(),Y_=!0),af.add(n,e)}var Y_=!1,af=new class BA{constructor(){this.h=this.g=null}add(e,t){const r=K_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Rb(){for(var n;n=W_();){try{n.h.call(n.g)}catch(t){jA(t)}var e=K_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Y_=!1}function Fl(n,e){xr.call(this),this.h=n||1,this.g=e||wt,this.j=yr(this.kb,this),this.l=Date.now()}function Dd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Rn(n,e,t){if("function"==typeof n)t&&(n=yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:wt.setTimeout(n,e||0)}function Nb(n){n.g=Rn(()=>{n.g=null,n.i&&(n.i=!1,Nb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}zr(Fl,xr),(Xe=Fl.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Kr(this,"tick"),this.da&&(Dd(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){Fl.Z.M.call(this),Dd(this),delete this.g};class dw extends Da{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Nb(this)}M(){super.M(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uf(n){Da.call(this),this.h=n,this.g={}}zr(uf,Da);var hw=[];function Q_(n,e,t,r){Array.isArray(t)||(t&&(hw[0]=t.toString()),t=hw);for(var o=0;o<t.length;o++){var l=$_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function J_(n){Ug(n.g,function(e,t){this.g.hasOwnProperty(t)&&Kg(e)},n),n.g={}}function lf(){this.g=!0}function bd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cf(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<o.length;d++)o[d]=""}}}return lw(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}uf.prototype.M=function(){uf.Z.M.call(this),J_(this)},uf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lf.prototype.Aa=function(){this.g=!1},lf.prototype.info=function(){};var Ll={},pw=null;function Qg(){return pw=pw||new xr}function df(n){di.call(this,Ll.Ma,n)}function Cd(n){const e=Qg();Kr(e,new df(e,n))}function X_(n,e){di.call(this,Ll.STAT_EVENT,n),this.stat=e}function hi(n){const e=Qg();Kr(e,new X_(e,n))}function gw(n,e){di.call(this,Ll.Na,n),this.size=e}function Aa(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){n()},e)}Ll.Ma="serverreachability",zr(df,di),Ll.STAT_EVENT="statevent",zr(X_,di),Ll.Na="timingevent",zr(gw,di);var Au={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ev(){}function tv(){}ev.prototype.h=null;var Xg,Td={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jg(){di.call(this,"d")}function nv(){di.call(this,"c")}function em(){}function hf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new uf(this),this.P=$A,this.W=new Fl(n=$g?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kb}function kb(){this.i=null,this.g="",this.h=!1}zr(Jg,di),zr(nv,di),zr(em,ev),em.prototype.g=function(){return new XMLHttpRequest},em.prototype.i=function(){return{}},Xg=new em;var $A=45e3,_w={},rv={};function tm(n,e,t){n.K=1,n.v=mf(Ma(e)),n.s=t,n.U=!0,ff(n,null)}function ff(n,e){n.F=Date.now(),Sa(n),n.A=Ma(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),uv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new kb,n.g=Fw(n.l,t?e:null,!n.s),0<n.O&&(n.L=new dw(yr(n.Ia,n,n.g),n.O)),Q_(n.V,n.g,"readystatechange",n.gb),e=n.H?O_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Cd(1),function fw(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var d="",m=l.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var x=C[0];C=C[1];var N=x.split("_");d=2<=N.length&&"type"==N[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function vw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ew(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ww(n,t),o==rv){4==e&&(n.o=4,hi(14),r=!1),bd(n.j,n.m,null,"[Incomplete Response]");break}if(o==_w){n.o=4,hi(15),bd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bd(n.j,n.m,o,null),iv(n,o)}vw(n)&&o!=rv&&o!=_w&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,hi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),kw(e),e.L=!0,hi(11))):(bd(n.j,n.m,t,"[Invalid Chunked Response]"),Vl(n),pf(n))}function ww(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?rv:(t=Number(e.substring(t,r)),isNaN(t)?_w:(r+=1)+t>e.length?rv:(e=e.substr(r,t),n.C=r+t,e))}function Sa(n){n.Y=Date.now()+n.P,Iw(n,n.P)}function Iw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Aa(yr(n.eb,n),e)}function nm(n){n.B&&(wt.clearTimeout(n.B),n.B=null)}function pf(n){0==n.l.G||n.I||Yb(n.l,n)}function Vl(n){nm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Dd(n.W),J_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function iv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||vf(t.i,n)))if(t.I=n.N,!n.J&&vf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Aa(yr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;fm(t),dm(t)}Ru(t),hi(18)}if(1>=Sw(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Md(t,11)}else if((n.J||t.g==n)&&fm(t),!Vg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.K=r=1.5*G,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const ce=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var l=r.i;!l.g&&(Wr(ce,"spdy")||Wr(ce,"quic")||Wr(ce,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Ef(l,l.h),l.h=null))}if(r.D){const Fe=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,bn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=pm(r,r.H?r.la:null,r.W),d.J){cv(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(nm(m),Sa(m)),r.g=d}else yv(r);0<t.l.length&&hm(t)}else"stop"!=C[0]&&"close"!=C[0]||Md(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Md(t,7):cm(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Cd(4)}catch(C){}}function sv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(S_(n)||"string"==typeof n)x_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(S_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Dw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(S_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Ad(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ad)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Su(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ul(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ul(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ul(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=hf.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==Uo(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const x=Uo(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||$g||this.g&&(this.h.h||this.g.ga()||um(this.g)))){this.I||4!=x||7==e||Cd(8==e||0>=N?3:2),nm(this);var t=this.g.ba();this.N=t;t:if(vw(this)){var r=um(this.g);n="";var o=r.length,l=4==Uo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vl(this),pf(this);var d="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Ob(n,e,t,r,o,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,hi(12),Vl(this),pf(this);break e}bd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iv(this,t)}this.U?(Ew(this,x,d),$g&&this.i&&3==x&&(Q_(this.V,this.W,"tick",this.fb),this.W.start())):(bd(this.j,this.m,d,null),iv(this,d)),4==x&&Vl(this),this.i&&!this.I&&(4==x?Yb(this.l,this):(this.i=!1,Sa(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),Vl(this),pf(this)}}}catch(x){}},Xe.fb=function(){if(this.g){var n=Uo(this.g),e=this.g.ga();this.C<e.length&&(nm(this),Ew(this,n,e),this.i&&4!=n&&Sa(this))}},Xe.cancel=function(){this.I=!0,Vl(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Pb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Cd(3),hi(17)),Vl(this),this.o=2,pf(this)):Iw(this,this.Y-n)},(Xe=Ad.prototype).R=function(){Su(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return Su(this),this.g.concat()},Xe.get=function(n,e){return Ul(this.h,n)?this.h[n]:e},Xe.set=function(n,e){Ul(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var ov=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Mu){this.g=void 0!==e?e:n.g,gf(this,n.j),this.s=n.s,rm(this,n.i),Sd(this,n.m),this.l=n.l,e=n.h;var t=new _f;t.i=e.i,e.g&&(t.g=new Ad(e.g),t.h=e.h),bw(this,t),this.o=n.o}else n&&(t=String(n).match(ov))?(this.g=!!e,gf(this,t[1]||"",!0),this.s=yf(t[2]||""),rm(this,t[3]||"",!0),Sd(this,t[4]),this.l=yf(t[5]||"",!0),bw(this,t[6]||"",!0),this.o=yf(t[7]||"")):(this.g=!!e,this.h=new _f(null,this.g))}function Ma(n){return new Mu(n)}function gf(n,e,t){n.j=t?yf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function rm(n,e,t){n.i=t?yf(e,!0):e}function Sd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function bw(n,e,t){e instanceof _f?(n.h=e,function Gb(n,e){e&&!n.j&&(xu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Cw(this,r),uv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Bl(e,$b)),n.h=new _f(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function mf(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ub),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ub(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Bl(e,av,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Bl(e,av,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Bl(t,"/"==t.charAt(0)?jb:Bb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Bl(t,Hb)),n.join("")};var av=/[#\/\?@]/g,Bb=/[#\?:]/g,jb=/[#\?]/g,$b=/[#\?@]/g,Hb=/#/g;function _f(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xu(n){n.g||(n.g=new Ad,n.h=0,n.i&&function Fb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Cw(n,e){xu(n),e=jl(n,e),Ul(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ul((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Su(n)))}function Tw(n,e){return xu(n),e=jl(n,e),Ul(n.g.h,e)}function uv(n,e,t){Cw(n,e),0<t.length&&(n.i=null,n.g.set(jl(n,e),R_(t)),n.h+=t.length)}function jl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function lv(n){this.l=n||zb,n=wt.PerformanceNavigationTiming?0<(n=wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(wt.g&&wt.g.Ea&&wt.g.Ea()&&wt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=_f.prototype).add=function(n,e){xu(this),this.i=null,n=jl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){xu(this),this.g.forEach(function(t,r){x_(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){xu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},Xe.R=function(n){xu(this);var e=[];if("string"==typeof n)Tw(this,n)&&(e=ew(e,this.g.get(jl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ew(e,n[t])}return e},Xe.set=function(n,e){return xu(this),this.i=null,Tw(this,n=jl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=o;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var zb=10;function Aw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Sw(n){return n.h?1:n.g?n.g.size:0}function vf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ef(n,e){n.g?n.g.add(e):n.h=e}function cv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function im(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return R_(n.i)}function dv(){}function Wb(){this.g=new dv}function hv(n,e,t){const r=t||"";try{sv(n,function(o,l){let d=o;tf(o)&&(d=lw(o)),e.push(r+l+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function wf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function If(n){this.l=n.$b||null,this.j=n.ib||!1}function Df(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=fv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lv.prototype.cancel=function(){if(this.i=im(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},dv.prototype.stringify=function(n){return wt.JSON.stringify(n,void 0)},dv.prototype.parse=function(n){return wt.JSON.parse(n,void 0)},zr(If,ev),If.prototype.g=function(){return new Df(this.l,this.j)},If.prototype.i=function(n){return function(){return n}}({}),zr(Df,xr);var fv=0;function pv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function sm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bf(n)}function bf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Df.prototype).open=function(n,e){if(this.readyState!=fv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bf(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||wt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sm(this)),this.readyState=fv},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bf(this)),this.g&&(this.readyState=3,bf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sm(this):bf(this),3==this.readyState&&pv(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,sm(this))},Xe.Ta=function(n){this.g&&(this.response=n,sm(this))},Xe.ha=function(){this.g&&sm(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Df.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var om=wt.JSON.parse;function ir(n){xr.call(this),this.headers=new Ad,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$l,this.K=this.L=!1}zr(ir,xr);var $l="",Cf=/^https?$/i,Zb=["POST","PUT"];function Mw(n){return"content-type"==n.toLowerCase()}function xw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Rw(n),am(n)}function Rw(n){n.D||(n.D=!0,Kr(n,"complete"),Kr(n,"error"))}function Nw(n){if(n.h&&void 0!==Lg&&(!n.C[1]||4!=Uo(n)||2!=n.ba()))if(n.v&&4==Uo(n))Rn(n.Fa,0,n);else if(Kr(n,"readystatechange"),4==Uo(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(ov)[1]||null;if(!o&&wt.self&&wt.self.location){var l=wt.self.location.protocol;o=l.substr(0,l.length-1)}r=!Cf.test(o?o.toLowerCase():"")}t=r}if(t)Kr(n,"complete"),Kr(n,"success");else{n.m=6;try{var d=2<Uo(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",Rw(n)}}finally{am(n)}}}function am(n,e){if(n.g){gv(n);const t=n.g,r=n.C[0]?Ia:null;n.g=null,n.C=null,e||Kr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function gv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(wt.clearTimeout(n.A),n.A=null)}function Uo(n){return n.g?n.g.readyState:0}function um(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case $l:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hl(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function lm(n){let e="";return Ug(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function Tf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mv(n){this.za=0,this.l=[],this.h=new lf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Tf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Tf("baseRetryDelayMs",5e3,n),this.$a=Tf("retryDelaySeedMs",1e4,n),this.Ya=Tf("forwardChannelMaxRetries",2,n),this.ra=Tf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new lv(n&&n.concurrentRequestLimit),this.Ca=new Wb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function cm(n){if(Ow(n),3==n.G){var e=n.V++,t=Ma(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),Sf(n,t),(e=new hf(n,n.h,e,void 0)).K=2,e.v=mf(Ma(t)),t=!1,wt.navigator&&wt.navigator.sendBeacon&&(t=wt.navigator.sendBeacon(e.v.toString(),"")),!t&&wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Fw(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Sa(e)}Ev(n)}function dm(n){n.g&&(kw(n),n.g.cancel(),n.g=null)}function Ow(n){dm(n),n.u&&(wt.clearTimeout(n.u),n.u=null),fm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&wt.clearTimeout(n.m),n.m=null)}function Af(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&hm(n)}function hm(n){Aw(n.i)||n.m||(n.m=!0,ht(n.Ha,n),n.C=0)}function Pw(n,e){var t;t=e?e.m:n.V++;const r=Ma(n.F);bn(r,"SID",n.J),bn(r,"RID",t),bn(r,"AID",n.U),Sf(n,r),n.o&&n.s&&Hl(r,n.o,n.s),t=new hf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Gl(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ef(n.i,t),tm(t,r,e)}function Sf(n,e){n.j&&sv({},function(t,r){bn(e,r,t)})}function Gl(n,e,t){t=Math.min(n.l.length,t);var r=n.j?yr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=o[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const x=o[w].g;if(C-=l,0>C)l=Math.max(0,o[w].h-100),m=!1;else try{hv(x,d,"req"+C+"_")}catch(N){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function yv(n){n.g||n.u||(n.Y=1,ht(n.Ga,n),n.A=0)}function Ru(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Aa(yr(n.Ga,n),vv(n,n.A)),n.A++,0))}function kw(n){null!=n.B&&(wt.clearTimeout(n.B),n.B=null)}function _v(n){n.g=new hf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ma(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),Sf(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&Hl(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=mf(Ma(e)),t.s=null,t.U=!0,ff(t,n)}function fm(n){null!=n.v&&(wt.clearTimeout(n.v),n.v=null)}function Yb(n,e){var t=null;if(n.g==e){fm(n),kw(n),n.g=null;var r=2}else{if(!vf(n.i,e))return;t=e.D,cv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Kr(r=Qg(),new gw(r,t,e,o)),hm(n)}else yv(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function GA(n,e){return!(Sw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Aa(yr(n.Ha,n,e),vv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ru(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Md(n,5);break;case 4:Md(n,10);break;case 3:Md(n,6);break;default:Md(n,2)}}function vv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Md(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=yr(n.jb,n);t||(t=new Mu("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||gf(t,"https"),mf(t)),function Kb(n,e){const t=new lf;if(wt.Image){const r=new Image;r.onload=os(wf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=os(wf,t,r,"TestLoadImage: error",!1,e),r.onabort=os(wf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=os(wf,t,r,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else hi(2);n.G=0,n.j&&n.j.va(e),Ev(n),Ow(n)}function Ev(n){n.G=0,n.I=-1,n.j&&((0!=im(n.i).length||0!=n.l.length)&&(n.i.i.length=0,R_(n.l),n.l.length=0),n.j.ua())}function pm(n,e,t){let r=function Lb(n){return n instanceof Mu?Ma(n):new Mu(n,void 0)}(t);if(""!=r.i)e&&rm(r,e+"."+r.i),Sd(r,r.m);else{const o=wt.location;r=function Vb(n,e,t,r){var o=new Mu(null,void 0);return n&&gf(o,n),e&&rm(o,e),t&&Sd(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Ug(n.aa,function(o,l){bn(r,l,o)}),t=n.sa,(e=n.D)&&t&&bn(r,e,t),bn(r,"VER",n.ma),Sf(n,r),r}function Fw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Ba&&!n.qa?new If({ib:!0}):n.qa)).L=n.H,e}function Lw(){}function gm(){if(ba&&!(10<=Number(Cb)))throw Error("Environmental error: no available transport.")}function as(n,e){xr.call(this),this.g=new mv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Vg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new xd(this)}function Vw(n){Jg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Uw(){nv.call(this),this.status=1}function xd(n){this.g=n}(Xe=ir.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xg.g(),this.C=function yw(n){return n.h||(n.h=n.i())}(this.u?this.u:Xg),this.g.onreadystatechange=yr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void xw(this,l)}n=t||"";const o=new Ad(this.headers);r&&sv(r,function(l,d){o.set(d,l)}),r=function XE(n){e:{var e=Mw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=wt.FormData&&n instanceof wt.FormData,!(0<=Fs(Zb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gv(this),0<this.B&&((this.K=function HA(n){return ba&&function bb(){return function iw(n){var e=Db;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=tw(String(rf)).split("."),t=tw("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",l=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=kl(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||kl(0==o[2].length,0==l[2].length)||kl(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yr(this.pa,this)):this.A=Rn(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){xw(this,l)}},Xe.pa=function(){void 0!==Lg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kr(this,"complete"),Kr(this,"abort"),am(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),am(this,!0)),ir.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?Nw(this):this.cb())},Xe.cb=function(){Nw(this)},Xe.ba=function(){try{return 2<Uo(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),om(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=mv.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new hf(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=O_(l),rw(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Gl(this,o,e),bn(t=Ma(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),Sf(this,t),this.o&&l&&Hl(t,this.o,l),Ef(this.i,o),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),o.$=!0,tm(o,t,null)):tm(o,t,e),this.G=2}}else 3==this.G&&(n?Pw(this,n):0==this.l.length||Aw(this.i)||Pw(this))},Xe.Ga=function(){if(this.u=null,_v(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Aa(yr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,hi(10),dm(this),_v(this))},Xe.ab=function(){null!=this.v&&(this.v=null,dm(this),Ru(this),hi(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),hi(2)):(this.h.info("Failed to ping google.com"),hi(1))},(Xe=Lw.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},gm.prototype.g=function(n,e){return new as(n,e)},zr(as,xr),as.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ht(yr(n.hb,n,e))),hi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=pm(n,null,n.W),hm(n)},as.prototype.close=function(){cm(this.g)},as.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Af(this.g,e)}else this.v?((e={}).__data__=lw(n),Af(this.g,e)):Af(this.g,n)},as.prototype.M=function(){this.g.j=null,delete this.j,cm(this.g),delete this.g,as.Z.M.call(this)},zr(Vw,Jg),zr(Uw,nv),zr(xd,Lw),xd.prototype.xa=function(){Kr(this.g,"a")},xd.prototype.wa=function(n){Kr(this.g,new Vw(n))},xd.prototype.va=function(n){Kr(this.g,new Uw(n))},xd.prototype.ua=function(){Kr(this.g,"b")},gm.prototype.createWebChannel=gm.prototype.g,as.prototype.send=as.prototype.u,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,Au.NO_ERROR=0,Au.TIMEOUT=8,Au.HTTP_ERROR=6,mw.COMPLETE="complete",tv.EventType=Td,Td.OPEN="a",Td.CLOSE="b",Td.ERROR="c",Td.MESSAGE="d",xr.prototype.listen=xr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.La,ir.prototype.getLastErrorCode=ir.prototype.Da,ir.prototype.getStatus=ir.prototype.ba,ir.prototype.getResponseJson=ir.prototype.Qa,ir.prototype.getResponseText=ir.prototype.ga,ir.prototype.send=ir.prototype.ea;var Qb=Lo.createWebChannelTransport=function(){return new gm},Jb=Lo.getStatEventTarget=function(){return Qg()},wv=Lo.ErrorCode=Au,Mf=Lo.EventType=mw,Bw=Lo.Event=Ll,Iv=Lo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jw=Lo.FetchXmlHttpFactory=If,xf=Lo.WebChannel=tv,$w=Lo.XhrIo=ir;const Hw="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let Rd="9.6.11";const Nu=new Du.Yd("@firebase/firestore");function Dv(){return Nu.logLevel}function Re(n,...e){if(Nu.logLevel<=Du.in.DEBUG){const t=e.map(Nf);Nu.debug(`Firestore (${Rd}): ${n}`,...t)}}function Nn(n,...e){if(Nu.logLevel<=Du.in.ERROR){const t=e.map(Nf);Nu.error(`Firestore (${Rd}): ${n}`,...t)}}function Rf(n,...e){if(Nu.logLevel<=Du.in.WARN){const t=e.map(Nf);Nu.warn(`Firestore (${Rd}): ${n}`,...t)}}function Nf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ze(n="Unexpected state"){const e=`FIRESTORE (${Rd}) INTERNAL ASSERTION FAILED: `+n;throw Nn(e),new Error(e)}function Et(n,e){n||ze()}function $e(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends jt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Of{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class eC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tC{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Rr,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},w=C=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Rr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new Of(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Zr(e)}}class Gw{constructor(e,t,r){this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class qw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Gw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ym{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zw{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?o(l):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.p=t.token,new ym(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function zA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}us.A=-1;class _m{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=zA(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function ql(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function vm(n){return n+"\0"}class Fn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Fn(0,0))}static max(){return new yt(new Fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ww(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nd{constructor(e,t,r){void 0===t?t=0:t>e.length&&ze(),void 0===r?r=e.length-t:r>e.length-t&&ze(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Nd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends Nd{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const Zw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends Nd{construct(e,t,r){return new Nr(e,t,r)}static isValidIdentifier(e){return Zw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Ae(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(l(),o++)}if(l(),d)throw new Ae(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(t)}static emptyPath(){return new Nr([])}}class Wl{constructor(e){this.fields=e,e.sort(Nr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const Qw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(n){if(Et(!!n),"string"==typeof n){let e=0;const t=Qw.exec(n);if(Et(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ou(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Cv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fi(n){const e=n.mapValue.fields.__previous_value__;return Cv(e)?fi(e):e}function Bo(n){const e=xa(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}class nC{constructor(e,t,r,o,l,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Ra{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ra("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}function Od(n){return null==n}function Na(n){return 0===n&&1/n==-1/0}function Jw(n){return"number"==typeof n&&Number.isInteger(n)&&!Na(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(zt.fromString(e))}static fromName(e){return new Ve(zt.fromString(e).popFirst(5))}static empty(){return new Ve(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new zt(e.slice()))}}const Xw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tv={nullValue:"NULL_VALUE"};function Kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cv(n)?4:wm(n)?9:10:ze()}function jo(n,e){if(n===e)return!0;const t=Kl(n);if(t!==Kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bo(n).isEqual(Bo(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=xa(r.timestampValue),d=xa(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ou(n.bytesValue).isEqual(Ou(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Hn(r.geoPointValue.latitude)===Hn(o.geoPointValue.latitude)&&Hn(r.geoPointValue.longitude)===Hn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Hn(r.integerValue)===Hn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Hn(r.doubleValue),d=Hn(o.doubleValue);return l===d?Na(l)===Na(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return ql(n.arrayValue.values||[],e.arrayValue.values||[],jo);case 10:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Ww(l)!==Ww(d))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===d[m]||!jo(l[m],d[m])))return!1;return!0}(n,e);default:return ze()}var o}function Zl(n,e){return void 0!==(n.values||[]).find(t=>jo(t,e))}function Oa(n,e){if(n===e)return 0;const t=Kl(n),r=Kl(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(o,l){const d=Hn(o.integerValue||o.doubleValue),m=Hn(l.integerValue||l.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Av(n.timestampValue,e.timestampValue);case 4:return Av(Bo(n),Bo(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(o,l){const d=Ou(o),m=Ou(l);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),m=l.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Tt(d[w],m[w]);if(0!==C)return C}return Tt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const d=Tt(Hn(o.latitude),Hn(l.latitude));return 0!==d?d:Tt(Hn(o.longitude),Hn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const d=o.values||[],m=l.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=Oa(d[w],m[w]);if(C)return C}return Tt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const d=o.fields||{},m=Object.keys(d),w=l.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const N=Tt(m[x],C[x]);if(0!==N)return N;const G=Oa(d[m[x]],w[C[x]]);if(0!==G)return G}return Tt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw ze()}}function Av(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=xa(n),r=xa(e),o=Tt(t.seconds,r.seconds);return 0!==o?o:Tt(t.nanos,r.nanos)}function Pa(n){return Pf(n)}function Pf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=xa(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ou(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const d of r.values||[])l?l=!1:o+=",",o+=Pf(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const m of o)d?d=!1:l+=",",l+=`${m}:${Pf(r.fields[m])}`;return l+"}"}(n.mapValue):ze();var e}function Pd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Em(n){return!!n&&"integerValue"in n}function kf(n){return!!n&&"arrayValue"in n}function Sv(n){return!!n&&"nullValue"in n}function Ff(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lf(n){return!!n&&"mapValue"in n}function Vf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mv(n){return"nullValue"in n?Tv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pd(Ra.empty(),Ve.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ze()}function WA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pd(Ra.empty(),Ve.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xw:ze()}function eI(n,e){return void 0===n?e:void 0===e||Oa(n,e)>0?n:e}function tI(n,e){return void 0===n?e:void 0===e||Oa(n,e)<0?n:e}class Yr{constructor(e){this.value=e}static empty(){return new Yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vf(t)}setAll(e){let t=Nr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Vf(d):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Lf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){zl(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Yr(Vf(this.value))}}function xv(n){const e=[];return zl(n.fields,(t,r)=>{const o=new Nr([t]);if(Lf(r)){const l=xv(r.mapValue).fields;if(0===l.length)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new Wl(e)}class Cn{constructor(e,t,r,o,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Cn(e,0,yt.min(),yt.min(),Yr.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,yt.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,yt.min(),Yr.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,yt.min(),Yr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Uf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Im(n){return n.fields.find(e=>2===e.kind)}function Yl(n){return n.fields.filter(e=>2!==e.kind)}Uf.UNKNOWN_ID=-1;class Dm{constructor(e,t){this.fieldPath=e,this.kind=t}}class kd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kd(0,$o.min())}}function nI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=yt.fromTimestamp(1e9===r?new Fn(t+1,0):new Fn(t,r));return new $o(o,Ve.empty(),e)}function rI(n){return new $o(n.readTime,n.key,-1)}class $o{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $o(yt.min(),Ve.empty(),-1)}static max(){return new $o(yt.max(),Ve.empty(),-1)}}function iI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}class sI{constructor(e,t=null,r=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.P=null}}function oI(n,e=null,t=[],r=[],o=null,l=null,d=null){return new sI(n,e,t,r,o,l,d)}function Ql(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Pa(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pa(r)).join(",")),e.P=t}return e.P}function Fd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Pv(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!jo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lI(n.startAt,e.startAt)&&lI(n.endAt,e.endAt)}function Rv(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Nv(n,e){return n.filters.filter(t=>t instanceof pi&&t.field.isEqual(e))}function rC(n,e,t){let r,o=!0;for(const l of Nv(n,e)){let d,m=!0;switch(l.op){case"<":case"<=":d=Mv(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,m=!1;break;case"!=":case"not-in":d=Tv}eI(r,d)===d&&(r=d,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];eI(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function iC(n,e,t){let r,o=!0;for(const l of Nv(n,e)){let d,m=!0;switch(l.op){case">=":case">":d=WA(l.value),m=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,m=!1;break;case"!=":case"not-in":d=Xw}tI(r,d)===d&&(r=d,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];tI(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class pi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new ZA(e,t,r):"array-contains"===t?new JA(e,r):"in"===t?new aI(e,r):"not-in"===t?new Ov(e,r):"array-contains-any"===t?new uI(e,r):new pi(e,t,r)}static V(e,t,r){return"in"===t?new YA(e,r):new QA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Oa(t,this.value)):null!==t&&Kl(this.value)===Kl(t)&&this.v(Oa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ze()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ZA extends pi{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.v(t)}}class YA extends pi{constructor(e,t){super(e,"in",t),this.keys=Bf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QA extends pi{constructor(e,t){super(e,"not-in",t),this.keys=Bf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bf(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class JA extends pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kf(t)&&Zl(t.arrayValue,this.value)}}class aI extends pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zl(this.value.arrayValue,t)}}class Ov extends pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zl(this.value.arrayValue,t)}}class uI extends pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zl(this.value.arrayValue,r))}}class ka{constructor(e,t){this.position=e,this.inclusive=t}}class jf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function kv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(r=l.field.isKeyField()?Ve.comparator(Ve.fromName(d.referenceValue),t.key):Oa(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function lI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jo(n.position[t],e.position[t]))return!1;return!0}class Ho{constructor(e,t=null,r=[],o=[],l=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function sC(n,e,t,r,o,l,d,m){return new Ho(n,e,t,r,o,l,d,m)}function Ld(n){return new Ho(n)}function bm(n){return!Od(n.limit)&&"F"===n.limitType}function Vd(n){return!Od(n.limit)&&"L"===n.limitType}function Fv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cI(n){for(const e of n.filters)if(e.S())return e.field;return null}function dI(n){return null!==n.collectionGroup}function $f(n){const e=$e(n);if(null===e.D){e.D=[];const t=cI(e),r=Fv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new jf(t)),e.D.push(new jf(Nr.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new jf(Nr.keyField(),l))}}}return e.D}function Ls(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=oI(e.path,e.collectionGroup,$f(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of $f(e))t.push(new jf(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new ka(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new ka(e.startAt.position,!e.startAt.inclusive):null;e.C=oI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function hI(n,e,t){return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hf(n,e){return Fd(Ls(n),Ls(e))&&n.limitType===e.limitType}function oC(n){return`${Ql(Ls(n))}|lt:${n.limitType}`}function Lv(n){return`Query(target=${function KA(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Pa(r.value)}`;var r}).join(", ")}]`),Od(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Pa(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Pa(t)).join(",")),`Target(${e})`}(Ls(n))}; limitType=${n.limitType})`}function Gf(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ve.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,d){const m=kv(o,l,d);return o.inclusive?m<=0:m<0}(t.startAt,$f(t),r)||t.endAt&&!function(o,l,d){const m=kv(o,l,d);return o.inclusive?m>=0:m>0}(t.endAt,$f(t),r)));var t,r}function fI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vs(n){return(e,t)=>{let r=!1;for(const o of $f(n)){const l=aC(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function aC(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(o,l,d){const m=l.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Oa(m,w):ze()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ze()}}function Cm(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Na(e)?"-0":e}}function pI(n){return{integerValue:""+n}}function gI(n,e){return Jw(e)?pI(e):Cm(n,e)}class Ud{constructor(){this._=void 0}}function mI(n,e,t){return n instanceof Jl?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Xl?vI(n,e):n instanceof ec?Tm(n,e):function(r,o){const l=_I(r,o),d=Vv(l)+Vv(r.k);return Em(l)&&Em(r.k)?pI(d):Cm(r.M,d)}(n,e)}function yI(n,e,t){return n instanceof Xl?vI(n,e):n instanceof ec?Tm(n,e):t}function _I(n,e){return n instanceof Us?Em(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jl extends Ud{}class Xl extends Ud{constructor(e){super(),this.elements=e}}function vI(n,e){const t=Uv(e);for(const r of n.elements)t.some(o=>jo(o,r))||t.push(r);return{arrayValue:{values:t}}}class ec extends Ud{constructor(e){super(),this.elements=e}}function Tm(n,e){let t=Uv(e);for(const r of n.elements)t=t.filter(o=>!jo(o,r));return{arrayValue:{values:t}}}class Us extends Ud{constructor(e,t){super(),this.M=e,this.k=t}}function Vv(n){return Hn(n.integerValue||n.doubleValue)}function Uv(n){return kf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qf{constructor(e,t){this.field=e,this.transform=t}}class uC{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class zf{}function lC(n,e,t){n instanceof Wf?function(r,o,l){const d=r.value.clone(),m=Mm(r.fieldTransforms,o,l.transformResults);d.setAll(m),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof tc?function(r,o,l){if(!Am(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=Mm(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll($v(r)),m.setAll(d),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bv(n,e,t){var o;n instanceof Wf?function(r,o,l){if(!Am(r.precondition,o))return;const d=r.value.clone(),m=xm(r.fieldTransforms,l,o);d.setAll(m),o.convertToFoundDocument(jv(o),d).setHasLocalMutations()}(n,e,t):n instanceof tc?function(r,o,l){if(!Am(r.precondition,o))return;const d=xm(r.fieldTransforms,l,o),m=o.data;m.setAll($v(r)),m.setAll(d),o.convertToFoundDocument(jv(o),m).setHasLocalMutations()}(n,e,t):Am(n.precondition,o=e)&&o.convertToNoDocument(yt.min())}function eS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=_I(r.transform,o||null);null!=l&&(null==t&&(t=Yr.empty()),t.set(r.field,l))}return t||null}function Sm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ql(t,r,(o,l)=>function XA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xl&&r instanceof Xl||t instanceof ec&&r instanceof ec?ql(t.elements,r.elements,jo):t instanceof Us&&r instanceof Us?jo(t.k,r.k):t instanceof Jl&&r instanceof Jl);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function jv(n){return n.isFoundDocument()?n.version:yt.min()}class Wf extends zf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class tc extends zf{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function $v(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Mm(n,e,t){const r=new Map;Et(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);r.set(l.field,yI(d,m,t[o]))}return r}function xm(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,mI(l,d,e))}return r}class Bd extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Hv extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class EI{constructor(e){this.count=e}}var Yn,Jt;function wI(n){switch(n){default:return ze();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function cC(n){if(void 0===n)return Nn("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Yn.OK:return oe.OK;case Yn.CANCELLED:return oe.CANCELLED;case Yn.UNKNOWN:return oe.UNKNOWN;case Yn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Yn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Yn.INTERNAL:return oe.INTERNAL;case Yn.UNAVAILABLE:return oe.UNAVAILABLE;case Yn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Yn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Yn.NOT_FOUND:return oe.NOT_FOUND;case Yn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Yn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Yn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Yn.ABORTED:return oe.ABORTED;case Yn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Yn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Yn.DATA_LOSS:return oe.DATA_LOSS;default:return ze()}}(Jt=Yn||(Yn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zl(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}class Gn{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rm(this.root,e,this.comparator,!0)}}class Rm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:Qr.RED,this.left=null!=o?o:Qr.EMPTY,this.right=null!=l?l:Qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Qr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Qr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ze();const e=this.left.check();if(e!==this.right.check())throw ze();return e+(this.isRed()?0:1)}}Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1,Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw ze()}get value(){throw ze()}get color(){throw ze()}get left(){throw ze()}get right(){throw ze()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tn{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dC(this.data.getIterator())}getIteratorFrom(e){return new dC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class dC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kf(n){return n.hasNext()?n.getNext():void 0}const tS=new Gn(Ve.comparator);function fo(){return tS}const nS=new Gn(Ve.comparator);function Gv(){return nS}function Pu(){return new nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const hC=new Gn(Ve.comparator),fC=new Tn(Ve.comparator);function an(...n){let e=fC;for(const t of n)e=e.add(t);return e}const rc=new Tn(Tt);function Zf(){return rc}class ic{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,sc.createSynthesizedTargetChangeForCurrentChange(e,t)),new ic(yt.min(),r,Zf(),fo(),an())}}class sc{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new sc(_r.EMPTY_BYTE_STRING,t,an(),an(),an())}}class Nm{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Om{constructor(e,t){this.targetId=e,this.$=t}}class Pm{constructor(e,t,r=_r.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Yf{constructor(){this.B=0,this.L=gC(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=an(),t=an(),r=an();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ze()}}),new sc(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=gC()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class rS{constructor(e){this.nt=e,this.st=new Map,this.it=fo(),this.rt=pC(),this.ot=new Tn(Tt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ze()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const l=o.target;if(Rv(l))if(0===r){const d=new Ve(l.path);this.ct(t,d,Cn.newNoDocument(d,yt.min()))}else Et(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,d)=>{const m=this.wt(d);if(m){if(l.current&&Rv(m.target)){const w=new Ve(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,Cn.newNoDocument(w,e))}l.j&&(t.set(d,l.H()),l.J())}});let r=an();this.rt.forEach((l,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(e));const o=new ic(e,t,this.ot,this.it,r);return this.it=fo(),this.rt=pC(),this.ot=new Tn(Tt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Yf,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Tn(Tt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Yf),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function pC(){return new Gn(Ve.comparator)}function gC(){return new Gn(Ve.comparator)}const iS={asc:"ASCENDING",desc:"DESCENDING"},II={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class mC{constructor(e,t){this.databaseId=e,this.N=t}}function Qf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DI(n,e){return n.N?e.toBase64():e.toUint8Array()}function yC(n,e){return Qf(n,e.toTimestamp())}function vr(n){return Et(!!n),yt.fromTimestamp(function(e){const t=xa(e);return new Fn(t.seconds,t.nanos)}(n))}function km(n,e){return(t=n,new zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qv(n){const e=zt.fromString(n);return Et(a(e)),e}function Jf(n,e){return km(n.databaseId,e.path)}function Go(n,e){const t=qv(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(zv(t))}function Fm(n,e){return km(n.databaseId,e)}function Lm(n){const e=qv(n);return 4===e.length?zt.emptyPath():zv(e)}function Vm(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zv(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Um(n,e,t){return{name:Jf(n,e),fields:t.value.mapValue.fields}}function bI(n,e,t){const r=Go(n,e.name),o=vr(e.updateTime),l=new Yr({mapValue:{fields:e.fields}}),d=Cn.newFoundDocument(r,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Bm(n,e){let t;if(e instanceof Wf)t={update:Um(n,e.key,e.value)};else if(e instanceof Bd)t={delete:Jf(n,e.key)};else if(e instanceof tc)t={update:Um(n,e.key,e.data),updateMask:s(e.fieldMask)};else{if(!(e instanceof Hv))return ze();t={verify:Jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const d=l.transform;if(d instanceof Jl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Xl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ec)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Us)return{fieldPath:l.field.canonicalString(),increment:d.k};throw ze()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:yC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ze()),t;var o}function Wv(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?sr.updateTime(vr(o.updateTime)):void 0!==o.exists?sr.exists(o.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,d){let m=null;"setToServerValue"in d?(Et("REQUEST_TIME"===d.setToServerValue),m=new Jl):"appendMissingElements"in d?m=new Xl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ec(d.removeAllFromArray.values||[]):"increment"in d?m=new Us(l,d.increment):ze();const w=Nr.fromServerFormat(d.fieldPath);return new qf(w,m)}(n,o)):[];var o;if(e.update){const o=Go(n,e.update.name),l=new Yr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Wl((e.updateMask.fieldPaths||[]).map(C=>Nr.fromServerFormat(C)));return new tc(o,l,d,t,r)}return new Wf(o,l,t,r)}if(e.delete){const o=Go(n,e.delete);return new Bd(o,t)}if(e.verify){const o=Go(n,e.verify);return new Hv(o,t)}return ze()}function EC(n,e){return{documents:[Fm(n,e.path)]}}function wC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Fm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Fm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(x=>function(N){if("=="===N.op){if(Ff(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NAN"}};if(Sv(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Ff(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NOT_NAN"}};if(Sv(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xf(N.field),op:aS(N.op),value:N.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(w){if(0!==w.length)return w.map(C=>{return{field:Xf((x=C).field),direction:bC(x.dir)};var x})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(C=e.limit,n.N||Od(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function IC(n){let e=Lm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Et(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=DC(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new jf(ep((N=x).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,Od(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new ka((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new ka(x.values||[],!x.before)}(t.endAt)),sC(e,o,d,l,m,"F",w,C)}function DC(n){return n?void 0!==n.unaryFilter?[i(n)]:void 0!==n.fieldFilter?[uS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>DC(e)).reduce((e,t)=>e.concat(t)):ze():[]}function bC(n){return iS[n]}function aS(n){return II[n]}function Xf(n){return{fieldPath:n.canonicalString()}}function ep(n){return Nr.fromServerFormat(n.fieldPath)}function uS(n){return pi.create(ep(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ze()}}(n.fieldFilter.op),n.fieldFilter.value)}function i(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ep(n.unaryFilter.field);return pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ep(n.unaryFilter.field);return pi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ep(n.unaryFilter.field);return pi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ep(n.unaryFilter.field);return pi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ze()}}function s(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function a(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function u(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=f(e)),e=c(n.get(t),e);return f(e)}function c(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function f(n){return n+"\x01\x01"}function _(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&ze(),n.charAt(d+1)){case"\x01":const m=n.substring(l,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(l,d),o+="\0";break;case"\x11":o+=n.substring(l,d+1);break;default:ze()}l=d+2}return new zt(r)}const E=["userId","batchId"];function I(n,e){return[n,u(e)]}function A(n,e,t){return[n,u(e),t]}const S={},k=["prefixPath","collectionGroup","readTime","documentId"],V=["prefixPath","collectionGroup","documentId"],z=["collectionGroup","readTime","prefixPath","documentId"],ge=["canonicalId","targetId"],Ne=["targetId","path"],Be=["path","targetId"],et=["collectionId","parent"],Ie=["indexId","uid"],dt=["uid","sequenceNumber"],Ht=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cn=["indexId","uid","orderedDocumentKey"],ls=["userId","collectionPath","documentId"],oc=["userId","collectionPath","largestBatchId"],Kv=["userId","collectionGroup","largestBatchId"],jm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zv=[...jm,"documentOverlays"],$m=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yv=[...$m,"indexConfiguration","indexState","indexEntries"],Hm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let o=0,l=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++l,d&&l===o&&t()},w=>r(w))}),d=!0,l===o&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(o=>o?le.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class jd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Rr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Qv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=CC(r.target.error);this.At.reject(new Qv(e,o))}}static open(e,t,r,o){try{return new jd(t,e.transaction(o,r))}catch(l){throw new Qv(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vx(t)}}class Fa{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Fa.Vt((0,jt.z$)())&&Nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),np(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,jt.hl)())return!1;if(Fa.St())return!0;const e=(0,jt.z$)(),t=Fa.Vt(e),r=0<t&&t<10,o=Fa.Dt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{o(new Qv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Ae(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Qv(e,m))},l.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Nt(e);const w=jd.open(l.db,e,d?"readonly":"readwrite",r),C=o(w).next(x=>(w.Pt(),x)).catch(x=>(w.abort(x),le.reject(x))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),l.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _x{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return np(this.Ft.delete())}}class Qv extends Ae{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tp(n){return"IndexedDbTransactionError"===n.name}class vx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),np(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),np(this.store.add(e))}get(e){return np(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),np(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),np(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.Kt(o,(d,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new le((l,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((o,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(l,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new le((r,o)=>{t.onerror=l=>{const d=CC(l.target.error);o(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new le((o,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new _x(m),C=t(m.primaryKey,m.value,w);if(C instanceof le){const x=C.catch(N=>(w.done(),le.reject(N)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function np(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=CC(r.target.error);t(o)}})}let lS=!1;function CC(n){const e=Fa.Vt((0,jt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lS||(lS=!0,setTimeout(()=>{throw r},0)),r}}return n}class cS extends Gm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function gi(n,e){const t=$e(n);return Fa.xt(t.Ht,e)}class TC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&lC(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Bv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Bv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,(t,r)=>Sm(t,r))&&ql(this.baseMutations,e.baseMutations,(t,r)=>Sm(t,r))}}class AC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Et(e.mutations.length===r.length);let o=hC;const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new AC(e,t,r,o)}}class SC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $d{constructor(e,t,r,o,l=yt.min(),d=yt.min(),m=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new $d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class dS{constructor(e){this.Jt=e}}function hS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:CI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Jf(o=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Qf(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:rp(e.version)};else{if(!e.isUnknownDocument())return ze();r.unknownDocument={path:t.path.toArray(),version:rp(e.version)}}var o,l;return r}function CI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function rp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ip(n){const e=new Fn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function qm(n,e){const t=(e.baseMutations||[]).map(l=>Wv(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Wv(n.Jt,l)),o=Fn.fromMillis(e.localWriteTimeMs);return new TC(e.batchId,o,t,r)}function Jv(n){const e=ip(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ip(n.lastLimboFreeSnapshotVersion):yt.min();let r;var o;return void 0!==n.query.documents?(Et(1===(o=n.query).documents.length),r=Ls(Ld(Lm(o.documents[0])))):r=Ls(IC(n.query)),new $d(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function fS(n,e){const t=rp(e.snapshotVersion),r=rp(e.lastLimboFreeSnapshotVersion);let o;o=Rv(e.target)?EC(n.Jt,e.target):wC(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ql(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function MC(n){const e=IC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?hI(e,e.limit,"L"):e}function xC(n,e){return new SC(e.largestBatchId,Wv(n.Jt,e.overlayMutation))}function pS(n,e){const t=e.path.lastSegment();return[n,u(e.path.popLast()),t]}class wx{getBundleMetadata(e,t){return gS(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ip(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return gS(e).put({bundleId:(r=t).id,createTime:rp(vr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return mS(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:MC(o.bundledQuery),readTime:ip(o.readTime)};var o})}saveNamedQuery(e,t){return mS(e).put({name:(r=t).name,readTime:rp(vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function gS(n){return gi(n,"bundles")}function mS(n){return gi(n,"namedQueries")}class RC{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new RC(e,t.uid||"")}getOverlay(e,t){return Xv(e).get(pS(this.userId,t)).next(r=>r?xC(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((l,d)=>{const m=new SC(t,d);o.push(this.Xt(e,m))}),le.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(u(d.getCollectionPath())));const l=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(Xv(e).Qt("collectionPathOverlayIndex",m))}),le.waitFor(l)}getOverlaysForCollection(e,t,r){const o=Pu(),l=u(t),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Xv(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=xC(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=Pu();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xv(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,x)=>{const N=xC(this.M,C);l.size()<o||N.largestBatchId===d?(l.set(N.getKey(),N),d=N.largestBatchId):x.done()}).next(()=>l)}Xt(e,t){return Xv(e).put(function(r,o,l){const[d,m,w]=pS(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Bm(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function Xv(n){return gi(n,"documentOverlays")}class sp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Na(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ou(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?wm(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ze()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ve.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Ix(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function yS(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=Ix(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}sp.fe=new sp;class Dx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=yS(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=yS(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class bx{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Cx{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class e0{constructor(){this.De=new Dx,this.Ce=new bx(this.De),this.xe=new Cx(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Hd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hd(this.indexId,this.documentKey,this.arrayValue,r)}}function op(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=_S(n.arrayValue,e.arrayValue),0!==t?t:(t=_S(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function _S(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Tx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Im(e);if(void 0!==t&&!this.Be(t))return!1;const r=Yl(e);let o=0,l=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ax{constructor(){this.qe=new NC}addToCollectionParentIndex(e,t){return this.qe.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getFieldIndex(e,t){return le.resolve(null)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class NC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Tn(zt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Tn(zt.comparator)).toArray()}}const zm=new Uint8Array(0);class Sx{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new NC,this.Ge=new nc(r=>Ql(r),(r,o)=>Fd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const l={collectionId:r,parent:u(o)};return vS(e).put(l)}return le.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[vm(t),""],!1,!0);return vS(e).qt(o).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(_(d.parent))}return r})}addFieldIndex(e,t){const r=TI(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=TI(e),o=AI(e),l=t0(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=t0(e);let o=!0;const l=new Map;return le.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),l.set(d,m)})).next(()=>{if(o){let d=an();const m=[];return le.forEach(l,(w,C)=>{var x;Re("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Qt=>`${Qt.fieldPath}:${Qt.kind}`).join(",")}`} to execute ${Ql(t)}`);const N=function(Qt,Nt){const Zt=Im(Nt);if(void 0===Zt)return null;for(const hn of Nv(Qt,Zt.fieldPath))switch(hn.op){case"array-contains-any":return hn.value.arrayValue.values||[];case"array-contains":return[hn.value]}return null}(C,w),G=function(Qt,Nt){const Zt=new Map;for(const hn of Yl(Nt))for(const Ui of Nv(Qt,hn.fieldPath))switch(Ui.op){case"==":case"in":Zt.set(hn.fieldPath.canonicalString(),Ui.value);break;case"not-in":case"!=":return Zt.set(hn.fieldPath.canonicalString(),Ui.value),Array.from(Zt.values())}return null}(C,w),Y=function(Qt,Nt){const Zt=[];let hn=!0;for(const Ui of Yl(Nt)){const _p=0===Ui.kind?rC(Qt,Ui.fieldPath,Qt.startAt):iC(Qt,Ui.fieldPath,Qt.startAt);if(!_p.value)return null;Zt.push(_p.value),hn&&(hn=_p.inclusive)}return new ka(Zt,hn)}(C,w),ce=function(Qt,Nt){const Zt=[];let hn=!0;for(const Ui of Yl(Nt)){const _p=0===Ui.kind?iC(Qt,Ui.fieldPath,Qt.endAt):rC(Qt,Ui.fieldPath,Qt.endAt);if(!_p.value)return null;Zt.push(_p.value),hn&&(hn=_p.inclusive)}return new ka(Zt,hn)}(C,w),Fe=this.je(w,C,Y),it=this.je(w,C,ce),Wt=this.We(w,C,G),Kt=this.ze(w.indexId,N,Fe,!!Y&&Y.inclusive,it,!!ce&&ce.inclusive,Wt);return le.forEach(Kt,Qt=>r.Gt(Qt,t.limit).next(Nt=>{Nt.forEach(Zt=>{const hn=Ve.fromSegments(Zt.documentKey);d.has(hn)||(d=d.add(hn),m.push(hn))})}))}).next(()=>m)}return le.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,l,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),C=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const G=t?this.He(t[N/C]):zm,Y=r?this.Je(e,G,r[N%C],o):this.Ye(e),ce=l?this.Xe(e,G,l[N%C],d):this.Ye(e+1);x.push(...this.createRange(Y,ce,m.map(Fe=>this.Je(e,G,Fe,!0))))}return x}Je(e,t,r,o){const l=new Hd(e,Ve.empty(),t,r);return o?l:l.ke()}Xe(e,t,r,o){const l=new Hd(e,Ve.empty(),t,r);return o?l.ke():l}Ye(e){return new Hd(e,Ve.empty(),zm,zm)}getFieldIndex(e,t){const r=new Tx(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{const d=l.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new e0;for(const o of Yl(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const d=r.Ne(o.kind);sp.fe.Zt(l,d)}return r.Se()}He(e){const t=new e0;return sp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new e0;return sp.fe.Zt(Pd(this.databaseId,t),r.Ne(function(o){const l=Yl(o);return 0===l.length?0:l[l.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new e0);let l=0;for(const d of Yl(e)){const m=r[l++];for(const w of o)if(this.en(t,d.fieldPath)&&kf(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);sp.fe.Zt(m,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],l=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new e0;w.seed(m.Se()),sp.fe.Zt(d,w.Ne(t.kind)),l.push(w)}return l}en(e,t){return!!e.filters.find(r=>r instanceof pi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=TI(e),o=AI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const d=[];return le.forEach(l,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,x){const N=x?new kd(x.sequenceNumber,new $o(ip(x.readTime),new Ve(_(x.documentKey)),x.largestBatchId)):kd.empty(),G=C.fields.map(([Y,ce])=>new Dm(Nr.fromServerFormat(Y),ce));return new Uf(C.indexId,C.collectionGroup,G,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:Tt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=TI(e),l=AI(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>le.forEach(m,w=>{return l.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:rp((G=r).readTime),documentKey:u(G.documentKey.path),largestBatchId:G.largestBatchId});var G})))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(o,l)=>{const d=r.get(o.collectionGroup);return(d?le.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),le.forEach(m,w=>this.on(e,o,w).next(C=>{const x=this.un(l,w);return C.isEqual(x)?le.resolve():this.an(e,l,w,C,x)}))))})}cn(e,t,r,o){return t0(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return t0(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=t0(e);let l=new Tn(op);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{l=l.add(new Hd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}un(e,t){let r=new Tn(op);const o=this.Ze(t,e);if(null==o)return r;const l=Im(t);if(null!=l){const d=e.data.field(l.fieldPath);if(kf(d))for(const m of d.arrayValue.values||[])r=r.add(new Hd(t.indexId,e.key,this.He(m),o))}else r=r.add(new Hd(t.indexId,e.key,zm,o));return r}an(e,t,r,o,l){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,x,N){const G=m.getIterator(),Y=w.getIterator();let ce=Kf(G),Fe=Kf(Y);for(;ce||Fe;){let it=!1,Wt=!1;if(ce&&Fe){const Kt=C(ce,Fe);Kt<0?Wt=!0:Kt>0&&(it=!0)}else null!=ce?Wt=!0:it=!0;it?(x(Fe),Fe=Kf(Y)):Wt?(N(ce),ce=Kf(G)):(ce=Kf(G),Fe=Kf(Y))}}(o,l,op,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),le.waitFor(d)}rn(e){let t=1;return AI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>op(d,m)).filter((d,m,w)=>!m||0!==op(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=op(d,e),w=op(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const l=[];for(let d=0;d<o.length;d+=2)l.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,zm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,zm,[]]));return l}}function vS(n){return gi(n,"collectionParents")}function t0(n){return gi(n,"indexEntries")}function TI(n){return gi(n,"indexConfiguration")}function AI(n){return gi(n,"indexState")}const ES={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wS(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,N,G)=>(m++,G.delete()));l.push(w.next(()=>{Et(1===m)}));const C=[];for(const x of t.mutations){const N=A(e,x.key.path,t.batchId);l.push(o.delete(N)),C.push(x.key)}return le.waitFor(l).next(()=>C)}function SI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ze();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class OC{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Et(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new OC(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gd(e).Wt({index:"userMutationsIndex",range:r},(o,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=Wm(e),d=Gd(e);return d.add({}).next(m=>{Et("number"==typeof m);const w=new TC(m,t,r,o),C=function(G,Y,ce){const Fe=ce.baseMutations.map(Wt=>Bm(G.Jt,Wt)),it=ce.mutations.map(Wt=>Bm(G.Jt,Wt));return{userId:Y,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Fe,mutations:it}}(this.M,this.userId,w),x=[];let N=new Tn((G,Y)=>Tt(G.canonicalString(),Y.canonicalString()));for(const G of o){const Y=A(this.userId,G.key.path,m);N=N.add(G.key.path.popLast()),x.push(d.put(C)),x.push(l.put(Y,S))}return N.forEach(G=>{x.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),le.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Gd(e).get(t).next(r=>r?(Et(r.userId===this.userId),qm(this.M,r)):null)}fn(e,t){return this.ln[t]?le.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Gd(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Et(m.batchId>=r),l=qm(this.M,m)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gd(e).qt("userMutationsIndex",t).next(r=>r.map(o=>qm(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=I(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return Wm(e).Wt({range:o},(d,m,w)=>{const[C,x,N]=d,G=_(x);if(C===this.userId&&t.path.isEqual(G))return Gd(e).get(N).next(Y=>{if(!Y)throw ze();Et(Y.userId===this.userId),l.push(qm(this.M,Y))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Tt);const o=[];return t.forEach(l=>{const d=I(this.userId,l.path),m=IDBKeyRange.lowerBound(d),w=Wm(e).Wt({range:m},(C,x,N)=>{const[G,Y,ce]=C,Fe=_(Y);G===this.userId&&l.path.isEqual(Fe)?r=r.add(ce):N.done()});o.push(w)}),le.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=I(this.userId,r),d=IDBKeyRange.lowerBound(l);let m=new Tn(Tt);return Wm(e).Wt({range:d},(w,C,x)=>{const[N,G,Y]=w,ce=_(G);N===this.userId&&r.isPrefixOf(ce)?ce.length===o&&(m=m.add(Y)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Gd(e).get(l).next(d=>{if(null===d)throw ze();Et(d.userId===this.userId),r.push(qm(this.M,d))}))}),le.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return wS(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),le.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Wm(e).Wt({range:r},(l,d,m)=>{if(l[0]===this.userId){const w=_(l[1]);o.push(w)}else m.done()}).next(()=>{Et(0===o.length)})})}containsKey(e,t){return IS(e,this.userId,t)}wn(e){return DS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IS(n,e,t){const r=I(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return Wm(n).Wt({range:l,jt:!0},(m,w,C)=>{const[x,N,G]=m;x===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Gd(n){return gi(n,"mutations")}function Wm(n){return gi(n,"documentMutations")}function DS(n){return gi(n,"mutationQueues")}class ap{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ap(0)}static yn(){return new ap(-1)}}class Mx{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ap(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>yt.fromTimestamp(new Fn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Km(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return Km(e).Wt((d,m)=>{const w=Jv(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,l.push(this.removeTargetData(e,w)))}).next(()=>le.waitFor(l)).next(()=>o)}forEachTarget(e,t){return Km(e).Wt((r,o)=>{const l=Jv(o);t(l)})}pn(e){return bS(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}In(e,t){return bS(e).put("targetGlobalKey",t)}Tn(e,t){return Km(e).put(fS(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ql(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Km(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Jv(m);Fd(t,C.target)&&(l=C,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=qd(e);return t.forEach(d=>{const m=u(d.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),le.waitFor(o)}removeMatchingKeys(e,t,r){const o=qd(e);return le.forEach(t,l=>{const d=u(l.path);return le.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=qd(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=qd(e);let l=an();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=_(d[1]),x=new Ve(C);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=u(t.path),o=IDBKeyRange.bound([r],[vm(r)],!1,!0);let l=0;return qd(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(l++,C.done())}).next(()=>l>0)}Et(e,t){return Km(e).get(t).next(r=>r?Jv(r):null)}}function Km(n){return gi(n,"targets")}function bS(n){return gi(n,"targetGlobal")}function qd(n){return gi(n,"targetDocuments")}function up(n){return PC.apply(this,arguments)}function PC(){return PC=(0,me.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==Hm)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),PC.apply(this,arguments)}function CS([n,e],[t,r]){const o=Tt(n,t);return 0===o?Tt(e,r):o}class xx{constructor(e){this.An=e,this.buffer=new Tn(CS),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();CS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Rx{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){tp(o)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield up(o)}yield t.Sn(e)}))}}class Nx{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(us.A);const r=new xx(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(ES)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ES):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,l,d,m,w,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Dv()<=Du.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${l} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-x}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class Ox{constructor(e,t){this.db=e,this.garbageCollector=new Nx(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return MI(e,r)}removeReference(e,t,r){return MI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return MI(e,t)}On(e,t){return function(r,o){let l=!1;return DS(r).zt(d=>IS(r,d,o).next(m=>(m&&(l=!0),le.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d,yt.min()),qd(e).delete([0,u(d.path)])))});o.push(w)}}).next(()=>le.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return MI(e,t)}Mn(e,t){const r=qd(e);let o,l=us.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(l!==us.A&&t(new Ve(_(o)),l),l=C,o=w):l=us.A}).next(()=>{l!==us.A&&t(new Ve(_(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function MI(n,e){return qd(n).put((r=n.currentSequenceNumber,{targetId:0,path:u(e.path),sequenceNumber:r}));var r}class TS{constructor(){this.changes=new nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Px{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lp(e).put(r)}removeEntry(e,t,r){return lp(e).delete(function(o,l){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],CI(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return lp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(n0(t))},(o,l)=>{r=this.$n(t,l)}).next(()=>r)}Bn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return lp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(n0(t))},(o,l)=>{r={document:this.$n(t,l),size:SI(l)}}).next(()=>r)}getEntries(e,t){let r=fo();return this.Ln(e,t,(o,l)=>{const d=this.$n(o,l);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=fo(),o=new Gn(Ve.comparator);return this.Ln(e,t,(l,d)=>{const m=this.$n(l,d);r=r.insert(l,m),o=o.insert(l,SI(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return le.resolve();let o=new Tn(MS);t.forEach(w=>o=o.add(w));const l=IDBKeyRange.bound(n0(o.first()),n0(o.last())),d=o.getIterator();let m=d.getNext();return lp(e).Wt({index:"documentKeyIndex",range:l},(w,C,x)=>{const N=Ve.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&MS(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(n0(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),CI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lp(e).qt(IDBKeyRange.bound(o,l,!0)).next(d=>{let m=fo();for(const w of d){const C=this.$n(Ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let l=fo();const d=SS(t,r),m=SS(t,$o.max());return lp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,x)=>{const N=this.$n(Ve.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(N.key,N),l.size===o&&x.done()}).next(()=>l)}newChangeBuffer(e){return new kx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return AS(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Fn(e,t){return AS(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Ex(n,e){let t;if(e.document)t=bI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),o=ip(e.noDocument.readTime);t=Cn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ze();{const r=Ve.fromSegments(e.unknownDocument.path),o=ip(e.unknownDocument.version);t=Cn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Fn(r[0],r[1]);return yt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return Cn.newInvalidDocument(e)}}class kx extends TS{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new nc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Tn((l,d)=>Tt(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const m=this.Gn.get(l);if(t.push(this.Kn.removeEntry(e,l,m.readTime)),d.isValidDocument()){const w=hS(this.Kn.M,d);o=o.add(l.path.popLast()),r+=SI(w)-m.size,t.push(this.Kn.addEntry(e,l,w))}else if(r-=m.size,this.trackRemovals){const w=hS(this.Kn.M,d.convertToNoDocument(yt.min()));t.push(this.Kn.addEntry(e,l,w))}}),o.forEach(l=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Kn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function AS(n){return gi(n,"remoteDocumentGlobal")}function lp(n){return gi(n,"remoteDocumentsV14")}function n0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SS(n,e){const t=e.documentKey.path.toArray();return[n,CI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function MS(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=Tt(t[l],r[l]),o)return o;return o=Tt(t.length,r.length),o||(o=Tt(t[t.length-2],r[r.length-2]),o||Tt(t[t.length-1],r[r.length-1]))}class Fx{constructor(e){this.M=e}kt(e,t,r,o){const l=new jd("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",E,{unique:!0}),m.createObjectStore("documentMutations"),xS(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=le.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),xS(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(l))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",E,{unique:!0});const x=w.store("mutations"),N=C.map(G=>x.put(G));return le.waitFor(N)})}(e,l))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(l))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(l)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(l))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,l))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(l))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:ls});w.createIndex("collectionPathOverlayIndex",oc,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Kv,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:k});w.createIndex("documentKeyIndex",V),w.createIndex("collectionGroupIndex",z)}(e)).next(()=>this.Jn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Ie}).createIndex("sequenceNumberIndex",dt,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Ht}).createIndex("documentKeyIndex",cn,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=SI(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>le.forEach(o,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>le.forEach(m,w=>{Et(w.userId===l.userId);const C=qm(this.M,w);return wS(e,l.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Wt((d,m)=>{const w=new zt(d),C=[0,u(w)];l.push(t.get(C).next(x=>x?le.resolve():t.put({targetId:0,path:u(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>le.waitFor(l))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:et});const r=t.store("collectionParents"),o=new NC,l=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:u(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new zt(d);return l(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const x=_(m);return l(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const l=Jv(o),d=fS(this.M,l);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((l,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Ve(zt.fromString(C.document.name).popFirst(5)):C.noDocument?Ve.fromSegments(C.noDocument.path):C.unknownDocument?Ve.fromSegments(C.unknownDocument.path):ze()).path.toArray();var C;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>le.waitFor(o))}}function xS(n){n.createObjectStore("targetDocuments",{keyPath:Ne}).createIndex("documentTargetsIndex",Be,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ge,{unique:!0}),n.createObjectStore("targetGlobal")}const kC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class FC{constructor(e,t,r,o,l,d,m,w,C,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=l,this.window=d,this.document=m,this.Xn=C,this.Zn=x,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=G=>Promise.resolve(),!FC.vt())throw new Ae(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ox(this,o),this.hs=t+"main",this.M=new dS(w),this.ls=new Fa(this.hs,this.ts,new Fx(this.M)),this.fs=new Mx(this.referenceDelegate,this.M),this.ds=new Px(this.M),this._s=new wx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Nn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(oe.FAILED_PRECONDITION,kC);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new us(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(tp(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return r0(e).get("owner").next(t=>le.resolve(this.bs(t)))}Vs(e){return xI(e).delete(this.clientId)}vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=gi(r,"clientMetadata");return o.qt().next(l=>{const d=e.Ds(l,18e5),m=l.filter(w=>-1===d.indexOf(w));return le.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?le.resolve(!0):r0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(oe.FAILED_PRECONDITION,kC);return!1}}return!(!this.networkEnabled||!this.inForeground)||xI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new cS(t,us.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>xI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return OC.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Sx(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return RC.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=14===(d=this.ts)?Yv:13===d?$m:12===d?Zv:11===d?jm:void ze();var d;let m;return this.ls.runTransaction(e,o,l,w=>(m=new cS(w,this.es?this.es.next():us.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw Nn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ae(oe.FAILED_PRECONDITION,Hm);return r(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return r0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(oe.FAILED_PRECONDITION,kC)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return r0(e).put("owner",t)}static vt(){return Fa.vt()}Rs(e){const t=r0(e);return t.get("owner").next(r=>this.bs(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Nn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,jt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Nn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function r0(n){return gi(n,"owner")}function xI(n){return gi(n,"clientMetadata")}function LC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Lx{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ve.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):dI(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Ve(t)).next(r=>{let o=Gv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let l=Gv();return this.indexManager.getCollectionParents(e,o).next(d=>le.forEach(d,m=>{const w=(C=t,x=m.child(o),new Ho(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.zs(e,w,r).next(C=>{C.forEach((x,N)=>{l=l.insert(x,N)})})}).next(()=>l))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const d of l)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=Cn.newInvalidDocument(w),o=o.insert(w,C)),Bv(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((l,d)=>{Gf(t,d)||(o=o.remove(l))}),o))}}class VC{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=an(),o=an();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new VC(e,t.fromCache,r,o)}}class RS{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(yt.min())?this.ti(e,t):this.Zs.Ks(e,o).next(l=>{const d=this.ei(t,l);return(bm(t)||Vd(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(Dv()<=Du.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lv(t)),this.Zs.Qs(e,t,nI(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var l}ei(e,t){let r=new Tn(Vs(e));return t.forEach((o,l)=>{Gf(e,l)&&(r=r.add(l))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ti(e,t){return Dv()<=Du.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Lv(t)),this.Zs.Qs(e,t,$o.min())}}class Vx{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new Gn(Tt),this.ri=new nc(l=>Ql(l),Fd),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Lx(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function NS(n,e,t,r){return new Vx(n,e,t,r)}function OS(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,me.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(l=>(o=l,t.ai(e),t.Bs.getAllMutationBatches(r))).next(l=>{const d=[],m=[];let w=an();for(const C of o){d.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}for(const C of l){m.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}return t.ci.Ks(r,w).next(C=>({hi:C,removedBatchIds:d,addedBatchIds:m}))})})}),UC.apply(this,arguments)}function Ux(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const x=w.batch,N=x.keys();let G=le.resolve();return N.forEach(Y=>{G=G.next(()=>C.getEntry(m,Y)).next(ce=>{const Fe=w.docVersions.get(Y);Et(null!==Fe),ce.version.compareTo(Fe)<0&&(x.applyToRemoteDocument(ce,w),ce.isValidDocument()&&(ce.setReadTime(w.commitVersion),C.addEntry(ce)))})}),G.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function PS(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Bx(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((C,x)=>{const N=o.get(x);if(!N)return;m.push(t.fs.removeMatchingKeys(l,C.removedDocuments,x).next(()=>t.fs.addMatchingKeys(l,C.addedDocuments,x)));let G=N.withSequenceNumber(l.currentSequenceNumber);var Y,ce,Fe;e.targetMismatches.has(x)?G=G.withResumeToken(_r.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):C.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(C.resumeToken,r)),o=o.insert(x,G),ce=G,Fe=C,(0===(Y=N).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(l,G))});let w=fo();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),m.push(kS(l,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(yt.min())){const C=t.fs.getLastRemoteSnapshotVersion(l).next(x=>t.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(C)}return le.waitFor(m).next(()=>d.apply(l)).next(()=>t.ci.Gs(l,w)).next(()=>w)}).then(l=>(t.ii=o,l))}function kS(n,e,t){let r=an();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=fo();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(d,m.readTime),l=l.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),l=l.insert(d,m)):Re("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),l})}function jx(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Zm(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(l=>l?(o=l,le.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new $d(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Ym(n,e,t){return BC.apply(this,arguments)}function BC(){return BC=(0,me.Z)(function*(n,e,t){const r=$e(n),o=r.ii.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!tp(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),BC.apply(this,arguments)}function RI(n,e,t){const r=$e(n);let o=yt.min(),l=an();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const x=$e(m),N=x.ri.get(C);return void 0!==N?le.resolve(x.ii.get(N)):x.fs.getTargetData(w,C)}(r,d,Ls(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{l=w})}).next(()=>r.si.Qs(d,e,t?o:yt.min(),t?l:an())).next(m=>(VS(r,fI(e),m),{documents:m,li:l})))}function FS(n,e){const t=$e(n),r=$e(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(d=>d?d.target:null))}function LS(n,e){const t=$e(n),r=t.oi.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,nI(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(VS(t,e,o),o))}function VS(n,e,t){let r=yt.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(e,r)}function jC(){return jC=(0,me.Z)(function*(n,e,t,r){const o=$e(n);let l=an(),d=fo();for(const C of t){const x=e.fi(C.metadata.name);C.document&&(l=l.add(x));const N=e.di(C);N.setReadTime(e._i(C.metadata.readTime)),d=d.insert(x,N)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),w=yield Zm(o,(C=r,Ls(Ld(zt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>kS(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,l,w.targetId)).next(()=>o.ci.Gs(C,x)).next(()=>x)))}),jC.apply(this,arguments)}function Hx(n,e){return $C.apply(this,arguments)}function $C(){return $C=(0,me.Z)(function*(n,e,t=an()){const r=yield Zm(n,Ls(MC(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const d=vr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(l,e);const m=r.withResumeToken(_r.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(l,m).next(()=>o.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.fs.addMatchingKeys(l,t,r.targetId)).next(()=>o._s.saveNamedQuery(l,e))})}),$C.apply(this,arguments)}class Gx{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return le.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:vr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:MC(r.bundledQuery),readTime:vr(r.readTime)}),le.resolve();var r}}class qx{constructor(){this.overlays=new Gn(Ve.comparator),this.gi=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Xt(e,t,l)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const o=Pu(),l=t.length+1,d=new Ve(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&w.largestBatchId>r&&o.set(w.getKey(),w)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new Gn((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=l.get(C.largestBatchId);null===x&&(x=Pu(),l=l.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=Pu(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return le.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new SC(t,r));let l=this.gi.get(t);void 0===l&&(l=an(),this.gi.set(t,l)),this.gi.set(t,l.add(r.key))}}class HC{constructor(){this.yi=new Tn(mi.pi),this.Ii=new Tn(mi.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new mi(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new mi(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Ve(new zt([])),r=new mi(t,e),o=new mi(t,e+1),l=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ve(new zt([])),r=new mi(t,e),o=new mi(t,e+1);let l=an();return this.Ii.forEachInRange([r,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new mi(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ve.comparator(e.key,t.key)||Tt(e.vi,t.vi)}static Ti(e,t){return Tt(e.vi,t.vi)||Ve.comparator(e.key,t.key)}}class zx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Tn(mi.pi)}checkEmpty(e){return le.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const l=this.Si;this.Si++;const d=new TC(l,t,r,o);this.Bs.push(d);for(const m of o)this.Di=this.Di.add(new mi(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),l=o<0?0:o;return le.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return le.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),o=new mi(t,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,o],d=>{const m=this.Ci(d.vi);l.push(m)}),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Tt);return t.forEach(o=>{const l=new mi(o,0),d=new mi(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],m=>{r=r.add(m.vi)})}),le.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Ve.isDocumentKey(l)||(l=l.child(""));const d=new mi(new Ve(l),0);let m=new Tn(Tt);return this.Di.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.vi)),!0)},d),le.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Et(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return le.forEach(t.mutations,o=>{const l=new mi(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new mi(t,0),o=this.Di.firstAfterOrEqual(r);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return le.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Wx{constructor(e){this.Mi=e,this.docs=new Gn(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=fo();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Cn.newInvalidDocument(o))}),le.resolve(r)}getAllFromCollection(e,t,r){let o=fo();const l=new Ve(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||iI(rI(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,t,r,o){ze()}Oi(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Kx(this)}getSize(e){return le.resolve(this.size)}}class Kx extends TS{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Zx{constructor(e){this.persistence=e,this.Fi=new nc(t=>Ql(t),Fd),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new HC,this.targetCount=0,this.Li=ap.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),le.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ap(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Tn(t),le.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Fi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),le.waitFor(l).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),le.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Bi.containsKey(t))}}class Yx{constructor(e,t){this.Ui={},this.overlays={},this.es=new us(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Zx(this),this.indexManager=new Ax,this.ds=new Wx(r=>this.referenceDelegate.qi(r)),this.M=new dS(t),this._s=new Gx(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new zx(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new Qx(this.es.next());return this.referenceDelegate.Ki(),r(o).next(l=>this.referenceDelegate.Gi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Qi(e,t){return le.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class Qx extends Gm{constructor(e){super(),this.currentSequenceNumber=e}}class GC{constructor(e){this.persistence=e,this.ji=new HC,this.Wi=null}static zi(e){return new GC(e)}get Hi(){if(this.Wi)return this.Wi;throw ze()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),le.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Hi,r=>{const o=Ve.fromPath(r);return this.Ji(e,o).next(l=>{l||t.removeEntry(o,yt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return le.or([()=>le.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function US(n,e){return`firestore_clients_${n}_${e}`}function BS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qC(n,e){return`firestore_targets_${n}_${e}`}class NI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let l,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(l=new Ae(o.error.code,o.error.message))),d?new NI(e,t,o.state,l):(Nn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Ae(r.error.code,r.error.message))),l?new s0(e,r.state,o):(Nn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class OI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Zf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Jw(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return o?new OI(e,l):(Nn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zC{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zC(t.clientId,t.onlineState):(Nn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class WC{constructor(){this.activeTargetIds=Zf()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KC{constructor(e,t,r,o,l){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Gn(Tt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=US(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new WC),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const l=e.getItem(US(e.persistenceKey,o));if(l){const d=OI.Yi(o,l);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qC(this.persistenceKey,e));if(r){const o=s0.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qC(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Nn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(l){let d=us.A;if(null!=l)try{const m=JSON.parse(l);Et("number"==typeof m),d=m}catch(m){Nn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==us.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.kr(l)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new NI(this.currentUser,e,t,r),l=BS(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Xi())}Ir(e){const t=BS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=qC(this.persistenceKey,e),l=new s0(e,t,r);this.setItem(o,l.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return OI.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return NI.Yi(new Zr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return s0.Yi(o,t)}mr(e){return zC.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),l=this.yr(r),d=[],m=[];return l.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{l.has(w)||m.push(w)}),this.syncEngine.Fr(d,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Zf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class jS{constructor(){this.$r=new WC,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new WC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jx{Lr(e){}shutdown(){}}class $S{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Xx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class eR{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class tR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,l){const d=this.uo(e,t);Re("RestConnection","Sending: ",d,r);const m={};return this.ao(m,o,l),this.co(e,d,m,r).then(w=>(Re("RestConnection","Received: ",w),w),w=>{throw Rf("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}ho(e,t,r,o,l){return this.oo(e,t,r,o,l)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}uo(e,t){return`${this.io}/v1/${t}:${Xx[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((l,d)=>{const m=new $w;m.listenOnce(Mf.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case wv.NO_ERROR:const C=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(C)),l(C);break;case wv.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new Ae(oe.DEADLINE_EXCEEDED,"Request time out"));break;case wv.HTTP_ERROR:const x=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const G=function(Y){const ce=Y.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ce)>=0?ce:oe.UNKNOWN}(N.status);d(new Ae(G,N.message))}else d(new Ae(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ae(oe.UNAVAILABLE,"Connection failed."));break;default:ze()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Qb(),d=Jb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new jw({})),this.ao(m.initMessageHeaders,t,r),(0,jt.uI)()||(0,jt.b$)()||(0,jt.d)()||(0,jt.w1)()||(0,jt.Mn)()||(0,jt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Re("Connection","Creating WebChannel: "+w,m);const C=l.createWebChannel(w,m);let x=!1,N=!1;const G=new eR({Wr:ce=>{N?Re("Connection","Not sending because WebChannel is closed:",ce):(x||(Re("Connection","Opening WebChannel transport."),C.open(),x=!0),Re("Connection","WebChannel sending:",ce),C.send(ce))},zr:()=>C.close()}),Y=(ce,Fe,it)=>{ce.listen(Fe,Wt=>{try{it(Wt)}catch(Kt){setTimeout(()=>{throw Kt},0)}})};return Y(C,xf.EventType.OPEN,()=>{N||Re("Connection","WebChannel transport opened.")}),Y(C,xf.EventType.CLOSE,()=>{N||(N=!0,Re("Connection","WebChannel transport closed"),G.no())}),Y(C,xf.EventType.ERROR,ce=>{N||(N=!0,Rf("Connection","WebChannel transport errored:",ce),G.no(new Ae(oe.UNAVAILABLE,"The operation could not be completed")))}),Y(C,xf.EventType.MESSAGE,ce=>{var Fe;if(!N){const it=ce.data[0];Et(!!it);const Wt=it,Kt=Wt.error||(null===(Fe=Wt[0])||void 0===Fe?void 0:Fe.error);if(Kt){Re("Connection","WebChannel received error:",Kt);const Qt=Kt.status;let Nt=function(hn){const Ui=Yn[hn];if(void 0!==Ui)return cC(Ui)}(Qt),Zt=Kt.message;void 0===Nt&&(Nt=oe.INTERNAL,Zt="Unknown error status: "+Qt+" with message "+Kt.message),N=!0,G.no(new Ae(Nt,Zt)),C.close()}else Re("Connection","WebChannel received:",it),G.so(it)}}),Y(d,Bw.STAT_EVENT,ce=>{ce.stat===Iv.PROXY?Re("Connection","Detected buffering proxy"):ce.stat===Iv.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.eo()},0),G}}function HS(){return"undefined"!=typeof window?window:null}function PI(){return"undefined"!=typeof document?document:null}function o0(n){return new mC(n,!0)}class ZC{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class GS{constructor(e,t,r,o,l,d,m,w){this.Yn=e,this.Ro=r,this.Po=o,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new ZC(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,me.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,me.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Nn(t.toString()),Nn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Ae(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,me.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nR extends GS{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=l}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function sS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:ze(),o=e.targetChange.targetIds||[],l=function(w,C){return w.N?(Et(void 0===C||"string"==typeof C),_r.fromBase64String(C||"")):(Et(void 0===C||C instanceof Uint8Array),_r.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?oe.UNKNOWN:cC(w.code);return new Ae(C,w.message||"")}(d);t=new Pm(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Go(n,r.document.name),l=vr(r.document.updateTime),d=new Yr({mapValue:{fields:r.document.fields}}),m=Cn.newFoundDocument(o,l,d);t=new Nm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Go(n,r.document),l=r.readTime?vr(r.readTime):yt.min(),d=Cn.newNoDocument(o,l);t=new Nm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Go(n,r.document);t=new Nm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ze();{const r=e.filter,l=new EI(r.count||0);t=new Om(r.targetId,l)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return yt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?yt.min():l.readTime?vr(l.readTime):yt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Vm(this.M),t.addTarget=function(o,l){let d;const m=l.target;return d=Rv(m)?{documents:EC(o,m)}:{query:wC(o,m)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=DI(o,l.resumeToken):l.snapshotVersion.compareTo(yt.min())>0&&(d.readTime=Qf(o,l.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function oS(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ze()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Vm(this.M),t.removeTarget=e,this.Fo(t)}}class rR extends GS{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function vC(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,o){let l=vr(r.updateTime?r.updateTime:o);return l.isEqual(yt.min())&&(l=vr(o)),new uC(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.Yo(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Vm(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bm(this.M,r))};this.Fo(t)}}class iR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.oo(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(oe.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ho(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(oe.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class sR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Nn(t),this.iu=!1):Re("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class oR{constructor(e,t,r,o,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;zd(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(C){const x=$e(C);x.fu.add(4),yield Qm(x),x.wu.set("Unknown"),x.fu.delete(4),yield a0(x)}),function(C){return w.apply(this,arguments)})(d))}))}),this.wu=new sR(r,o)}}function a0(n){return YC.apply(this,arguments)}function YC(){return YC=(0,me.Z)(function*(n){if(zd(n))for(const e of n.du)yield e(!0)}),YC.apply(this,arguments)}function Qm(n){return QC.apply(this,arguments)}function QC(){return QC=(0,me.Z)(function*(n){for(const e of n.du)yield e(!1)}),QC.apply(this,arguments)}function kI(n,e){const t=$e(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),eT(t)?XC(t):Xm(t).xo()&&JC(t,e))}function u0(n,e){const t=$e(n),r=Xm(t);t.lu.delete(e),r.xo()&&qS(t,e),0===t.lu.size&&(r.xo()?r.Mo():zd(t)&&t.wu.set("Unknown"))}function JC(n,e){n.mu.Z(e.targetId),Xm(n).jo(e)}function qS(n,e){n.mu.Z(e),Xm(n).Wo(e)}function XC(n){n.mu=new rS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Xm(n).start(),n.wu.ru()}function eT(n){return zd(n)&&!Xm(n).Co()&&n.lu.size>0}function zd(n){return 0===$e(n).fu.size}function zS(n){n.mu=void 0}function aR(n){return tT.apply(this,arguments)}function tT(){return tT=(0,me.Z)(function*(n){n.lu.forEach((e,t)=>{JC(n,e)})}),tT.apply(this,arguments)}function uR(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,me.Z)(function*(n,e){zS(n),eT(n)?(n.wu.au(e),XC(n)):n.wu.set("Unknown")}),nT.apply(this,arguments)}function lR(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,me.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Pm&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,l){const d=l.cause;for(const m of l.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield FI(n,r)}else if(e instanceof Nm?n.mu.ut(e):e instanceof Om?n.mu._t(e):n.mu.ht(e),!t.isEqual(yt.min()))try{const r=yield PS(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const d=o.mu.yt(l);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.lu.get(w);C&&o.lu.set(w,C.withResumeToken(m.resumeToken,l))}}),d.targetMismatches.forEach(m=>{const w=o.lu.get(m);if(!w)return;o.lu.set(m,w.withResumeToken(_r.EMPTY_BYTE_STRING,w.snapshotVersion)),qS(o,m);const C=new $d(w.target,m,1,w.sequenceNumber);JC(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield FI(n,r)}var r}),rT.apply(this,arguments)}function FI(n,e,t){return iT.apply(this,arguments)}function iT(){return iT=(0,me.Z)(function*(n,e,t){if(!tp(e))throw e;n.fu.add(1),yield Qm(n),n.wu.set("Offline"),t||(t=()=>PS(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield a0(n)}))}),iT.apply(this,arguments)}function WS(n,e){return e().catch(t=>FI(n,t,e))}function Jm(n){return sT.apply(this,arguments)}function sT(){return sT=(0,me.Z)(function*(n){const e=$e(n),t=Wd(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;cR(e);)try{const o=yield jx(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,dR(e,o)}catch(o){yield FI(e,o)}KS(e)&&ZS(e)}),sT.apply(this,arguments)}function cR(n){return zd(n)&&n.hu.length<10}function dR(n,e){n.hu.push(e);const t=Wd(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function KS(n){return zd(n)&&!Wd(n).Co()&&n.hu.length>0}function ZS(n){Wd(n).start()}function hR(n){return oT.apply(this,arguments)}function oT(){return oT=(0,me.Z)(function*(n){Wd(n).Zo()}),oT.apply(this,arguments)}function fR(n){return aT.apply(this,arguments)}function aT(){return aT=(0,me.Z)(function*(n){const e=Wd(n);for(const t of n.hu)e.Jo(t.mutations)}),aT.apply(this,arguments)}function pR(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=(0,me.Z)(function*(n,e,t){const r=n.hu.shift(),o=AC.from(r,e,t);yield WS(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Jm(n)}),uT.apply(this,arguments)}function gR(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,me.Z)(function*(n,e){var t;e&&Wd(n).Ho&&(yield(t=(0,me.Z)(function*(r,o){if(wI(l=o.code)&&l!==oe.ABORTED){const d=r.hu.shift();Wd(r).ko(),yield WS(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Jm(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),KS(n)&&ZS(n)}),lT.apply(this,arguments)}function YS(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,me.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=zd(t);t.fu.add(3),yield Qm(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield a0(t)}),cT.apply(this,arguments)}function dT(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,me.Z)(function*(n,e){const t=$e(n);e?(t.fu.delete(2),yield a0(t)):e||(t.fu.add(2),yield Qm(t),t.wu.set("Unknown"))}),hT.apply(this,arguments)}function Xm(n){return n.gu||(n.gu=function(e,t,r){const o=$e(e);return o.eu(),new nR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:aR.bind(null,n),Yr:uR.bind(null,n),Qo:lR.bind(null,n)}),n.du.push(function(){var e=(0,me.Z)(function*(t){t?(n.gu.ko(),eT(n)?XC(n):n.wu.set("Unknown")):(yield n.gu.stop(),zS(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Wd(n){return n.yu||(n.yu=function(e,t,r){const o=$e(e);return o.eu(),new rR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:hR.bind(null,n),Yr:gR.bind(null,n),Xo:fR.bind(null,n),Yo:pR.bind(null,n)}),n.du.push(function(){var e=(0,me.Z)(function*(t){t?(n.yu.ko(),yield Jm(n)):(yield n.yu.stop(),n.hu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class fT{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,m=new fT(e,t,d,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ey(n,e){if(Nn("AsyncQueue",`${e}: ${n}`),tp(n))return new Ae(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class ty{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=Gv(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new ty(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ty)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ty;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QS{constructor(){this.pu=new Gn(Ve.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):ze():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ny{constructor(e,t,r,o,l,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new ny(e,t,ty.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class mR{constructor(){this.Tu=void 0,this.listeners=[]}}class yR{constructor(){this.queries=new nc(e=>oC(e),Hf),this.onlineState="Unknown",this.Eu=new Set}}function pT(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,me.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new mR),o)try{l.Tu=yield t.onListen(r)}catch(d){const m=ey(d,`Initialization of query '${Lv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Au(t.onlineState),l.Tu&&e.Ru(l.Tu)&&_T(t)}),gT.apply(this,arguments)}function mT(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,me.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),yT.apply(this,arguments)}function _R(n,e){const t=$e(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Ru(o)&&(r=!0);d.Tu=o}}r&&_T(t)}function vR(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function _T(n){n.Eu.forEach(e=>{e.next()})}class vT{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new ny(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=ny.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class ER{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class JS{constructor(e){this.M=e}fi(e){return Go(this.M,e)}di(e){return e.metadata.exists?bI(this.M,e.document,!1):Cn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return vr(e)}}class wR{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XS(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new JS(this.M);for(const o of e)if(o.metadata.queries){const l=r.fi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||an()).add(l);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function $x(n,e,t,r){return jC.apply(this,arguments)}(e.localStore,new JS(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield Hx(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function XS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eM{constructor(e){this.key=e}}class tM{constructor(e){this.key=e}}class nM{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=an(),this.mutatedKeys=an(),this.Uu=Vs(e),this.qu=new ty(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new QS,o=t?t.qu:this.qu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w=bm(this.query)&&o.size===this.query.limit?o.last():null,C=Vd(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const G=o.get(x),Y=Gf(this.query,N)?N:null,ce=!!G&&this.mutatedKeys.has(G.key),Fe=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let it=!1;G&&Y?G.data.isEqual(Y.data)?ce!==Fe&&(r.track({type:3,doc:Y}),it=!0):this.ju(G,Y)||(r.track({type:2,doc:Y}),it=!0,(w&&this.Uu(Y,w)>0||C&&this.Uu(Y,C)<0)&&(m=!0)):!G&&Y?(r.track({type:0,doc:Y}),it=!0):G&&!Y&&(r.track({type:1,doc:G}),it=!0,(w||C)&&(m=!0)),it&&(Y?(d=d.add(Y),l=Fe?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))}),bm(this.query)||Vd(this.query))for(;d.size>this.query.limit;){const x=bm(this.query)?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{qu:d,Qu:r,ni:m,mutatedKeys:l}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const l=e.Qu.Iu();l.sort((C,x)=>function(N,G){const Y=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze()}};return Y(N)-Y(G)}(C.type,x.type)||this.Uu(C.doc,x.doc)),this.Wu(r);const d=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==l.length||w?{snapshot:new ny(this.query,e.qu,o,l,e.mutatedKeys,0===m,w,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new QS,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=an(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new tM(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new eM(r))}),t}Yu(e){this.$u=e.li,this.Lu=an();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return ny.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class IR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DR{constructor(e){this.key=e,this.Zu=!1}}class bR{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new nc(m=>oC(m),Hf),this.na=new Map,this.sa=new Set,this.ia=new Gn(Ve.comparator),this.ra=new Map,this.oa=new HC,this.ua={},this.aa=new Map,this.ca=ap.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function CR(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,me.Z)(function*(n,e){const t=HT(n);let r,o;const l=t.ea.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Xu();else{const d=yield Zm(t.localStore,Ls(e));t.isPrimaryClient&&kI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield wT(t,e,r,"current"===m)}return o}),ET.apply(this,arguments)}function wT(n,e,t,r){return IT.apply(this,arguments)}function IT(){return IT=(0,me.Z)(function*(n,e,t,r){n.la=(x,N,G)=>{return(Y=(0,me.Z)(function*(ce,Fe,it,Wt){let Kt=Fe.view.Gu(it);Kt.ni&&(Kt=yield RI(ce.localStore,Fe.query,!1).then(({documents:Zt})=>Fe.view.Gu(Zt,Kt)));const Qt=Wt&&Wt.targetChanges.get(Fe.targetId),Nt=Fe.view.applyChanges(Kt,ce.isPrimaryClient,Qt);return NT(ce,Fe.targetId,Nt.Hu),Nt.snapshot}),function(ce,Fe,it,Wt){return Y.apply(this,arguments)})(n,x,N,G);var Y};const o=yield RI(n.localStore,e,!0),l=new nM(e,o.li),d=l.Gu(o.documents),m=sc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=l.applyChanges(d,n.isPrimaryClient,m);NT(n,t,w.Hu);const C=new IR(e,t,l);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),IT.apply(this,arguments)}function TR(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,me.Z)(function*(n,e){const t=$e(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(l=>!Hf(l,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ym(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),u0(t.remoteStore,r.targetId),ry(t,r.targetId)}).catch(up))):(ry(t,r.targetId),yield Ym(t.localStore,r.targetId,!0))}),DT.apply(this,arguments)}function bT(){return bT=(0,me.Z)(function*(n,e,t){const r=GT(n);try{const o=yield function(l,d){const m=$e(l),w=Fn.now(),C=d.reduce((N,G)=>N.add(G.key),an());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ci.Ks(N,C).next(G=>{x=G;const Y=[];for(const ce of d){const Fe=eS(ce,x.get(ce.key));null!=Fe&&Y.push(new tc(ce.key,Fe,xv(Fe.value.mapValue),sr.exists(!0)))}return m.Bs.addMutationBatch(N,w,Y,d)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,d,m){let w=l.ua[l.currentUser.toKey()];w||(w=new Gn(Tt)),w=w.insert(d,m),l.ua[l.currentUser.toKey()]=w}(r,o.batchId,t),yield ac(r,o.changes),yield Jm(r.remoteStore)}catch(o){const l=ey(o,"Failed to persist write");t.reject(l)}}),bT.apply(this,arguments)}function rM(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,me.Z)(function*(n,e){const t=$e(n);try{const r=yield Bx(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.ra.get(l);d&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?Et(d.Zu):o.removedDocuments.size>0&&(Et(d.Zu),d.Zu=!1))}),yield ac(t,r,e)}catch(r){yield up(r)}}),CT.apply(this,arguments)}function iM(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((l,d)=>{const m=d.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(l,d){const m=$e(l);m.onlineState=d;let w=!1;m.queries.forEach((C,x)=>{for(const N of x.listeners)N.Au(d)&&(w=!0)}),w&&_T(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SR(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,me.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),l=o&&o.key;if(l){let d=new Gn(Ve.comparator);d=d.insert(l,Cn.newNoDocument(l,yt.min()));const m=an().add(l),w=new ic(yt.min(),new Map,new Tn(Tt),d,m);yield rM(r,w),r.ia=r.ia.remove(l),r.ra.delete(e),OT(r)}else yield Ym(r.localStore,e,!1).then(()=>ry(r,e,t)).catch(up)}),TT.apply(this,arguments)}function MR(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,me.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield Ux(t.localStore,e);RT(t,r,null),xT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ac(t,o)}catch(o){yield up(o)}}),AT.apply(this,arguments)}function xR(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,me.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(l,d){const m=$e(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(x=>(Et(null!==x),C=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,C))})}(r.localStore,e);RT(r,e,t),xT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ac(r,o)}catch(o){yield up(o)}}),ST.apply(this,arguments)}function MT(){return MT=(0,me.Z)(function*(n,e){const t=$e(n);zd(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=$e(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=ey(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),MT.apply(this,arguments)}function xT(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function RT(n,e,t){const r=$e(n);let o=r.ua[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function ry(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||sM(n,r)})}function sM(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(u0(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),OT(n))}function NT(n,e,t){for(const r of t)r instanceof eM?(n.oa.addReference(r.key,e),NR(n,r)):r instanceof tM?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||sM(n,r.key)):ze()}function NR(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.sa.add(r),OT(n))}function OT(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Ve(zt.fromString(e)),r=n.ca.next();n.ra.set(r,new DR(t)),n.ia=n.ia.insert(t,r),kI(n.remoteStore,new $d(Ls(Ld(t.path)),r,2,us.A))}}function ac(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n,e,t){const r=$e(n),o=[],l=[],d=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{d.push(r.la(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=VC.Ys(w.targetId,C);l.push(x)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(m=(0,me.Z)(function*(w,C){const x=$e(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>le.forEach(C,G=>le.forEach(G.Hs,Y=>x.persistence.referenceDelegate.addReference(N,G.targetId,Y)).next(()=>le.forEach(G.Js,Y=>x.persistence.referenceDelegate.removeReference(N,G.targetId,Y)))))}catch(N){if(!tp(N))throw N;Re("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const G=N.targetId;if(!N.fromCache){const Y=x.ii.get(G),Fe=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);x.ii=x.ii.insert(G,Fe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,l))}),PT.apply(this,arguments)}function OR(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,me.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield OS(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(m=>{m.reject(new Ae(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ac(t,r.hi)}var o}),kT.apply(this,arguments)}function PR(n,e){const t=$e(n),r=t.ra.get(e);if(r&&r.Zu)return an().add(r.key);{let o=an();const l=t.na.get(e);if(!l)return o;for(const d of l){const m=t.ea.get(d);o=o.unionWith(m.view.Ku)}return o}}function kR(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(n,e){const t=$e(n),r=yield RI(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&NT(t,e.targetId,o.Hu),o}),FT.apply(this,arguments)}function FR(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,me.Z)(function*(n,e){const t=$e(n);return LS(t.localStore,e).then(r=>ac(t,r))}),LT.apply(this,arguments)}function LR(n,e,t,r){return VT.apply(this,arguments)}function VT(){return VT=(0,me.Z)(function*(n,e,t,r){const o=$e(n),l=yield function(d,m){const w=$e(d),C=$e(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.fn(x,m).next(N=>N?w.ci.Ks(x,N):le.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield Jm(o.remoteStore):"acknowledged"===t||"rejected"===t?(RT(o,e,r||null),xT(o,e),m=e,$e($e(o.localStore).Bs)._n(m)):ze(),yield ac(o,l)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),VT.apply(this,arguments)}function UT(){return UT=(0,me.Z)(function*(n,e){const t=$e(n);if(HT(t),GT(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield oM(t,r.toArray());t.ha=!0,yield dT(t.remoteStore,!0);for(const l of o)kI(t.remoteStore,l)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(ry(t,d),Ym(t.localStore,d,!0))),u0(t.remoteStore,d)}),yield o,yield oM(t,r),function(l){const d=$e(l);d.ra.forEach((m,w)=>{u0(d.remoteStore,w)}),d.oa.bi(),d.ra=new Map,d.ia=new Gn(Ve.comparator)}(t),t.ha=!1,yield dT(t.remoteStore,!1)}}),UT.apply(this,arguments)}function oM(n,e,t){return BT.apply(this,arguments)}function BT(){return BT=(0,me.Z)(function*(n,e,t){const r=$e(n),o=[],l=[];for(const d of e){let m;const w=r.na.get(d);if(w&&0!==w.length){m=yield Zm(r.localStore,Ls(w[0]));for(const C of w){const x=r.ea.get(C),N=yield kR(r,x);N.snapshot&&l.push(N.snapshot)}}else{const C=yield FS(r.localStore,d);m=yield Zm(r.localStore,C),yield wT(r,aM(C),d,!1)}o.push(m)}return r.ta.Qo(l),o}),BT.apply(this,arguments)}function aM(n){return sC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UR(n){const e=$e(n);return $e($e(e.localStore).persistence).Fs()}function BR(n,e,t,r){return jT.apply(this,arguments)}function jT(){return jT=(0,me.Z)(function*(n,e,t,r){const o=$e(n);if(o.ha)return void Re("SyncEngine","Ignoring unexpected query state notification.");const l=o.na.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const d=yield LS(o.localStore,fI(l[0])),m=ic.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ac(o,d,m);break}case"rejected":yield Ym(o.localStore,e,!0),ry(o,e,r);break;default:ze()}}),jT.apply(this,arguments)}function jR(n,e,t){return $T.apply(this,arguments)}function $T(){return $T=(0,me.Z)(function*(n,e,t){const r=HT(n);if(r.ha){for(const o of e){if(r.na.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const l=yield FS(r.localStore,o),d=yield Zm(r.localStore,l);yield wT(r,aM(l),d.targetId,!1),kI(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield Ym(r.localStore,o,!1).then(()=>{u0(r.remoteStore,o),ry(r,o)}).catch(up))}}),$T.apply(this,arguments)}function HT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SR.bind(null,e),e.ta.Qo=_R.bind(null,e.eventManager),e.ta.fa=vR.bind(null,e.eventManager),e}function GT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xR.bind(null,e),e}class uM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=o0(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return NS(this.persistence,new RS,e.initialUser,this.M)}wa(e){return new Yx(GC.zi,this.M)}_a(e){return new jS}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lM extends uM{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield GT(r.ya.syncEngine),yield Jm(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return NS(this.persistence,new RS,e.initialUser,this.M)}ma(e){return new Rx(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=LC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new FC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HS(),PI(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new jS}}class HR extends lM{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof KC&&(r.sharedClientState.syncEngine={Mr:LR.bind(null,o),Or:BR.bind(null,o),Fr:jR.bind(null,o),Fs:UR.bind(null,o),kr:FR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,me.Z)(function*(d){yield function VR(n,e){return UT.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(e){const t=HS();if(!KC.vt(t))throw new Ae(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class qT{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>iM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=OR.bind(null,r.syncEngine),yield dT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yR}createDatastore(e){const t=o0(e.databaseInfo.databaseId),r=new tR(e.databaseInfo);return new iR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>iM(this.syncEngine,m,0),d=$S.vt()?new $S:new Jx,new oR(t,r,o,l,d);var t,r,o,l,d}createSyncEngine(e,t){return function(r,o,l,d,m,w,C){const x=new bR(r,o,l,d,m,w);return C&&(x.ha=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=$e(t);Re("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Qm(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cM(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class LI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class GR{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Rr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const l=yield e.ba(o);return new ER(JSON.parse(l),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,me.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(l,d){const m=$e(l),w=Vm(m.M)+"/documents",C={documents:d.map(Y=>Jf(m.M,Y))},x=yield m.ho("BatchGetDocuments",w,C),N=new Map;x.forEach(Y=>{const ce=function _C(n,e){return"found"in e?function(t,r){Et(!!r.found);const o=Go(t,r.found.name),l=vr(r.found.updateTime),d=new Yr({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,l,d)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const o=Go(t,r.missing),l=vr(r.readTime);return Cn.newNoDocument(o,l)}(n,e):ze()}(m.M,Y);N.set(ce.key.toString(),ce)});const G=[];return d.forEach(Y=>{const ce=N.get(Y.toString());Et(!!ce),G.push(ce)}),G}),function(l,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Ve.fromPath(o);e.mutations.push(new Hv(l,e.precondition(l)))}),yield(r=(0,me.Z)(function*(o,l){const d=$e(o),m=Vm(d.M)+"/documents",w={writes:l.map(C=>Bm(d.M,C))};yield d.oo("Commit",m,w)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ze();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new Ae(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zR{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new ZC(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,me.Z)(function*(){const t=new qR(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.xa(l)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Od(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!wI(t)}return!1}}class WR{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Zr.UNAUTHENTICATED,this.clientId=_m.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Re("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ey(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function dM(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(l){r.isEqual(l)||(yield OS(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),zT.apply(this,arguments)}function hM(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KT(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>YS(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>YS(e.remoteStore,l)),n.onlineComponents=e}),WT.apply(this,arguments)}function KT(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,me.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield dM(n,new uM)),n.offlineComponents}),ZT.apply(this,arguments)}function VI(n){return YT.apply(this,arguments)}function YT(){return YT=(0,me.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield hM(n,new qT)),n.onlineComponents}),YT.apply(this,arguments)}function fM(n){return KT(n).then(e=>e.persistence)}function QT(n){return KT(n).then(e=>e.localStore)}function pM(n){return VI(n).then(e=>e.remoteStore)}function JT(n){return VI(n).then(e=>e.syncEngine)}function iy(n){return XT.apply(this,arguments)}function XT(){return XT=(0,me.Z)(function*(n){const e=yield VI(n),t=e.eventManager;return t.onListen=CR.bind(null,e.syncEngine),t.onUnlisten=TR.bind(null,e.syncEngine),t}),XT.apply(this,arguments)}function gM(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,l,d,m,w){const C=new LI({next:N=>{l.enqueueAndForget(()=>mT(o,x));const G=N.docs.has(d);!G&&N.fromCache?w.reject(new Ae(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new vT(Ld(d.path),C,{includeMetadataChanges:!0,Cu:!0});return pT(o,x)}(yield iy(n),n.asyncQueue,e,t,r)})),r.promise}function mM(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,l,d,m,w){const C=new LI({next:N=>{l.enqueueAndForget(()=>mT(o,x)),N.fromCache&&"server"===m.source?w.reject(new Ae(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new vT(d,C,{includeMetadataChanges:!0,Cu:!0});return pT(o,x)}(yield iy(n),n.asyncQueue,e,t,r)})),r.promise}const yM=new Map;function eA(n,e,t){if(!t)throw new Ae(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _M(n,e,t,r){if(!0===e&&!0===r)throw new Ae(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vM(n){if(!Ve.isDocumentKey(n))throw new Ae(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EM(n){if(Ve.isDocumentKey(n))throw new Ae(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ze()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=UI(n);throw new Ae(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wM(n,e){if(e<=0)throw new Ae(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class IM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_M("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class l0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IM({}),this._settingsFrozen=!1,e instanceof Ra?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mm;switch(t.type){case"gapi":const r=t.client;return Et(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new qw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yM.get(e);t&&(Re("ComponentProvider","Removing Datastore"),yM.delete(e),t.terminate())}(this),Promise.resolve()}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ku(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class ku extends Vi{constructor(e,t,r){super(e,t,Ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Ve(e))}withConverter(e){return new ku(this.firestore,e,this._path)}}function DM(n,e,...t){if(n=(0,jt.m9)(n),eA("collection","path",e),n instanceof l0){const r=zt.fromString(e,...t);return EM(r),new ku(n,null,r)}{if(!(n instanceof Ln||n instanceof ku))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return EM(r),new ku(n.firestore,null,r)}}function BI(n,e,...t){if(n=(0,jt.m9)(n),1===arguments.length&&(e=_m.R()),eA("doc","path",e),n instanceof l0){const r=zt.fromString(e,...t);return vM(r),new Ln(n,null,new Ve(r))}{if(!(n instanceof Ln||n instanceof ku))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return vM(r),new Ln(n.firestore,n instanceof ku?n.converter:null,new Ve(r))}}function bM(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),(n instanceof Ln||n instanceof ku)&&(e instanceof Ln||e instanceof ku)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function CM(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),n instanceof Vi&&e instanceof Vi&&n.firestore===e.firestore&&Hf(n._query,e._query)&&n.converter===e.converter}class iN{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new ZC(this,"async_queue_retry"),this.qa=()=>{const t=PI();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=PI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=PI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Rr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,me.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!tp(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Nn("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=fT.createAndSchedule(this,e,t,r,l=>this.ja(l));return this.Fa.push(o),o}Ka(){this.$a&&ze()}verifyOperationInProgress(){}Wa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function tA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class sN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qn extends l0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new iN,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||TM(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||TM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TM(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nC(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new WR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function AM(n,e,t){const r=new Rr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield dM(n,t),yield hM(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===oe.FAILED_PRECONDITION||l.code===oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function SM(n){if(n._initialized||n._terminated)throw new Ae(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fu(_r.fromBase64String(e))}catch(t){throw new Ae(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fu(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cp{constructor(e){this._methodName=e}}class jI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const gN=/^__.*__$/;class mN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wf(e,this.data,t,this.fieldTransforms)}}class MM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze()}}class $I{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new $I(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return qI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(xM(this.Xa)&&gN.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class yN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||o0(e)}ac(e,t,r,o=!1){return new $I({Xa:e,methodName:t,uc:r,path:Nr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function dp(n){const e=n._freezeSettings(),t=o0(n._databaseId);return new yN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HI(n,e,t,r,o,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,e,t,o);sA("Data must be an object, but it was:",d,r);const m=OM(r,d);let w,C;if(l.merge)w=new Wl(d.fieldMask),C=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const N of l.mergeFields){const G=oA(e,N,t);if(!d.contains(G))throw new Ae(oe.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);kM(x,G)||x.push(G)}w=new Wl(x),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new mN(new Yr(m),w,C)}class c0 extends cp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof c0}}function RM(n,e,t){return new $I({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class nA extends cp{_toFieldTransform(e){return new qf(e.path,new Jl)}isEqual(e){return e instanceof nA}}class _N extends cp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=RM(this,e,!0),r=this.cc.map(l=>hp(l,t)),o=new Xl(r);return new qf(e.path,o)}isEqual(e){return this===e}}class vN extends cp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=RM(this,e,!0),r=this.cc.map(l=>hp(l,t)),o=new ec(r);return new qf(e.path,o)}isEqual(e){return this===e}}class EN extends cp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Us(e.M,gI(e.M,this.hc));return new qf(e.path,t)}isEqual(e){return this===e}}function rA(n,e,t,r){const o=n.ac(1,e,t);sA("Data must be an object, but it was:",o,r);const l=[],d=Yr.empty();zl(r,(w,C)=>{const x=GI(e,w,t);C=(0,jt.m9)(C);const N=o.sc(x);if(C instanceof c0)l.push(x);else{const G=hp(C,N);null!=G&&(l.push(x),d.set(x,G))}});const m=new Wl(l);return new MM(d,m,o.fieldTransforms)}function iA(n,e,t,r,o,l){const d=n.ac(1,e,t),m=[oA(e,r,t)],w=[o];if(l.length%2!=0)throw new Ae(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<l.length;G+=2)m.push(oA(e,l[G])),w.push(l[G+1]);const C=[],x=Yr.empty();for(let G=m.length-1;G>=0;--G)if(!kM(C,m[G])){const Y=m[G];let ce=w[G];ce=(0,jt.m9)(ce);const Fe=d.sc(Y);if(ce instanceof c0)C.push(Y);else{const it=hp(ce,Fe);null!=it&&(C.push(Y),x.set(Y,it))}}const N=new Wl(C);return new MM(x,N,d.fieldTransforms)}function NM(n,e,t,r=!1){return hp(t,n.ac(r?4:3,e))}function hp(n,e){if(PM(n=(0,jt.m9)(n)))return sA("Unsupported field value:",e,n),OM(n,e);if(n instanceof cp)return function(t,r){if(!xM(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const d of t){let m=hp(d,r.ic(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gI(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Fn.fromDate(t);return{timestampValue:Qf(r.M,o)}}if(t instanceof Fn){const o=new Fn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qf(r.M,o)}}if(t instanceof jI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fu)return{bytesValue:DI(r.M,t._byteString)};if(t instanceof Ln){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:km(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${UI(t)}`)}(n,e)}function OM(n,e){const t={};return Kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zl(n,(r,o)=>{const l=hp(o,e.tc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function PM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof jI||n instanceof Fu||n instanceof Ln||n instanceof cp)}function sA(n,e,t){if(!PM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=UI(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function oA(n,e,t){if((e=(0,jt.m9)(e))instanceof uc)return e._internalPath;if("string"==typeof e)return GI(n,e);throw qI("Field path arguments must be of type string or ",n,!1,void 0,t)}const wN=new RegExp("[~\\*/\\[\\]]");function GI(n,e,t){if(e.search(wN)>=0)throw qI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uc(...e.split("."))._internalPath}catch(r){throw qI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qI(n,e,t,r,o){const l=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(l||d)&&(w+=" (found",l&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Ae(oe.INVALID_ARGUMENT,m+n+w)}function kM(n,e){return n.some(t=>t.isEqual(e))}class d0{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new IN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class IN extends d0{data(){return super.data()}}function zI(n,e){return"string"==typeof e?GI(n,e):e instanceof uc?e._internalPath:e._delegate._internalPath}class fp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends d0{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new h0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class h0 extends lc{data(e={}){return super.data(e)}}class Kd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new fp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new h0(this._firestore,this._userDataWriter,r.key,r,new fp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new h0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new fp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new h0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new fp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),C=l.indexOf(d.doc.key)),{type:DN(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze()}}function FM(n,e){return n instanceof lc&&e instanceof lc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kd&&e instanceof Kd&&n._firestore===e._firestore&&CM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function LM(n){if(Vd(n)&&0===n.explicitOrderBy.length)throw new Ae(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f0{}function Zd(n,...e){for(const t of e)n=t._apply(n);return n}class bN extends f0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=dp(e.firestore),r=function(o,l,d,m,w,C,x){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){HM(x,C);const Y=[];for(const ce of x)Y.push($M(m,o,ce));N={arrayValue:{values:Y}}}else N=$M(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||HM(x,C),N=NM(d,"where",x,"in"===C||"not-in"===C);const G=pi.create(w,C,N);return function(Y,ce){if(ce.S()){const it=cI(Y);if(null!==it&&!it.isEqual(ce.field))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${it.toString()}' and '${ce.field.toString()}'`);const Wt=Fv(Y);null!==Wt&&GM(0,ce.field,Wt)}const Fe=function(it,Wt){for(const Kt of it.filters)if(Wt.indexOf(Kt.op)>=0)return Kt.op;return null}(Y,function(it){switch(it){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ce.op));if(null!==Fe)throw new Ae(oe.INVALID_ARGUMENT,Fe===ce.op?`Invalid query. You cannot use more than one '${ce.op.toString()}' filter.`:`Invalid query. You cannot use '${ce.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,G),G}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Vi(e.firestore,e.converter,function(o,l){const d=o.filters.concat([l]);return new Ho(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class TN extends f0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new jf(o,l);return function(m,w){if(null===Fv(m)){const C=cI(m);null!==C&&GM(0,C,w.field)}}(r,d),d}(e._query,this.lc,this._c);return new Vi(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Ho(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class VM extends f0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Vi(e.firestore,e.converter,hI(e._query,this.wc,this.mc))}}class UM extends f0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=jM(e,this.type,this.gc,this.yc);return new Vi(e.firestore,e.converter,(o=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class BM extends f0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=jM(e,this.type,this.gc,this.yc);return new Vi(e.firestore,e.converter,(o=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function jM(n,e,t,r){if(t[0]=(0,jt.m9)(t[0]),t[0]instanceof d0)return function(o,l,d,m,w){if(!m)throw new Ae(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of $f(o))if(x.field.isKeyField())C.push(Pd(l,m.key));else{const N=m.data.field(x.field);if(Cv(N))throw new Ae(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const G=x.field.canonicalString();throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}C.push(N)}return new ka(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=dp(n.firestore);return function(l,d,m,w,C,x){const N=l.explicitOrderBy;if(C.length>N.length)throw new Ae(oe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let Y=0;Y<C.length;Y++){const ce=C[Y];if(N[Y].field.isKeyField()){if("string"!=typeof ce)throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ce}`);if(!dI(l)&&-1!==ce.indexOf("/"))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ce}' contains a slash.`);const Fe=l.path.child(zt.fromString(ce));if(!Ve.isDocumentKey(Fe))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const it=new Ve(Fe);G.push(Pd(d,it))}else{const Fe=NM(m,w,ce);G.push(Fe)}}return new ka(G,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function $M(n,e,t){if("string"==typeof(t=(0,jt.m9)(t))){if(""===t)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dI(e)&&-1!==t.indexOf("/"))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!Ve.isDocumentKey(r))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pd(n,new Ve(r))}if(t instanceof Ln)return Pd(n,t._key);throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${UI(t)}.`)}function HM(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function GM(n,e,t){if(!t.isEqual(e))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class aA{convertValue(e,t="none"){switch(Kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ze()}}convertObject(e,t){const r={};return zl(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new jI(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=fi(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bo(e));default:return null}}convertTimestamp(e){const t=xa(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Et(a(r));const o=new Ra(r.get(1),r.get(3)),l=new Ve(r.popFirst(5));return o.isEqual(t)||Nn(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function WI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PN extends aA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}class qM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dp(e)}set(e,t,r){this._verifyNotCommitted();const o=Yd(e,this._firestore),l=WI(o.converter,t,r),d=HI(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,sr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=Yd(e,this._firestore);let d;return d="string"==typeof(t=(0,jt.m9)(t))||t instanceof uc?iA(this._dataReader,"WriteBatch.update",l._key,t,r,o):rA(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yd(e,this._firestore);return this._mutations=this._mutations.concat(new Bd(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yd(n,e){if((n=(0,jt.m9)(n)).firestore!==e)throw new Ae(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pp extends aA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function zM(n,e,t){n=en(n,Ln);const r=en(n.firestore,qn),o=WI(n.converter,e,t);return sy(r,[HI(dp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,sr.none())])}function WM(n,e,t,...r){n=en(n,Ln);const o=en(n.firestore,qn),l=dp(o);let d;return d="string"==typeof(e=(0,jt.m9)(e))||e instanceof uc?iA(l,"updateDoc",n._key,e,t,r):rA(l,"updateDoc",n._key,e),sy(o,[d.toMutation(n._key,sr.exists(!0))])}function KM(n,...e){var t,r,o;n=(0,jt.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||tA(e[d])||(l=e[d],d++);const m={includeMetadataChanges:l.includeMetadataChanges};if(tA(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,x;if(n instanceof Ln)C=en(n.firestore,qn),x=Ld(n._key.path),w={next:N=>{e[d]&&e[d](uA(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=en(n,Vi);C=en(N.firestore,qn),x=N._query;const G=new pp(C);w={next:Y=>{e[d]&&e[d](new Kd(C,G,N,Y))},error:e[d+1],complete:e[d+2]},LM(n._query)}return function(N,G,Y,ce){const Fe=new LI(ce),it=new vT(G,Fe,Y);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return pT(yield iy(N),it)})),()=>{Fe.Ia(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return mT(yield iy(N),it)}))}}(Or(C),x,m,w)}function sy(n,e){return function(t,r){const o=new Rr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function AR(n,e,t){return bT.apply(this,arguments)}(yield JT(t),r,o)})),o.promise}(Or(n),e)}function uA(n,e,t){const r=t.docs.get(e._key),o=new pp(n);return new lc(n,o,e._key,r,new fp(t.hasPendingWrites,t.fromCache),e.converter)}class GN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dp(e)}get(e){const t=Yd(e,this._firestore),r=new PN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ze();const l=o[0];if(l.isFoundDocument())return new d0(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new d0(this._firestore,r,t._key,null,t.converter);throw ze()})}set(e,t,r){const o=Yd(e,this._firestore),l=WI(o.converter,t,r),d=HI(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const l=Yd(e,this._firestore);let d;return d="string"==typeof(t=(0,jt.m9)(t))||t instanceof uc?iA(this._dataReader,"Transaction.update",l._key,t,r,o):rA(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=Yd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yd(e,this._firestore),r=new pp(this._firestore);return super.get(e).then(o=>new lc(this._firestore,r,t._key,o._document,new fp(!1,!1),t.converter))}}function lA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YM(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function QM(){if(!function Yw(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Rd=Ol.SDK_VERSION,(0,Ol._registerComponent)(new pd.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new qn(o,new tC(t.getProvider("auth-internal")),new zw(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Ol.registerVersion)(Hw,"3.4.8",n),(0,Ol.registerVersion)(Hw,"3.4.8","esm2017")}();class p0{constructor(e){this._delegate=e}static fromBase64String(e){return QM(),new p0(Fu.fromBase64String(e))}static fromUint8Array(e){return YM(),new p0(Fu.fromUint8Array(e))}toBase64(){return QM(),this._delegate.toBase64()}toUint8Array(){return YM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cA(n){return function XN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class eO{enableIndexedDbPersistence(e,t){return function aN(n,e){SM(n=en(n,qn));const t=Or(n),r=n._freezeSettings(),o=new qT;return AM(t,o,new lM(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function uN(n){SM(n=en(n,qn));const e=Or(n),t=n._freezeSettings(),r=new qT;return AM(e,r,new HR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lN(n){if(n._initialized&&!n._terminated)throw new Ae(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Fa.vt())return Promise.resolve();const o=r+"main";yield Fa.delete(o)}),function(r){return t.apply(this,arguments)})(LC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ra||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function nN(n,e,t,r={}){var o;const l=(n=en(n,l0))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Rf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Zr.MOCK_USER;else{d=(0,jt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Zr(w)}n._authCredentials=new eC(new Of(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function dN(n){return function KR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield fM(n),t=yield pM(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.fu.delete(0),a0(o)}(t)}))}(Or(n=en(n,qn)))}(this._delegate)}disableNetwork(){return function hN(n){return function ZR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield fM(n),t=yield pM(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const l=$e(o);l.fu.add(0),yield Qm(l),l.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Or(n=en(n,qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_M("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function cN(n){return function(e){const t=new Rr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function RR(n,e){return MT.apply(this,arguments)}(yield JT(e),t)})),t.promise}(Or(n=en(n,qn)))}(this._delegate)}onSnapshotsInSync(e){return function HN(n,e){return function JR(n,e){const t=new LI(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield iy(n),o=t,$e(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield iy(n),o=t,void $e(r).Eu.delete(o);var r,o}))}}(Or(n=en(n,qn)),tA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oy(this,DM(this._delegate,e))}catch(t){throw cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new qo(this,BI(this._delegate,e))}catch(t){throw cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ds(this,function rN(n,e){if(n=en(n,l0),eA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vi(n,null,(t=e,new Ho(zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function qN(n,e){return function XR(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const r=yield(o=n,VI(o).then(l=>l.datastore));var o;new zR(n.asyncQueue,r,e,t).run()})),t.promise}(Or(n=en(n,qn)),t=>e(new GN(n,t)))}(this._delegate,t=>e(new XM(this,t)))}batch(){return Or(this._delegate),new ex(new qM(this._delegate,e=>sy(this._delegate,e)))}loadBundle(e){return function fN(n,e){const t=Or(n=en(n,qn)),r=new sN;return function eN(n,e,t,r){const o=function(l,d){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,C){if(w instanceof Uint8Array)return cM(w,C);if(w instanceof ArrayBuffer)return cM(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new GR(w,d);var w}(t,o0(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function $R(n,e,t){const r=$e(n);var o;(o=(0,me.Z)(function*(l,d,m){try{const w=yield d.getMetadata();if(yield function(G,Y){const ce=$e(G),Fe=vr(Y.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",it=>ce._s.getBundleMetadata(it,Y.id)).then(it=>!!it&&it.createTime.compareTo(Fe)>=0)}(l.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(G=w).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);m._updateProgress(XS(w));const C=new wR(w,l.localStore,d.M);let x=yield d.da();for(;x;){const G=yield C.ku(x);G&&m._updateProgress(G),x=yield d.da()}const N=yield C.complete();return yield ac(l,N.Fu,void 0),yield function(G,Y){const ce=$e(G);return ce.persistence.runTransaction("Save bundle","readwrite",Fe=>ce._s.saveBundleMetadata(Fe,Y))}(l.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(w){return Rf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var G}),function(l,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield JT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function pN(n,e){return function tN(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",l=>o._s.getNamedQuery(l,r))}(yield QT(n),e)}))}(Or(n=en(n,qn)),e).then(t=>t?new Vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ds(this,t):null)}}class KI extends aA{constructor(e){super(),this.firestore=e}convertBytes(e){return new p0(new Fu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return qo.forKey(t,this.firestore,null)}}class XM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new KI(e)}get(e){const t=mp(e);return this._delegate.get(t).then(r=>new g0(this._firestore,new lc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=mp(e);return r?(lA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=mp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}}class ex{constructor(e){this._delegate=e}set(e,t,r){const o=mp(e);return r?(lA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=mp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new h0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new m0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=gp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new gp(e,new KI(e),t),o.set(t,l)),l}}gp.INSTANCES=new WeakMap;class qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qo(t,new Ln(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new qo(t,new Ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oy(this.firestore,DM(this._delegate,e))}catch(t){throw cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,jt.m9)(e))instanceof Ln&&bM(this._delegate,e)}set(e,t){t=lA("DocumentReference.set",t);try{return t?zM(this._delegate,e,t):zM(this._delegate,e)}catch(r){throw cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WM(this._delegate,e):WM(this._delegate,e,t,...r)}catch(o){throw cs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function jN(n){return sy(en(n.firestore,qn),[new Bd(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=tx(e),r=nx(e,o=>new g0(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return KM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function FN(n){n=en(n,Ln);const e=en(n.firestore,qn),t=Or(e),r=new pp(e);return function YR(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,l,d){try{const m=yield function(w,C){const x=$e(w);return x.persistence.runTransaction("read document","readonly",N=>x.ci.Ls(N,C))}(o,l);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Ae(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=ey(m,`Failed to get document '${l} from cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield QT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new lc(e,r,n._key,o,new fp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function LN(n){n=en(n,Ln);const e=en(n.firestore,qn);return gM(Or(e),n._key,{source:"server"}).then(t=>uA(e,n,t))}(this._delegate):function kN(n){n=en(n,Ln);const e=en(n.firestore,qn);return gM(Or(e),n._key).then(t=>uA(e,n,t))}(this._delegate),t.then(r=>new g0(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qo(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function cs(n,e,t){return n.message=n.message.replace(e,t),n}function tx(n){for(const e of n)if("object"==typeof e&&!cA(e))return e;return{}}function nx(n,e){var t,r;let o;return o=cA(n[0])?n[0]:cA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class g0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FM(this._delegate,e._delegate)}}class m0 extends g0{data(e){const t=this._delegate.data(e);return function bv(n,e){n||ze()}(void 0!==t),t}}class ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KI(e)}where(e,t,r){try{return new ds(this.firestore,Zd(this._delegate,function CN(n,e,t){const r=e,o=zI("where",n);return new bN(o,r,t)}(e,t,r)))}catch(o){throw cs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ds(this.firestore,Zd(this._delegate,function AN(n,e="asc"){const t=e,r=zI("orderBy",n);return new TN(r,t)}(e,t)))}catch(r){throw cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ds(this.firestore,Zd(this._delegate,function SN(n){return wM("limit",n),new VM("limit",n,"F")}(e)))}catch(t){throw cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ds(this.firestore,Zd(this._delegate,function MN(n){return wM("limitToLast",n),new VM("limitToLast",n,"L")}(e)))}catch(t){throw cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ds(this.firestore,Zd(this._delegate,function xN(...n){return new UM("startAt",n,!0)}(...e)))}catch(t){throw cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ds(this.firestore,Zd(this._delegate,function RN(...n){return new UM("startAfter",n,!1)}(...e)))}catch(t){throw cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ds(this.firestore,Zd(this._delegate,function NN(...n){return new BM("endBefore",n,!1)}(...e)))}catch(t){throw cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ds(this.firestore,Zd(this._delegate,function ON(...n){return new BM("endAt",n,!0)}(...e)))}catch(t){throw cs(t,"endAt()","Query.endAt()")}}isEqual(e){return CM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function UN(n){n=en(n,Vi);const e=en(n.firestore,qn),t=Or(e),r=new pp(e);return function QR(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,l,d){try{const m=yield RI(o,l,!0),w=new nM(l,m.li),C=w.Gu(m.documents),x=w.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const w=ey(m,`Failed to execute query '${l} against cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield QT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Kd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function BN(n){n=en(n,Vi);const e=en(n.firestore,qn),t=Or(e),r=new pp(e);return mM(t,n._query,{source:"server"}).then(o=>new Kd(e,r,n,o))}(this._delegate):function VN(n){n=en(n,Vi);const e=en(n.firestore,qn),t=Or(e),r=new pp(e);return LM(n._query),mM(t,n._query).then(o=>new Kd(e,r,n,o))}(this._delegate),t.then(r=>new dA(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=tx(e),r=nx(e,o=>new dA(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return KM(this._delegate,t,r)}withConverter(e){return new ds(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}class nO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new m0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new m0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new m0(this._firestore,r))})}isEqual(e){return FM(this._delegate,e._delegate)}}class oy extends ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qo(this.firestore,e):null}doc(e){try{return new qo(this.firestore,void 0===e?BI(this._delegate):BI(this._delegate,e))}catch(t){throw cs(t,"doc()","CollectionReference.doc()")}}add(e){return function $N(n,e){const t=en(n.firestore,qn),r=BI(n),o=WI(n.converter,e);return sy(t,[HI(dp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new qo(this.firestore,t))}isEqual(e){return bM(this._delegate,e._delegate)}withConverter(e){return new oy(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function mp(n){return en(n,Ln)}class hA{constructor(...e){this._delegate=new uc(...e)}static documentId(){return new hA(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,jt.m9)(e))instanceof uc&&this._delegate._internalPath.isEqual(e._internalPath)}}class yp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WN(){return new nA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yp(e)}static delete(){const e=function zN(){return new c0("deleteField")}();return e._methodName="FieldValue.delete",new yp(e)}static arrayUnion(...e){const t=function KN(...n){return new _N("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yp(t)}static arrayRemove(...e){const t=function ZN(...n){return new vN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yp(t)}static increment(e){const t=function YN(n){return new EN("increment",n)}(e);return t._methodName="FieldValue.increment",new yp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rO={Firestore:JM,GeoPoint:jI,Timestamp:Fn,Blob:p0,Transaction:XM,WriteBatch:ex,DocumentReference:qo,DocumentSnapshot:g0,Query:ds,QueryDocumentSnapshot:m0,QuerySnapshot:dA,CollectionReference:oy,FieldPath:hA,FieldValue:yp,setLogLevel:function tO(n){!function Xb(n){Nu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function rx(n,e){return function oO(n,e=_b.z){return new gn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function fA(n,e){return rx(n,e).pipe((0,Dt.U)(t=>({payload:t,type:"query"})))}function ZI(n,e){return fA(n,e).pipe(Mo(void 0),Fg(),(0,Dt.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),l}))}function ix(n,e,t){return ZI(n,t).pipe(mu((r,o)=>function uO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return pA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function vb(n,e=pr.y){return n=null!=n?n:mr,(0,on.e)((t,r)=>{let o,l=!0;t.subscribe((0,mn.x)(r,d=>{const m=e(d);(l||!n(o,m))&&(l=!1,o=m,r.next(d))}))})}(),(0,Dt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function pA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function sx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function sO(n){(function iO(n,e){n.INTERNAL.registerComponent(new pd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},rO)))})(n,(e,t)=>new JM(e,t,new eO)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(wb.Z);class ox{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Mo(void 0),Fg(),ao(([r,o])=>o.length>0||!r),(0,Dt.U)(([r,o])=>o),gr.iC)}auditTrail(e){return this.stateChanges(e).pipe(mu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sx(e);return ix(this.query,t,this.afs.schedulers.outsideAngular).pipe(gr.iC)}valueChanges(e={}){return fA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gr.iC)}get(e){return(0,Mn.D)(this.query.get(e)).pipe(gr.iC)}add(e){return this.ref.add(e)}doc(e){return new ax(this.ref.doc(e),this.afs)}}class ax{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=cx(r,t);return new ox(o,l,this.afs)}snapshotChanges(){return function aO(n,e){return rx(n,e).pipe(Mo(void 0),Fg(),(0,Dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Mn.D)(this.ref.get(e)).pipe(gr.iC)}}class cO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ao(t=>t.length>0),gr.iC):ZI(this.query,this.afs.schedulers.outsideAngular).pipe(gr.iC)}auditTrail(e){return this.stateChanges(e).pipe(mu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sx(e);return ix(this.query,t,this.afs.schedulers.outsideAngular).pipe(gr.iC)}valueChanges(e={}){return fA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),gr.iC)}get(e){return(0,Mn.D)(this.query.get(e)).pipe(gr.iC)}}const ux=new g.OlP("angularfire2.enableFirestorePersistence"),lx=new g.OlP("angularfire2.firestore.persistenceSettings"),dO=new g.OlP("angularfire2.firestore.settings"),hO=new g.OlP("angularfire2.firestore.use-emulator");function cx(n,e=(t=>t)){return{query:e(n),ref:n}}let dx=(()=>{class n{constructor(t,r,o,l,d,m,w,C,x,N,G,Y,ce,Fe,it,Wt,Kt){this.schedulers=w;const Qt=(0,ks.on)(t,m,r),Nt=x;N&&A_(Qt,m,G,ce,Fe,it,Y,Wt),[this.firestore,this.persistenceEnabled$]=(0,ks.cc)(`${Qt.name}.firestore`,"AngularFirestore",Qt.name,()=>{const Zt=m.runOutsideAngular(()=>Qt.firestore());if(l&&Zt.settings(l),Nt&&Zt.useEmulator(...Nt),o&&!nr(d)){const hn=()=>{try{return(0,Mn.D)(Zt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Ui){return"undefined"!=typeof console&&console.warn(Ui),tt(!1)}};return[Zt,m.runOutsideAngular(hn)]}return[Zt,tt(!1)]},[l,Nt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=cx(o,r),m=this.schedulers.ngZone.run(()=>l);return new ox(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),l=this.firestore.collectionGroup(t);return new cO(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new ax(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ks.Dh),g.LFG(ks.xv,8),g.LFG(ux,8),g.LFG(dO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gr.HU),g.LFG(lx,8),g.LFG(hO,8),g.LFG(ZE,8),g.LFG(w_,8),g.LFG(I_,8),g.LFG(D_,8),g.LFG(b_,8),g.LFG(C_,8),g.LFG(T_,8),g.LFG(Pg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fO=(()=>{class n{constructor(){kg.Z.registerVersion("angularfire",gr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ux,useValue:!0},{provide:lx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[dx]}),n})();const hx_firebaseConfig={apiKey:"AIzaSyAouYaWF-KcP1P73-dMk6-rJXJ_iz7_2DY",authDomain:"angular-firebase-multiplo.firebaseapp.com",projectId:"angular-firebase-multiplo",storageBucket:"angular-firebase-multiplo.appspot.com",messagingSenderId:"643620287480",appId:"1:643620287480:web:a5970edcb1063d32a59c0d"};let fx=(()=>{class n{constructor(t){this.angularFirestore=t}getMultiplos(){return this.angularFirestore.collection("multiplos").snapshotChanges()}registerMultiplo(t){return new Promise((r,o)=>{this.angularFirestore.collection("multiplos").add(t).then(l=>{r(l)})})}changeColorText(t){return 3===t[0]?"text-success":5===t[0]?"text-danger":7===t[0]?"text-primary":""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(dx))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pO(n,e){if(1&n&&(g.TgZ(0,"div",11)(1,"strong"),g._uU(2),g.qZA()()),2&n){const t=g.oxw();g.Tol(t.textColor),g.xp6(2),g.AsE("Resultado: ",t.multiploForm.value.entrada," [",t.result,"]")}}function gO(n,e){if(1&n&&(g.TgZ(0,"div",12),g._uU(1),g._UZ(2,"button",13),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij(" ",t.messageAlert," ")}}let mO=(()=>{class n{constructor(t,r){this.fb=t,this.multiploService=r,this.multiploForm=this.fb.group({input:[0,Ri.required]}),this.multiplos=[3,5,7],this.textColor="",this.result=[],this.history=[],this.messageAlert=""}ngOnInit(){}verifyMultiplo(){const{input:t}=this.multiploForm.value;0!==t?(this.result=[],this.messageAlert="",this.multiplos.forEach(r=>{t%r==0&&(this.result.push(r),this.textColor=this.multiploService.changeColorText(this.result))}),this.result.length>0?this.saveMultiplo(t):this.messageAlert=`No hay m\xfaltiplo para el valor ${t} que ingreso`):alert("Ingrese un n\xfamero mayor a 0")}saveMultiplo(t){var r=this;return(0,me.Z)(function*(){try{const o={number:t,multiplos:r.result};yield r.multiploService.registerMultiplo(o)}catch(o){console.log(o)}})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Zc),g.Y36(fx))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-form-multiplo"]],decls:16,vars:4,consts:[[1,"w-100","vh-100","container","d-flex","justify-content-center","align-items-center"],[1,"text-center","mb-3"],["routerLink","/list-multiplos",1,"btn","btn-primary"],[1,"card","p-5","shadow-lg","bg-body","rounded"],[1,"h4"],[1,"mt-3",3,"formGroup","ngSubmit"],[1,"d-flex","align-items-center"],["type","number","placeholder","Ingrese el n\xfamero","formControlName","input",1,"form-control","me-1"],["type","submit",1,"btn","btn-primary"],["class","mt-3 border p-3 rounded",3,"class",4,"ngIf"],["class","alert alert-warning alert-dismissible fade show mt-3","role","alert",4,"ngIf"],[1,"mt-3","border","p-3","rounded"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show","mt-3"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"a",2),g._uU(4,"Listado de los n\xfameros comprobados"),g.qZA()(),g.TgZ(5,"div",3)(6,"h2",4),g._uU(7),g.qZA(),g._UZ(8,"hr"),g.TgZ(9,"form",5),g.NdJ("ngSubmit",function(){return r.verifyMultiplo()}),g.TgZ(10,"div",6),g._UZ(11,"input",7),g.TgZ(12,"button",8),g._uU(13,"Verificar"),g.qZA()()(),g.YNc(14,pO,3,4,"div",9),g.YNc(15,gO,3,1,"div",10),g.qZA()()()),2&t&&(g.xp6(7),g.hij("Buscar el m\xfaltiplo de ",r.multiplos,""),g.xp6(2),g.Q6J("formGroup",r.multiploForm),g.xp6(5),g.Q6J("ngIf",r.result.length>0),g.xp6(1),g.Q6J("ngIf",""!==r.messageAlert))},directives:[zh,Fp,Xi,jc,yh,bo,ul,$c,ti],styles:[""]}),n})();function yO(n,e){if(1&n&&(g.TgZ(0,"tr")(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td")(4,"b"),g._uU(5),g.qZA()()()),2&n){const t=e.$implicit,r=g.oxw();g.xp6(2),g.Oqu(t.number),g.xp6(2),g.Tol(r.getColorText(t.multiplos)),g.xp6(1),g.hij(" [",t.multiplos,"] ")}}const _O=[{path:"",component:mO,pathMatch:"full"},{path:"list-multiplos",component:(()=>{class n{constructor(t){this.multiploService=t,this.multiplos=[]}ngOnInit(){this.multiploService.getMultiplos().subscribe(t=>{const r=t.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data()));this.multiplos=r})}getColorText(t){return this.multiploService.changeColorText(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(fx))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-list-multiplos"]],decls:15,vars:1,consts:[[1,"w-100","vh-100","container","d-flex","justify-content-center"],[1,"text-center","my-3"],["routerLink","/",1,"btn","btn-primary"],[1,"card","shadow","p-2","mb-5"],[1,"table","table-borderless","text-center","table-bordered"],[1,"table-primary"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"a",2),g._uU(4,"Regresar"),g.qZA()(),g.TgZ(5,"div",3)(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),g._uU(10,"N\xfamero ingresado"),g.qZA(),g.TgZ(11,"th",6),g._uU(12,"M\xfaltiplos"),g.qZA()()(),g.TgZ(13,"tbody"),g.YNc(14,yO,6,4,"tr",7),g.qZA()()()()()),2&t&&(g.xp6(14),g.Q6J("ngForOf",r.multiplos))},directives:[zh,tr],styles:[""]}),n})()},{path:"**",redirectTo:""}];let vO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[pE.forRoot(_O)],pE]}),n})(),EO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[_E]}),n.\u0275inj=g.cJS({providers:[],imports:[[ta,vO,fr,ks.hO.initializeApp(hx_firebaseConfig),yb,fO]]}),n})();(0,g.G48)(),zu().bootstrapModule(EO).catch(n=>console.error(n))},5867:(st,Ce,P)=>{P.d(Ce,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.7.0","app")},127:(st,Ce,P)=>{P.d(Ce,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.7.0","app-compat")},820:(st,Ce,P)=>{P.r(Ce);var g=P(5861),W=P(3942),O=P(2090),se=P(9681),J=P(655),fe=P(1877),re=P(4859);const Me=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new fe.Yd("@firebase/auth");function We(y,...h){Je.logLevel<=fe.in.ERROR&&Je.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Ue(y,...h)}function ye(y,...h){return Ue(y,...h)}function _e(y,h,p){const v=Object.assign(Object.assign({},Pe()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),_e(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function te(y,h,...p){if(!y)throw Ue(h,...p)}function qe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw We(h),new Error(h)}function Q(y,h){y||qe(h)}const ie=new Map;function X(y){Q(y instanceof Function,"Expected a class definition");let h=ie.get(y);return h?(Q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ie.set(y,h),h)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function vt(){return"http:"===$t()||"https:"===$t()}function $t(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ft{constructor(h,p){this.shortDelay=h,this.longDelay=p,Q(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function tn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zn(y,h){Q(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class En{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},yi=new Ft(3e4,6e4);function Gt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Lt(y,h,p,v){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(y,h,p,v,T={}){return Jr(y,T,(0,g.Z)(function*(){let R={},H={};v&&("GET"===h?H=v:R={body:JSON.stringify(v)});const ne=(0,O.xO)(Object.assign({key:y.config.apiKey},H)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),En.fetch()(wr(y,y.config.apiHost,p,ne),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Jr(y,h,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Yt),h);try{const T=new Bi(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const H=yield R.json();if("needConfirmation"in H)throw ji(y,"account-exists-with-different-credential",H);if(R.ok&&!("errorMessage"in H))return H;{const ne=R.ok?H.errorMessage:H.error.message,[ke,Qe]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw ji(y,"credential-already-in-use",H);if("EMAIL_EXISTS"===ke)throw ji(y,"email-already-in-use",H);const pt=v[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw _e(y,pt,Qe);De(y,pt)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function Er(y,h,p,v){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(y,h,p,v,T={}){const R=yield Lt(y,h,p,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function wr(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?zn(y.config,T):`${y.config.apiScheme}://${T}`}class Bi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),yi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ji(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=ye(y,h,v);return T.customData._tokenResponse=p,T}function Pr(){return(Pr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Wn(y,h){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Xr(y,h){return js.apply(this,arguments)}function js(){return(js=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function fn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function zo(){return(zo=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),T=rt(v);te(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,H=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:fn(Vt(T.auth_time)),issuedAtTime:fn(Vt(T.iat)),expirationTime:fn(Vt(T.exp)),signInProvider:H||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function rt(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return We("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(We("Failed to decode base64 JWT payload"),null)}catch(T){return We("Caught error parsing JWT payload as JSON",T),null}}function Jn(y,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&Pt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Pt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class $s{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class or{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(y){return ut.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield Jn(y,Xr(p,{idToken:v}));te(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const H=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?be(R.providerUserInfo):[],ne=Ke(y.providerData,H),pt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ne?void 0:ne.length)),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ne,metadata:new or(R.createdAt,R.lastLoginAt),isAnonymous:pt};Object.assign(y,ot)})).apply(this,arguments)}function Rt(){return(Rt=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield Xn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ke(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function be(y){return y.map(h=>{var{providerId:p}=h,v=(0,J._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function lt(){return(lt=(0,g.Z)(function*(y,h){const p=yield Jr(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,H=wr(y,T,"/v1/token",`key=${R}`),ne=yield y._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",En.fetch()(H,{method:"POST",headers:ne,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(void 0!==h.idToken,"internal-error"),te(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function mt(y){const h=rt(y);return te(h,"internal-error"),te(void 0!==h.exp,"internal-error"),te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return te(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:H}=yield function Ye(y,h){return lt.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,R,Number(H))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,H=new Ot;return v&&(te("string"==typeof v,"internal-error",{appName:h}),H.refreshToken=v),T&&(te("string"==typeof T,"internal-error",{appName:h}),H.accessToken=T),R&&(te("number"==typeof R,"internal-error",{appName:h}),H.expirationTime=R),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ot,this.toJSON())}_performRefresh(){return qe("not implemented")}}function Mt(y,h){te("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,R=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $s(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new or(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield Jn(p,p.stsTokenManager.getToken(p.auth,h));return te(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function fs(y){return zo.apply(this,arguments)}(this,h)}reload(){return function ar(y){return Rt.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Xn(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield Jn(h,function at(y,h){return Pr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,R,H,ne,ke,Qe,pt;const ot=null!==(v=p.displayName)&&void 0!==v?v:void 0,Dn=null!==(T=p.email)&&void 0!==T?T:void 0,Pi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,bl=null!==(H=p.photoURL)&&void 0!==H?H:void 0,Xc=null!==(ne=p.tenantId)&&void 0!==ne?ne:void 0,yu=null!==(ke=p._redirectEventId)&&void 0!==ke?ke:void 0,ed=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,vy=null!==(pt=p.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:xo,emailVerified:td,isAnonymous:Nh,providerData:nd,stsTokenManager:St}=p;te(xo&&St,h,"internal-error");const Ey=Ot.fromJSON(this.name,St);te("string"==typeof xo,h,"internal-error"),Mt(ot,h.name),Mt(Dn,h.name),te("boolean"==typeof td,h,"internal-error"),te("boolean"==typeof Nh,h,"internal-error"),Mt(Pi,h.name),Mt(bl,h.name),Mt(Xc,h.name),Mt(yu,h.name),Mt(ed,h.name),Mt(vy,h.name);const Ro=new U({uid:xo,auth:h,email:Dn,emailVerified:td,displayName:ot,isAnonymous:Nh,photoURL:bl,phoneNumber:Pi,tenantId:Xc,stsTokenManager:Ey,createdAt:ed,lastLoginAt:vy});return nd&&Array.isArray(nd)&&(Ro.providerData=nd.map(eg=>Object.assign({},eg))),yu&&(Ro._redirectEventId=yu),Ro}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new Ot;T.updateFromServerResponse(p);const R=new U({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield Xn(R),R})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function ue(y,h,p){return`firebase:${y}:${h}:${p}`}class K{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=ue(this.userKey,T.apiKey,R),this.fullPersistenceKey=ue("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?U._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new K(X($),h,v);const T=(yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=T[0]||X($);const H=ue(v,h.config.apiKey,h.name);let ne=null;for(const Qe of p)try{const pt=yield Qe._get(H);if(pt){const ot=U._fromJSON(h,pt);Qe!==R&&(ne=ot),R=Qe;break}}catch(pt){}const ke=T.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],ne&&(yield R._set(H,ne.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(pt){if(pt!==R)try{yield pt._remove(H)}catch(ot){}});return function(pt){return Qe.apply(this,arguments)}}())),new K(R,h,v)):new K(R,h,v)})()}}function Le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ut(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ft(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ct(h))return"Blackberry";if(un(h))return"Webos";if(qt(h))return"Safari";if((h.includes("chrome/")||ur(h))&&!h.includes("edge/"))return"Chrome";if(wn(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ft(y=(0,O.z$)()){return/firefox\//i.test(y)}function qt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ur(y=(0,O.z$)()){return/crios\//i.test(y)}function Ut(y=(0,O.z$)()){return/iemobile/i.test(y)}function wn(y=(0,O.z$)()){return/android/i.test(y)}function Ct(y=(0,O.z$)()){return/blackberry/i.test(y)}function un(y=(0,O.z$)()){return/webos/i.test(y)}function Zn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function $i(y=(0,O.z$)()){return Zn(y)||wn(y)||un(y)||Ct(y)||/windows phone/i.test(y)||Ut(y)}function Ko(y,h=[]){let p;switch(y){case"Browser":p=Le((0,O.z$)());break;case"Worker":p=`${Le((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${se.SDK_VERSION}/${v}`}class ei{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new At(this),this.idTokenSubscription=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=X(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield K.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(H){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,H=null==T?void 0:T._redirectEventId,ne=yield p.tryRedirectSignIn(h);(!R||R===H)&&(null==ne?void 0:ne.user)&&(T=ne.user)}return T?T._redirectEventId?(te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield Xn(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function He(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&te(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return h&&te(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(X(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&X(h)||p._popupRedirectResolver;te(v,p,"argument-error"),p.redirectPersistenceManager=yield K.create(p,[X(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),H=this._isInitialized?Promise.resolve():this._initializationPromise;return te(H,this,"internal-error"),H.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ko(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function xe(y){return(0,O.m9)(y)}class At{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function er(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function On(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class nn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return qe("not implemented")}_getIdTokenResponse(h){return qe("not implemented")}_linkToIdToken(h,p){return qe("not implemented")}_getReauthenticationResolver(h){return qe("not implemented")}}function An(y,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:resetPassword",Gt(y,h))})).apply(this,arguments)}function It(y,h){return po.apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Gs(y,h){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",Gt(y,h))})).apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithPassword",Gt(y,h))})).apply(this,arguments)}function Hi(y,h){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendOobCode",Gt(y,h))})).apply(this,arguments)}function ti(y,h){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function Va(y,h){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,g.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function _i(y,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function cc(y,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,h))})).apply(this,arguments)}function dc(){return(dc=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,h))})).apply(this,arguments)}class ja extends nn{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new ja(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new ja(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function ms(y,h){return tr.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ba(y,h){return kr.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return It(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Qd(y,h){return dc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Pn(y,h){return hc.apply(this,arguments)}function hc(){return(hc=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithIdp",Gt(y,h))})).apply(this,arguments)}class qi extends nn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new qi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,R=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const H=new qi(v,T);return H.idToken=R.idToken||void 0,H.accessToken=R.accessToken||void 0,H.secret=R.secret,H.nonce=R.nonce,H.pendingToken=R.pendingToken||null,H}_getIdTokenResponse(h){return Pn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Pn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Pn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Ep(y,h){return fc.apply(this,arguments)}function fc(){return(fc=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendVerificationCode",Gt(y,h))})).apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,h))})).apply(this,arguments)}function pc(){return(pc=(0,g.Z)(function*(y,h){const p=yield Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,h));if(p.temporaryProof)throw ji(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ip={USER_NOT_FOUND:"user-not-found"};function gc(){return(gc=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ip)})).apply(this,arguments)}class go extends nn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new go({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new go({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Lu(y,h){return _s.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function wp(y,h){return pc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Dp(y,h){return gc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||p||T||R?new go({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class qs{constructor(h){var p,v,T,R,H,ne;const ke=(0,O.zd)((0,O.pd)(h)),Qe=null!==(p=ke.apiKey)&&void 0!==p?p:null,pt=null!==(v=ke.oobCode)&&void 0!==v?v:null,ot=function ay(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);te(Qe&&pt&&ot,"argument-error"),this.apiKey=Qe,this.operation=ot,this.code=pt,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(H=ke.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(ne=ke.tenantId)&&void 0!==ne?ne:null}static parseLink(h){const p=function $a(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new qs(p)}catch(v){return null}}}let Vu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ja._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=qs.parseLink(v);return te(T,"argument-error"),ja._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class vs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Fr extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class mo extends Fr{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return te("providerId"in p&&"signInMethod"in p,"argument-error"),qi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return mo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return mo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:H,providerId:ne}=h;if(!v&&!T&&!p&&!R||!ne)return null;try{return new mo(ne)._credential({idToken:p,accessToken:v,nonce:H,pendingToken:R})}catch(ke){return null}}}let zs=(()=>{class y extends Fr{constructor(){super("facebook.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Yo=(()=>{class y extends Fr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),mc=(()=>{class y extends Fr{constructor(){super("github.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class yo extends nn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Pn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Pn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Pn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new yo(v,R):null}static _create(h,p){return new yo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends vs{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ri.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ri.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=yo.fromJSON(h);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return yo._create(v,p)}catch(T){return null}}}let Ha=(()=>{class y extends Fr{constructor(){super("twitter.com")}static credential(p,v){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ga(y,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signUp",Gt(y,h))})).apply(this,arguments)}class nr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const R=yield U._fromIdTokenResponse(h,v,T),H=Xd(v);return new nr({user:R,providerId:H,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=Xd(v);return new nr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function Xd(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function yc(){return(yc=(0,g.Z)(function*(y){var h;const p=xe(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new nr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Ga(p,{returnSecureToken:!0}),T=yield nr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class za extends O.ZR{constructor(h,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,za.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new za(h,p,v,T)}}function Wa(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?za._fromErrorAndOperation(y,R,h,v):R})}function zi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Uu(){return(Uu=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield ws(!0,p,h);const{providerUserInfo:v}=yield Wn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=zi(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function dn(y,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(y,h,p=!1){const v=yield Jn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return nr._forOperation(y,"link",v)})).apply(this,arguments)}function ws(y,h,p){return sn.apply(this,arguments)}function sn(){return(sn=(0,g.Z)(function*(y,h,p){yield Xn(h);const T=!1===y?"provider-already-linked":"no-such-provider";te(zi(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function _c(y,h){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield Jn(y,Wa(v,T,h,y),p);te(R.idToken,v,"internal-error");const H=rt(R.idToken);te(H,v,"internal-error");const{sub:ne}=H;return te(y.uid===ne,v,"user-mismatch"),nr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function Ks(y,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield Wa(y,v,h),R=yield nr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sn(y,h){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,h){return Ks(xe(y),h)})).apply(this,arguments)}function vi(y,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield ws(!1,p,h.providerId),dn(p,h)})).apply(this,arguments)}function Is(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(y,h){return _c((0,O.m9)(y),h)})).apply(this,arguments)}function Ka(y,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithCustomToken",Gt(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,h){const p=xe(y),v=yield Ka(p,{token:h,returnSecureToken:!0}),T=yield nr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ct{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Za._fromServerResponse(h,p):De(h,"internal-error")}}class Za extends ct{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Za(p)}}function Xo(y,h,p){var v;te((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Qa(){return(Qa=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&Xo(v,T,p),yield Va(v,T)})).apply(this,arguments)}function Bu(){return(Bu=(0,g.Z)(function*(y,h,p){yield An((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(y,h){yield Gs((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function xt(y,h){return vc.apply(this,arguments)}function vc(){return(vc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield An(p,{oobCode:h}),T=v.requestType;switch(te(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(v.mfaInfo,p,"internal-error");default:te(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=ct._fromServerResponse(xe(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,h){const{data:p}=yield xt((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(function*(y,h,p){const v=xe(y),T=yield Ga(v,{returnSecureToken:!0,email:h,password:p}),R=yield nr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ec(){return(Ec=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};te(p.handleCodeInApp,v,"argument-error"),p&&Xo(v,T,p),yield _i(v,T)})).apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=Vu.credentialWithLink(h,p||Oe());return te(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Sn(v,T)})).apply(this,arguments)}function rr(y,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:createAuthUri",Gt(y,h))})).apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:vt()?Oe():"http://localhost"},{signinMethods:T}=yield rr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function qu(){return(qu=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Xo(p.auth,T,h);const{email:R}=yield ti(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Xo(v.auth,R,p);const{email:H}=yield cc(v.auth,R);H!==y.email&&(yield y.reload())})).apply(this,arguments)}function zu(y,h){return ea.apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Wu(){return(Wu=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},H=yield Jn(v,zu(v.auth,R));v.displayName=H.displayName||null,v.photoURL=H.photoUrl||null;const ne=v.providerData.find(({providerId:ke})=>"password"===ke);ne&&(ne.displayName=v.displayName,ne.photoURL=v.photoURL),yield v._updateTokensIfNecessary(H)})).apply(this,arguments)}function Zu(y,h,p){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const H=yield Jn(y,It(v,R));yield y._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Ys{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Dc extends Ys{constructor(h,p,v,T){super(h,p,v),this.username=T}}class bc extends Ys{constructor(h,p){super(h,"facebook.com",p)}}class Qs extends Dc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class As extends Ys{constructor(h,p){super(h,"google.com",p)}}class Yu extends Dc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function dr(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Ic(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const H=null===(p=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(H)return new Ys(R,"anonymous"!==H&&"custom"!==H?H:null)}if(!v)return null;switch(v){case"facebook.com":return new bc(R,T);case"github.com":return new Qs(R,T);case"google.com":return new As(R,T);case"twitter.com":return new Yu(R,T,y.screenName||null);case"custom":case"anonymous":return new Ys(R,null);default:return new Ys(R,v,T)}}(p)}class Ki{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Ki("enroll",h)}static _fromMfaPendingCredential(h){return new Ki("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Ki._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Ki._fromIdtoken(h.multiFactorSession.idToken)}return null}}class na{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=xe(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(ne=>ct._fromServerResponse(v,ne));te(T.mfaPendingCredential,v,"internal-error");const H=Ki._fromMfaPendingCredential(T.mfaPendingCredential);return new na(H,R,function(){var ne=(0,g.Z)(function*(ke){const Qe=yield ke._process(v,H);delete T.mfaInfo,delete T.mfaPendingCredential;const pt=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const ot=yield nr._fromIdTokenResponse(v,p.operationType,pt);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return te(p.user,v,"internal-error"),nr._forOperation(p.user,p.operationType,pt);default:De(v,"internal-error")}});return function(ke){return ne.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function kn(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",Gt(y,h))}class Zi{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>ct._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Zi(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Ki._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,R=yield v.getSession(),H=yield Jn(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(H),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),R=yield Jn(p.user,function Cp(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:H})=>H!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(H){if("auth/user-token-expired"!==H.code)throw H}})()}}const wo=new WeakMap,Xu="__sak";class Js{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Xu,"1"),this.storage.removeItem(Xu),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const gn=(()=>{class y extends Js{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ac(){const y=(0,O.z$)();return qt(y)||Zn(y)}()&&function Un(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=$i(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ne,ke,Qe)=>{this.notifyListeners(ne,Qe)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(T);if(p.newValue!==ne)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const ne=this.storage.getItem(T);!v&&this.localCache[T]===ne||this.notifyListeners(T,ne)},H=this.storage.getItem(T);!function Wo(){return(0,O.w1)()&&10===document.documentMode}()||H===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,g.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Yi=(()=>{class y extends Js{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let ra=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:R,eventType:H,data:ne}=T.data,ke=v.handlersMap[H];if(!(null==ke?void 0:ke.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:H});const Qe=Array.from(ke).map(function(){var ot=(0,g.Z)(function*(Dn){return Dn(T.origin,ne)});return function(Dn){return ot.apply(this,arguments)}}()),pt=yield function tl(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:R,eventType:H,response:pt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Xs(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Sc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let H,ne;return new Promise((ke,Qe)=>{const pt=Xs("",20);R.port1.start();const ot=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);ne={messageChannel:R,onMessage(Dn){const Pi=Dn;if(Pi.data.eventId===pt)switch(Pi.data.status){case"ack":clearTimeout(ot),H=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),ke(Pi.data.response);break;default:clearTimeout(ot),clearTimeout(H),Qe(new Error("invalid_response"))}}},T.handlers.add(ne),R.port1.addEventListener("message",ne.onMessage),T.target.postMessage({eventType:h,eventId:pt,data:p},[R.port2])}).finally(()=>{ne&&T.removeMessageHandler(ne)})})()}}function Xt(){return window}function mn(){return void 0!==Xt().WorkerGlobalScope&&"function"==typeof Xt().importScripts}function Ms(){return(Ms=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const iu="firebaseLocalStorageDb",eo="firebaseLocalStorage",si="fbase_key";class Bn{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Do(y,h){return y.transaction([eo],h?"readwrite":"readonly").objectStore(eo)}function to(){const y=indexedDB.open(iu,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(eo,{keyPath:si})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(eo)?h(v):(v.close(),yield function Br(){const y=indexedDB.deleteDatabase(iu);return new Bn(y).toPromise()}(),h(yield to()))}))})}function rl(y,h,p){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y,h,p){const v=Do(y,!0).put({[si]:h,value:p});return new Bn(v).toPromise()})).apply(this,arguments)}function oi(){return(oi=(0,g.Z)(function*(y,h){const p=Do(y,!1).get(h),v=yield new Bn(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function xs(y,h){const p=Do(y,!0).delete(h);return new Bn(p).toPromise()}const Ri=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield to()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return mn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=ra._getInstance(function nl(){return mn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function Dt(){return Ms.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Sc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Ap(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield to();return yield rl(p,Xu,"1"),yield xs(p,Xu),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(R=>rl(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(R=>function bo(y,h){return oi.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>xs(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(H=>{const ne=Do(H,!1).getAll();return new Bn(ne).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:H,value:ne}of v)R.add(H),JSON.stringify(p.localCache[H])!==JSON.stringify(ne)&&(p.notifyListeners(H,ne),T.push(H));for(const H of Object.keys(p.localCache))p.localCache[H]&&!R.has(H)&&(p.notifyListeners(H,null),T.push(H));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Mc(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",Gt(y,h))}function wi(){return(wi=(0,g.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function io(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=ye("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function ol(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function sa(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ai=1e12;class xc{constructor(h){this.auth=h,this.counter=ai,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new su(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||ai;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ai))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||ai))||void 0===v||v.execute(),""})()}}class su{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;te(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function so(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ou=sa("rcb"),rh=new Ft(3e4,6e4);class Rc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xt().grecaptcha}load(h,p=""){return te(function Sp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Xt().grecaptcha):new Promise((v,T)=>{const R=Xt().setTimeout(()=>{T(ye(h,"network-request-failed"))},rh.get());Xt()[ou]=()=>{Xt().clearTimeout(R),delete Xt()[ou];const ne=Xt().grecaptcha;if(!ne)return void T(ye(h,"internal-error"));const ke=ne.render;ne.render=(Qe,pt)=>{const ot=ke(Qe,pt);return this.counter++,ot},this.hostLanguage=p,v(ne)},io(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ou,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Xt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Nc{load(h){return(0,g.Z)(function*(){return new xc(h)})()}clearedOneInstance(){}}const al="recaptcha",Oc={theme:"light",type:"image"};class ih{constructor(h,p=Object.assign({},Oc),v){this.parameters=p,this.type=al,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xe(v),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Nc:new Rc,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const H=ne=>{!ne||(h.tokenChangeListeners.delete(H),R(ne))};h.tokenChangeListeners.add(H),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=Xt()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){te(vt()&&!mn(),h.auth,"internal-error"),yield function Pc(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function sl(y){return wi.apply(this,arguments)}(h.auth);te(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ni{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=go._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function _n(){return(_n=(0,g.Z)(function*(y,h,p){const v=xe(y),T=yield Dr(v,h,(0,O.m9)(p));return new Ni(T,R=>Sn(v,R))})).apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield ws(!1,v,"phone");const T=yield Dr(v.auth,h,(0,O.m9)(p));return new Ni(T,R=>vi(v,R))})).apply(this,arguments)}function uu(){return(uu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=yield Dr(v.auth,h,(0,O.m9)(p));return new Ni(T,R=>Is(v,R))})).apply(this,arguments)}function Dr(y,h,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let R;if(te("string"==typeof T,y,"argument-error"),te(p.type===al,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const H=R.session;if("phoneNumber"in R)return te("enroll"===H.type,y,"internal-error"),(yield kn(y,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===H.type,y,"internal-error");const ne=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return te(ne,y,"missing-multi-factor-info"),(yield Mc(y,{mfaPendingCredential:H.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield Ep(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return H}}finally{p._reset()}})).apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y,h){yield dn((0,O.m9)(y),h)})).apply(this,arguments)}let $r=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=xe(p)}verifyPhoneNumber(p,v){return Dr(this.auth,p,(0,O.m9)(v))}static credential(p,v){return go._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?go._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Hr(y,h){return h?X(h):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class oa extends nn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Pn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Pn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Pn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function aa(y){return Ks(y.auth,new oa(y),y.bypassAuthState)}function kc(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),_c(p,new oa(y),y.bypassAuthState)}function oh(y){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),dn(p,new oa(y),y.bypassAuthState)})).apply(this,arguments)}class ui{constructor(h,p,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:H,error:ne,type:ke}=h;if(ne)return void p.reject(ne);const Qe={auth:p.auth,requestUri:v,sessionId:T,tenantId:H||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(ke)(Qe))}catch(pt){p.reject(pt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return aa;case"linkViaPopup":case"linkViaRedirect":return oh;case"reauthViaPopup":case"reauthViaRedirect":return kc;default:De(this.auth,"internal-error")}}resolve(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ah=new Ft(2e3,1e4);function uh(){return(uh=(0,g.Z)(function*(y,h,p){const v=xe(y);je(y,h,vs);const T=Hr(v,p);return new es(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Hr(v.auth,p);return new es(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function ll(){return(ll=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Hr(v.auth,p);return new es(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let es=(()=>{class y extends ui{constructor(p,v,T,R,H){super(p,v,R,H),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return te(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){Q(1===p.filter.length,"Popup operations only handle one event");const v=Xs();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,ah.get())};p()}}return y.currentPopupAction=null,y})();const hr=new Map;class ca extends ui{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=hr.get(p.auth._key());if(!v){try{const R=(yield function Co(y,h){return cl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}hr.set(p.auth._key(),v)}return p.bypassAuthState||hr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function cl(){return(cl=(0,g.Z)(function*(y,h){const p=b(h),v=D(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function ts(y,h){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h){return D(y)._set(b(h),"true")})).apply(this,arguments)}function D(y){return X(y._redirectPersistence)}function b(y){return ue("pendingRedirect",y.config.apiKey,y.name)}function q(){return(q=(0,g.Z)(function*(y,h,p){const v=xe(y);je(y,h,vs);const T=Hr(v,p);return yield ts(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Ze(){return(Ze=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Hr(v.auth,p);yield ts(T,v.auth);const R=yield To(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Hr(v.auth,p);yield ws(!1,v,h.providerId),yield ts(T,v.auth);const R=yield To(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,h){return yield xe(y)._initializationPromise,vn(y,h,!1)})).apply(this,arguments)}function vn(y,h){return da.apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(y,h,p=!1){const v=xe(y),T=Hr(v,h),H=yield new ca(v,T,p).execute();return H&&!p&&(delete H.user._redirectEventId,yield v._persistUserIfCurrent(H.user),yield v._setRedirectUser(null,h)),H})).apply(this,arguments)}function To(y){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(y){const h=Xs(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Gr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Lc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mp(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Mp(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Di(h))}saveEventToCache(h){this.cachedEventUids.add(Di(h)),this.lastProcessedEventTime=Date.now()}}function Di(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Mp({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function hl(y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(y,h={}){return Lt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ch=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vc=/^https?/;function ns(){return(ns=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield hl(y);for(const p of h)try{if(cu(p))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function cu(y){const h=Oe(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const H=new URL(y);return""===H.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&H.hostname===v}if(!Vc.test(p))return!1;if(ch.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const xp=new Ft(3e4,6e4);function Rp(){const y=Xt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let du=null;function Np(y){return du=du||function hh(y){return new Promise((h,p)=>{var v,T,R;function H(){Rp(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Rp(),p(ye(y,"network-request-failed"))},timeout:xp.get()})}if(null===(T=null===(v=Xt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=Xt().gapi)||void 0===R?void 0:R.load)){const ne=sa("iframefcb");return Xt()[ne]=()=>{gapi.load?H():p(ye(y,"network-request-failed"))},io(`https://apis.google.com/js/api.js?onload=${ne}`).catch(ke=>p(ke))}H()}}).catch(h=>{throw du=null,h})}(y),du}const Uc=new Ft(5e3,15e3),So={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ha(y){const h=y.config;te(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?zn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},T=fl.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Pp(){return Pp=(0,g.Z)(function*(y){const h=yield Np(y),p=Xt().gapi;return te(p,y,"internal-error"),h.open({where:document.body,url:ha(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:So,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(R,H){yield v.restyle({setHideOnLeave:!1});const ne=ye(y,"network-request-failed"),ke=Xt().setTimeout(()=>{H(ne)},Uc.get());function Qe(){Xt().clearTimeout(ke),R(v)}v.ping(Qe).then(Qe,()=>{H(ne)})});return function(R,H){return T.apply(this,arguments)}}()))}),Pp.apply(this,arguments)}const YI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function _h(y,h,p,v,T,R){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const H={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:se.SDK_VERSION,eventId:T};if(h instanceof vs){h.setDefaultLanguage(y.languageCode),H.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(H.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Qe]of Object.entries(R||{}))H[ke]=Qe}if(h instanceof Fr){const ke=h.getScopes().filter(Qe=>""!==Qe);ke.length>0&&(H.scopes=ke.join(","))}y.tenantId&&(H.tid=y.tenantId);const ne=H;for(const ke of Object.keys(ne))void 0===ne[ke]&&delete ne[ke];return`${function E0({config:y}){return y.emulator?zn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ne).slice(1)}`}const rs="webStorageSupport";class Eh extends class w0{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return qe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Eh(h)}_finalizeEnroll(h,p,v){return function Cc(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function ia(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",Gt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Lp=(()=>{class y{constructor(){}static assertion(p){return Eh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var dy="@firebase/auth",Vp="0.19.12";class Up{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fa(){return window}function hu(){return(hu=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=fa();Q(h.sessionId,"AuthEvent did not contain a session ID");const R=yield I0(h.sessionId),H={};return Zn()?H.ibi=T.packageName:wn()?H.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(H.appDisplayName=T.displayName),H.sessionId=R,_h(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,H)})).apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(y){const{BuildInfo:h}=fa(),p={};Zn()?p.iosBundleId=h.packageName:wn()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield hl(y,p)})).apply(this,arguments)}function pu(){return(pu=(0,g.Z)(function*(y,h,p){const{cordova:v}=fa();let T=()=>{};try{yield new Promise((R,H)=>{let ne=null;function ke(){var ot;R();const Dn=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Dn&&Dn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Qe(){ne||(ne=window.setTimeout(()=>{H(ye(y,"redirect-cancelled-by-user"))},2e3))}function pt(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}h.addPassiveListener(ke),document.addEventListener("resume",Qe,!1),wn()&&document.addEventListener("visibilitychange",pt,!1),T=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",pt,!1),ne&&window.clearTimeout(ne)}})}finally{T()}})).apply(this,arguments)}function I0(y){return wh.apply(this,arguments)}function wh(){return(wh=(0,g.Z)(function*(y){const h=D0(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function D0(y){if(Q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function hy(y){(0,se._registerComponent)(new re.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:H}=v.options;return((ne,ke)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:ne.name}),te(!(null==H?void 0:H.includes(":")),"argument-error",{appName:ne.name});const Qe={apiKey:R,authDomain:H,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ko(y)},pt=new ei(ne,ke,Qe);return function pe(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(X);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(pt,p),pt})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new re.wA("auth-internal",h=>{const p=xe(h.getProvider("auth").getImmediate());return new Up(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(dy,Vp,function jc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(dy,Vp,"esm2017")}("Browser");class gl extends Gr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function py(y){return ml.apply(this,arguments)}function ml(){return(ml=(0,g.Z)(function*(y){const h=yield Hc()._get(Dh(y));return h&&(yield Hc()._remove(Dh(y))),h})).apply(this,arguments)}function gy(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Hc(){return X(gn)}function Dh(y){return ue("authEvent",y.config.apiKey,y.name)}function qc(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Ch(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Wc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function yy(y=(0,O.z$)()){return!("file:"!==Wc()&&"ionic:"!==Wc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function fr(){try{const y=self.localStorage,h=Xs();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Kc(y=(0,O.z$)()){return function QI(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function C0(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return _l()&&(0,O.hl)()}return!1}function _l(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zc(){return(function Zp(){return"http:"===Wc()||"https:"===Wc()}()||(0,O.ru)()||yy())&&!function b0(){return(0,O.b$)()||(0,O.UG)()}()&&fr()&&!_l()}function Yp(){return yy()&&"undefined"!=typeof document}function li(){return(li=(0,g.Z)(function*(){return!!Yp()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const pr={LOCAL:"local",NONE:"none",SESSION:"session"},vl=te,Th="persistence";function El(y){return wl.apply(this,arguments)}function wl(){return(wl=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Qp(),p=ue(Th,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Qp(){var y;try{return(null===(y=function bi(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Yc=te;class Ci{constructor(){this.browserResolver=X(class pl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yi,this._completeRedirectFn=vn}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){var H;Q(null===(H=R.eventManagers[h._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ne=_h(h,p,v,Oe(),T);return function mh(y,h,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),H=Math.max((window.screen.availWidth-v)/2,0).toString();let ne="";const ke=Object.assign(Object.assign({},YI),{width:v.toString(),height:T.toString(),top:R,left:H}),Qe=(0,O.z$)().toLowerCase();p&&(ne=ur(Qe)?"_blank":p),ft(Qe)&&(h=h||"http://localhost",ke.scrollbars="yes");const pt=Object.entries(ke).reduce((Dn,[Pi,bl])=>`${Dn}${Pi}=${bl},`,"");if(function La(y=(0,O.z$)()){var h;return Zn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Qe)&&"_self"!==ne)return function Fp(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ne),new Bc(null);const ot=window.open(h||"",ne,pt);te(ot,y,"popup-blocked");try{ot.focus()}catch(Dn){}return new Bc(ot)}(h,ne,Xs())})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function Io(y){Xt().location.href=y}(_h(h,p,v,Oe(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(Q(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function v0(y){return Pp.apply(this,arguments)}(h),T=new Gr(h);return v.register("authEvent",R=>(te(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(rs,{type:rs},T=>{var R;const H=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[rs];void 0!==H&&p(!!H),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function dh(y){return ns.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return $i()||qt()||Zn()}}),this.cordovaResolver=X(class zp{constructor(){this._redirectPersistence=Yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vn}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new gl(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){!function Gp(y){var h,p,v,T,R,H,ne,ke,Qe,pt;const ot=fa();te("function"==typeof(null===(h=null==ot?void 0:ot.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(p=null==ot?void 0:ot.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(T=null===(v=null==ot?void 0:ot.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(ke=null===(ne=null===(H=null==ot?void 0:ot.cordova)||void 0===H?void 0:H.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(pt=null===(Qe=null==ot?void 0:ot.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===pt?void 0:pt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const H=yield R._initialize(h);yield H.initialized(),H.resetRedirect(),function dl(){hr.clear()}(),yield R._originValidation(h);const ne=function Ih(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:gy(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,v,T);yield function fy(y,h){return Hc()._set(Dh(y),h)}(h,ne);const ke=yield function $p(y,h,p){return hu.apply(this,arguments)}(h,ne,p),Qe=yield function fu(y){const{cordova:h}=fa();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Hs(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(ke);return function Hp(y,h,p){return pu.apply(this,arguments)}(h,H,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function $c(y){return Oi.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=fa(),H=setTimeout((0,g.Z)(function*(){yield py(h),p.onEvent(Ch())}),500),ne=function(){var pt=(0,g.Z)(function*(ot){clearTimeout(H);const Dn=yield py(h);let Pi=null;Dn&&(null==ot?void 0:ot.url)&&(Pi=function pa(y,h){var p,v;const T=function Gc(y){const h=qc(y),p=h.link?decodeURIComponent(h.link):void 0,v=qc(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return qc(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const R=qc(T),H=R.firebaseError?function bh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,ne=null===(v=null===(p=null==H?void 0:H.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],ke=ne?ye(ne):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Dn,ot.url)),p.onEvent(Pi||Ch())});return function(Dn){return pt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ne);const ke=T,Qe=`${R.packageName.toLowerCase()}://`;fa().handleOpenURL=function(){var pt=(0,g.Z)(function*(ot){if(ot.toLowerCase().startsWith(Qe)&&ne({url:ot}),"function"==typeof ke)try{ke(ot)}catch(Dn){console.error(Dn)}});return function(ot){return pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Yi,this._completeRedirectFn=vn}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Yp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function tt(){return li.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Jp(y){return y.unwrap()}function Qc(y){return Sh(y)}function Sh(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return $r.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Yo;break;case"facebook.com":v=zs;break;case"github.com":v=mc;break;case"twitter.com":v=Ha;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:H,pendingToken:ne,nonce:ke}=h;return R||H||T||ne?ne?p.startsWith("saml.")?yo._create(p,ne):qi._fromParams({providerId:p,signInMethod:p,pendingToken:ne,idToken:T,accessToken:R}):new mo(p).credential({idToken:T,accessToken:R,rawNonce:ke}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function on(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function gu(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new qr(y,function ru(y,h){var p;const v=(0,O.m9)(y),T=h;return te(h.customData.operationType,v,"argument-error"),te(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),na._fromError(v,T)}(y,h));else if(v){const T=Sh(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Qc(p),additionalUserInfo:dr(p),user:is.getOrCreate(T)}})}function Jc(y,h){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>on(y,p.confirm(v))}})).apply(this,arguments)}class qr{constructor(h,p){this.resolver=p,this.auth=function Ah(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return on(Jp(this.auth),this.resolver.resolveSignIn(h))}}class is{constructor(h){this._delegate=h,this.multiFactor=function Tc(y){const h=(0,O.m9)(y);return wo.has(h)||wo.set(h,Zi._fromUser(h)),wo.get(h)}(h)}static getOrCreate(h){return is.USER_MAP.has(h)||is.USER_MAP.set(h,new is(h)),is.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return on(p.auth,vi(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return Jc(v.auth,function au(y,h,p){return jr.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return on(p.auth,function lh(y,h,p){return ll.apply(this,arguments)}(p._delegate,h,Ci))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield El(xe(p.auth)),function nt(y,h,p){return function gt(y,h,p){return Bt.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ci)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return on(p.auth,Is(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Jc(this.auth,function Ir(y,h,p){return uu.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return on(this.auth,function oo(y,h,p){return la.apply(this,arguments)}(this._delegate,h,Ci))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield El(xe(p.auth)),function ee(y,h,p){return function Se(y,h,p){return Ze.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ci)})()}sendEmailVerification(h){return function Ei(y,h){return qu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Qo(y,h){return Uu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Ku(y,h){return Zu((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function wc(y,h){return Zu((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ul(y,h){return Xi.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ta(y,h){return Wu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function tu(y,h,p){return nu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}is.USER_MAP=new WeakMap;const Mo=te;let xh=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Mo(T,"invalid-api-key",{appName:p.name}),Mo(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Ci:void 0;this._delegate=v.initialize({options:{persistence:ao(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?is.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function ln(y,h,p){const v=xe(y);te(v._canInitEmulator,v,"emulator-config-failed"),te(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=er(h),{host:H,port:ne}=function ps(y){const h=er(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:On(v.substr(R.length+1))}}{const[R,H]=v.split(":");return{host:R,port:On(H)}}}(h);v.config.emulator={url:`${R}//${H}${null===ne?"":`:${ne}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:H,port:ne,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function xi(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function ju(y,h){return we.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xt(this._delegate,p)}confirmPasswordReset(p,v){return function Ja(y,h,p){return Bu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return on(T._delegate,function Eo(y,h,p){return Ur.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function eu(y,h){return Ts.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Gu(y,h){const p=qs.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Mo(Zc(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function _t(y,h){return xn.apply(this,arguments)}(p._delegate,Ci);return v?on(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function my(y,h){xe(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:H,complete:ne}=mu(p,v,T);return this._delegate.onAuthStateChanged(R,H,ne)}onIdTokenChanged(p,v,T){const{next:R,error:H,complete:ne}=mu(p,v,T);return this._delegate.onIdTokenChanged(R,H,ne)}sendSignInLinkToEmail(p,v){return function Hu(y,h,p){return Ec.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Ya(y,h,p){return Qa.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function _y(y,h){vl(Object.values(pr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?vl(h!==pr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?vl(h===pr.NONE,y,"unsupported-persistence-type"):_l()?vl(h===pr.NONE||h===pr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):vl(h===pr.NONE||fr(),y,"unsupported-persistence-type")}(v._delegate,p),p){case pr.SESSION:T=Yi;break;case pr.LOCAL:T=(yield X(Ri)._isAvailable())?Ri:gn;break;case pr.NONE:T=$;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return on(this._delegate,function qa(y){return yc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return on(this._delegate,Sn(this._delegate,p))}signInWithCustomToken(p){return on(this._delegate,function Ds(y,h){return bs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return on(this._delegate,function $u(y,h,p){return Sn((0,O.m9)(y),Vu.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return on(this._delegate,function Xa(y,h,p){return Cs.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Jc(this._delegate,function sh(y,h,p){return _n.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Mo(Zc(),v._delegate,"operation-not-supported-in-this-environment"),on(v._delegate,function ua(y,h,p){return uh.apply(this,arguments)}(v._delegate,p,Ci))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Mo(Zc(),v._delegate,"operation-not-supported-in-this-environment"),yield El(v._delegate),function M(y,h,p){return function F(y,h,p){return q.apply(this,arguments)}(y,h,p)}(v._delegate,p,Ci)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function pn(y,h){return vo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=pr,y})();function mu(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:H=>T(H&&is.getOrCreate(H)),error:h,complete:p}}function ao(y,h){const p=function Il(y,h){const p=Qp();if(!p)return[];const v=ue(Th,y,h);switch(p.getItem(v)){case pr.NONE:return[$];case pr.LOCAL:return[Ri,Yi];case pr.SESSION:return[Yi];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Ri)&&p.push(Ri),"undefined"!=typeof window)for(const v of[gn,Yi])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class Ns{constructor(){this.providerId="phone",this._delegate=new $r(Jp(W.Z.auth()))}static credential(h,p){return $r.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Ns.PHONE_SIGN_IN_METHOD=$r.PHONE_SIGN_IN_METHOD,Ns.PROVIDER_ID=$r.PROVIDER_ID;const Tr=te;class Dl{constructor(h,p,v=W.Z.app()){var T;Tr(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new ih(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Xp(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new xh(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vu,FacebookAuthProvider:zs,GithubAuthProvider:mc,GoogleAuthProvider:Yo,OAuthProvider:mo,SAMLAuthProvider:ri,PhoneAuthProvider:Ns,PhoneMultiFactorGenerator:Lp,RecaptchaVerifier:Dl,TwitterAuthProvider:Ha,Auth:xh,AuthCredential:nn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(W.Z)},8306:(st,Ce,P)=>{P.d(Ce,{y:()=>B});var g=P(2961),W=P(727),O=P(8822),se=P(4671);var re=P(2416),de=P(576),ae=P(2806);let B=(()=>{class Te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const he=new Te;return he.source=this,he.operator=Pe,he}subscribe(Pe,he,ve){const Je=function Ge(Te){return Te&&Te instanceof g.Lv||function Z(Te){return Te&&(0,de.m)(Te.next)&&(0,de.m)(Te.error)&&(0,de.m)(Te.complete)}(Te)&&(0,W.Nn)(Te)}(Pe)?Pe:new g.Hp(Pe,he,ve);return(0,ae.x)(()=>{const{operator:We,source:De}=this;Je.add(We?We.call(Je,De):De?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(he){Pe.error(he)}}forEach(Pe,he){return new(he=j(he))((ve,Je)=>{const We=new g.Hp({next:De=>{try{Pe(De)}catch(ye){Je(ye),We.unsubscribe()}},error:Je,complete:ve});this.subscribe(We)})}_subscribe(Pe){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return function fe(Te){return 0===Te.length?se.y:1===Te.length?Te[0]:function(Pe){return Te.reduce((he,ve)=>ve(he),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=j(Pe))((he,ve)=>{let Je;this.subscribe(We=>Je=We,We=>ve(We),()=>he(Je))})}}return Te.create=Me=>new Te(Me),Te})();function j(Te){var Me;return null!==(Me=null!=Te?Te:re.v.Promise)&&void 0!==Me?Me:Promise}},7579:(st,Ce,P)=>{P.d(Ce,{x:()=>re});var g=P(8306),W=P(727);const se=(0,P(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=P(8737),fe=P(2806);let re=(()=>{class ae extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Z=new de(this,this);return Z.operator=j,Z}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Z}=this;for(;Z.length;)Z.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Z,isStopped:Ge,observers:Te}=this;return Z||Ge?W.Lc:(this.currentObservers=null,Te.push(j),new W.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Z,thrownError:Ge,isStopped:Te}=this;Z?j.error(Ge):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ae.create=(B,j)=>new de(B,j),ae})();class de extends re{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Z||Z.call(j,B)}error(B){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Z||Z.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Z;return null!==(Z=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Z?Z:W.Lc}}},2961:(st,Ce,P)=>{P.d(Ce,{Hp:()=>Pe,Lv:()=>Z});var g=P(576),W=P(727),O=P(2416),se=P(7849);function J(){}const fe=ae("C",void 0,void 0);function ae(De,ye,_e){return{kind:De,value:ye,error:_e}}var B=P(3410),j=P(2806);class Z extends W.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,W.Nn)(ye)&&ye.add(this)):this.destination=We}static create(ye,_e,je){return new Pe(ye,_e,je)}next(ye){this.isStopped?Je(function de(De){return ae("N",De,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Je(function re(De){return ae("E",void 0,De)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Je(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Te(De,ye){return Ge.call(De,ye)}class Me{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:_e}=this;if(_e.next)try{_e.next(ye)}catch(je){he(je)}}error(ye){const{partialObserver:_e}=this;if(_e.error)try{_e.error(ye)}catch(je){he(je)}else he(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(_e){he(_e)}}}class Pe extends Z{constructor(ye,_e,je){let Ue;if(super(),(0,g.m)(ye)||!ye)Ue={next:null!=ye?ye:void 0,error:null!=_e?_e:void 0,complete:null!=je?je:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(ye),te.unsubscribe=()=>this.unsubscribe(),Ue={next:ye.next&&Te(ye.next,te),error:ye.error&&Te(ye.error,te),complete:ye.complete&&Te(ye.complete,te)}):Ue=ye}this.destination=new Me(Ue)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,se.h)(De)}function Je(De,ye){const{onStoppedNotification:_e}=O.v;_e&&B.z.setTimeout(()=>_e(De,ye))}const We={closed:!0,next:J,error:function ve(De){throw De},complete:J}},727:(st,Ce,P)=>{P.d(Ce,{Lc:()=>fe,w0:()=>J,Nn:()=>re});var g=P(576);const O=(0,P(3888).d)(ae=>function(j){ae(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Z,Ge)=>`${Ge+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=P(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Z}=this;if((0,g.m)(Z))try{Z()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Te of Ge)try{de(Te)}catch(Me){B=null!=B?B:[],Me instanceof O?B=[...B,...Me.errors]:B.push(Me)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,se.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ae=new J;return ae.closed=!0,ae})();const fe=J.EMPTY;function re(ae){return ae instanceof J||ae&&"closed"in ae&&(0,g.m)(ae.remove)&&(0,g.m)(ae.add)&&(0,g.m)(ae.unsubscribe)}function de(ae){(0,g.m)(ae)?ae():ae.unsubscribe()}},2416:(st,Ce,P)=>{P.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,Ce,P)=>{P.d(Ce,{E:()=>W});const W=new(P(8306).y)(J=>J.complete())},8996:(st,Ce,P)=>{P.d(Ce,{D:()=>ye});var g=P(8421),W=P(5363),O=P(9468),fe=P(8306),de=P(2202),ae=P(576),B=P(9672);function Z(_e,je){if(!_e)throw new Error("Iterable cannot be null");return new fe.y(Ue=>{(0,B.f)(Ue,je,()=>{const te=_e[Symbol.asyncIterator]();(0,B.f)(Ue,je,()=>{te.next().then(qe=>{qe.done?Ue.complete():Ue.next(qe.value)})},0,!0)})})}var Ge=P(3670),Te=P(8239),Me=P(1144),Pe=P(6495),he=P(2206),ve=P(4532),Je=P(3260);function ye(_e,je){return je?function De(_e,je){if(null!=_e){if((0,Ge.c)(_e))return function se(_e,je){return(0,g.Xf)(_e).pipe((0,O.R)(je),(0,W.Q)(je))}(_e,je);if((0,Me.z)(_e))return function re(_e,je){return new fe.y(Ue=>{let te=0;return je.schedule(function(){te===_e.length?Ue.complete():(Ue.next(_e[te++]),Ue.closed||this.schedule())})})}(_e,je);if((0,Te.t)(_e))return function J(_e,je){return(0,g.Xf)(_e).pipe((0,O.R)(je),(0,W.Q)(je))}(_e,je);if((0,he.D)(_e))return Z(_e,je);if((0,Pe.T)(_e))return function j(_e,je){return new fe.y(Ue=>{let te;return(0,B.f)(Ue,je,()=>{te=_e[de.h](),(0,B.f)(Ue,je,()=>{let qe,Q;try{({value:qe,done:Q}=te.next())}catch(ie){return void Ue.error(ie)}Q?Ue.complete():Ue.next(qe)},0,!0)}),()=>(0,ae.m)(null==te?void 0:te.return)&&te.return()})}(_e,je);if((0,Je.L)(_e))return function We(_e,je){return Z((0,Je.Q)(_e),je)}(_e,je)}throw(0,ve.z)(_e)}(_e,je):(0,g.Xf)(_e)}},8421:(st,Ce,P)=>{P.d(Ce,{Xf:()=>Ge});var g=P(655),W=P(1144),O=P(8239),se=P(8306),J=P(3670),fe=P(2206),re=P(4532),de=P(6495),ae=P(3260),B=P(576),j=P(7849),Z=P(8822);function Ge(De){if(De instanceof se.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new se.y(ye=>{const _e=De[Z.L]();if((0,B.m)(_e.subscribe))return _e.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,W.z)(De))return function Me(De){return new se.y(ye=>{for(let _e=0;_e<De.length&&!ye.closed;_e++)ye.next(De[_e]);ye.complete()})}(De);if((0,O.t)(De))return function Pe(De){return new se.y(ye=>{De.then(_e=>{ye.closed||(ye.next(_e),ye.complete())},_e=>ye.error(_e)).then(null,j.h)})}(De);if((0,fe.D)(De))return ve(De);if((0,de.T)(De))return function he(De){return new se.y(ye=>{for(const _e of De)if(ye.next(_e),ye.closed)return;ye.complete()})}(De);if((0,ae.L)(De))return function Je(De){return ve((0,ae.Q)(De))}(De)}throw(0,re.z)(De)}function ve(De){return new se.y(ye=>{(function We(De,ye){var _e,je,Ue,te;return(0,g.mG)(this,void 0,void 0,function*(){try{for(_e=(0,g.KL)(De);!(je=yield _e.next()).done;)if(ye.next(je.value),ye.closed)return}catch(qe){Ue={error:qe}}finally{try{je&&!je.done&&(te=_e.return)&&(yield te.call(_e))}finally{if(Ue)throw Ue.error}}ye.complete()})})(De,ye).catch(_e=>ye.error(_e))})}},6451:(st,Ce,P)=>{P.d(Ce,{T:()=>fe});var g=P(8189),W=P(8421),O=P(515),se=P(7669),J=P(8996);function fe(...re){const de=(0,se.yG)(re),ae=(0,se._6)(re,1/0),B=re;return B.length?1===B.length?(0,W.Xf)(B[0]):(0,g.J)(ae)((0,J.D)(B,de)):O.E}},5403:(st,Ce,P)=>{P.d(Ce,{x:()=>W});var g=P(2961);function W(se,J,fe,re,de){return new O(se,J,fe,re,de)}class O extends g.Lv{constructor(J,fe,re,de,ae,B){super(J),this.onFinalize=ae,this.shouldUnsubscribe=B,this._next=fe?function(j){try{fe(j)}catch(Z){J.error(Z)}}:super._next,this._error=de?function(j){try{de(j)}catch(Z){J.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(st,Ce,P)=>{P.d(Ce,{U:()=>O});var g=P(4482),W=P(5403);function O(se,J){return(0,g.e)((fe,re)=>{let de=0;fe.subscribe((0,W.x)(re,ae=>{re.next(se.call(J,ae,de++))}))})}},8189:(st,Ce,P)=>{P.d(Ce,{J:()=>O});var g=P(5577),W=P(4671);function O(se=1/0){return(0,g.z)(W.y,se)}},5577:(st,Ce,P)=>{P.d(Ce,{z:()=>de});var g=P(4004),W=P(8421),O=P(4482),se=P(9672),J=P(5403),re=P(576);function de(ae,B,j=1/0){return(0,re.m)(B)?de((Z,Ge)=>(0,g.U)((Te,Me)=>B(Z,Te,Ge,Me))((0,W.Xf)(ae(Z,Ge))),j):("number"==typeof B&&(j=B),(0,O.e)((Z,Ge)=>function fe(ae,B,j,Z,Ge,Te,Me,Pe){const he=[];let ve=0,Je=0,We=!1;const De=()=>{We&&!he.length&&!ve&&B.complete()},ye=je=>ve<Z?_e(je):he.push(je),_e=je=>{Te&&B.next(je),ve++;let Ue=!1;(0,W.Xf)(j(je,Je++)).subscribe((0,J.x)(B,te=>{null==Ge||Ge(te),Te?ye(te):B.next(te)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(ve--;he.length&&ve<Z;){const te=he.shift();Me?(0,se.f)(B,Me,()=>_e(te)):_e(te)}De()}catch(te){B.error(te)}}))};return ae.subscribe((0,J.x)(B,ye,()=>{We=!0,De()})),()=>{null==Pe||Pe()}}(Z,Ge,ae,j)))}},5363:(st,Ce,P)=>{P.d(Ce,{Q:()=>se});var g=P(9672),W=P(4482),O=P(5403);function se(J,fe=0){return(0,W.e)((re,de)=>{re.subscribe((0,O.x)(de,ae=>(0,g.f)(de,J,()=>de.next(ae),fe),()=>(0,g.f)(de,J,()=>de.complete(),fe),ae=>(0,g.f)(de,J,()=>de.error(ae),fe)))})}},3099:(st,Ce,P)=>{P.d(Ce,{B:()=>fe});var g=P(8996),W=P(5698),O=P(7579),se=P(2961),J=P(4482);function fe(de={}){const{connector:ae=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Z=!0}=de;return Ge=>{let Te=null,Me=null,Pe=null,he=0,ve=!1,Je=!1;const We=()=>{null==Me||Me.unsubscribe(),Me=null},De=()=>{We(),Te=Pe=null,ve=Je=!1},ye=()=>{const _e=Te;De(),null==_e||_e.unsubscribe()};return(0,J.e)((_e,je)=>{he++,!Je&&!ve&&We();const Ue=Pe=null!=Pe?Pe:ae();je.add(()=>{he--,0===he&&!Je&&!ve&&(Me=re(ye,Z))}),Ue.subscribe(je),Te||(Te=new se.Hp({next:te=>Ue.next(te),error:te=>{Je=!0,We(),Me=re(De,B,te),Ue.error(te)},complete:()=>{ve=!0,We(),Me=re(De,j),Ue.complete()}}),(0,g.D)(_e).subscribe(Te))})(Ge)}}function re(de,ae,...B){return!0===ae?(de(),null):!1===ae?null:ae(...B).pipe((0,W.q)(1)).subscribe(()=>de())}},9468:(st,Ce,P)=>{P.d(Ce,{R:()=>W});var g=P(4482);function W(O,se=0){return(0,g.e)((J,fe)=>{fe.add(O.schedule(()=>J.subscribe(fe),se))})}},5698:(st,Ce,P)=>{P.d(Ce,{q:()=>se});var g=P(515),W=P(4482),O=P(5403);function se(J){return J<=0?()=>g.E:(0,W.e)((fe,re)=>{let de=0;fe.subscribe((0,O.x)(re,ae=>{++de<=J&&(re.next(ae),J<=de&&re.complete())}))})}},8505:(st,Ce,P)=>{P.d(Ce,{b:()=>J});var g=P(576),W=P(4482),O=P(5403),se=P(4671);function J(fe,re,de){const ae=(0,g.m)(fe)||re||de?{next:fe,error:re,complete:de}:fe;return ae?(0,W.e)((B,j)=>{var Z;null===(Z=ae.subscribe)||void 0===Z||Z.call(ae);let Ge=!0;B.subscribe((0,O.x)(j,Te=>{var Me;null===(Me=ae.next)||void 0===Me||Me.call(ae,Te),j.next(Te)},()=>{var Te;Ge=!1,null===(Te=ae.complete)||void 0===Te||Te.call(ae),j.complete()},Te=>{var Me;Ge=!1,null===(Me=ae.error)||void 0===Me||Me.call(ae,Te),j.error(Te)},()=>{var Te,Me;Ge&&(null===(Te=ae.unsubscribe)||void 0===Te||Te.call(ae)),null===(Me=ae.finalize)||void 0===Me||Me.call(ae)}))}):se.y}},4408:(st,Ce,P)=>{P.d(Ce,{o:()=>J});var g=P(727);class W extends g.w0{constructor(re,de){super()}schedule(re,de=0){return this}}const O={setInterval(fe,re,...de){const{delegate:ae}=O;return(null==ae?void 0:ae.setInterval)?ae.setInterval(fe,re,...de):setInterval(fe,re,...de)},clearInterval(fe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(fe)},delegate:void 0};var se=P(8737);class J extends W{constructor(re,de){super(re,de),this.scheduler=re,this.work=de,this.pending=!1}schedule(re,de=0){if(this.closed)return this;this.state=re;const ae=this.id,B=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(B,ae,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(B,this.id,de),this}requestAsyncId(re,de,ae=0){return O.setInterval(re.flush.bind(re,this),ae)}recycleAsyncId(re,de,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return de;O.clearInterval(de)}execute(re,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(re,de);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,de){let B,ae=!1;try{this.work(re)}catch(j){ae=!0,B=j||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:de}=this,{actions:ae}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ae,this),null!=re&&(this.id=this.recycleAsyncId(de,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,Ce,P)=>{P.d(Ce,{v:()=>O});var g=P(6063);class W{constructor(J,fe=W.now){this.schedulerActionCtor=J,this.now=fe}schedule(J,fe=0,re){return new this.schedulerActionCtor(this,J).schedule(re,fe)}}W.now=g.l.now;class O extends W{constructor(J,fe=W.now){super(J,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:fe}=this;if(this._active)return void fe.push(J);let re;this._active=!0;do{if(re=J.execute(J.state,J.delay))break}while(J=fe.shift());if(this._active=!1,re){for(;J=fe.shift();)J.unsubscribe();throw re}}}},4986:(st,Ce,P)=>{P.d(Ce,{z:()=>O});var g=P(4408);const O=new(P(7565).v)(g.o)},6063:(st,Ce,P)=>{P.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(st,Ce,P)=>{P.d(Ce,{z:()=>g});const g={setTimeout(W,O,...se){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(W,O,...se):setTimeout(W,O,...se)},clearTimeout(W){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(W)},delegate:void 0}},2202:(st,Ce,P)=>{P.d(Ce,{h:()=>W});const W=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,Ce,P)=>{P.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,Ce,P)=>{P.d(Ce,{_6:()=>fe,jO:()=>se,yG:()=>J});var g=P(576);function O(re){return re[re.length-1]}function se(re){return(0,g.m)(O(re))?re.pop():void 0}function J(re){return function W(re){return re&&(0,g.m)(re.schedule)}(O(re))?re.pop():void 0}function fe(re,de){return"number"==typeof O(re)?re.pop():de}},8737:(st,Ce,P)=>{function g(W,O){if(W){const se=W.indexOf(O);0<=se&&W.splice(se,1)}}P.d(Ce,{P:()=>g})},3888:(st,Ce,P)=>{function g(W){const se=W(J=>{Error.call(J),J.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(Ce,{d:()=>g})},2806:(st,Ce,P)=>{P.d(Ce,{O:()=>se,x:()=>O});var g=P(2416);let W=null;function O(J){if(g.v.useDeprecatedSynchronousErrorHandling){const fe=!W;if(fe&&(W={errorThrown:!1,error:null}),J(),fe){const{errorThrown:re,error:de}=W;if(W=null,re)throw de}}else J()}function se(J){g.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=J)}},9672:(st,Ce,P)=>{function g(W,O,se,J=0,fe=!1){const re=O.schedule(function(){se(),fe?W.add(this.schedule(null,J)):this.unsubscribe()},J);if(W.add(re),!fe)return re}P.d(Ce,{f:()=>g})},4671:(st,Ce,P)=>{function g(W){return W}P.d(Ce,{y:()=>g})},1144:(st,Ce,P)=>{P.d(Ce,{z:()=>g});const g=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(st,Ce,P)=>{P.d(Ce,{D:()=>W});var g=P(576);function W(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(st,Ce,P)=>{function g(W){return"function"==typeof W}P.d(Ce,{m:()=>g})},3670:(st,Ce,P)=>{P.d(Ce,{c:()=>O});var g=P(8822),W=P(576);function O(se){return(0,W.m)(se[g.L])}},6495:(st,Ce,P)=>{P.d(Ce,{T:()=>O});var g=P(2202),W=P(576);function O(se){return(0,W.m)(null==se?void 0:se[g.h])}},8239:(st,Ce,P)=>{P.d(Ce,{t:()=>W});var g=P(576);function W(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(st,Ce,P)=>{P.d(Ce,{L:()=>se,Q:()=>O});var g=P(655),W=P(576);function O(J){return(0,g.FC)(this,arguments,function*(){const re=J.getReader();try{for(;;){const{value:de,done:ae}=yield(0,g.qq)(re.read());if(ae)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{re.releaseLock()}})}function se(J){return(0,W.m)(null==J?void 0:J.getReader)}},4482:(st,Ce,P)=>{P.d(Ce,{A:()=>W,e:()=>O});var g=P(576);function W(se){return(0,g.m)(null==se?void 0:se.lift)}function O(se){return J=>{if(W(J))return J.lift(function(fe){try{return se(fe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(st,Ce,P)=>{P.d(Ce,{h:()=>O});var g=P(2416),W=P(3410);function O(se){W.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw se;J(se)})}},4532:(st,Ce,P)=>{function g(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>g})},655:(st,Ce,P)=>{function se(Q,ie){var X={};for(var Ee in Q)Object.prototype.hasOwnProperty.call(Q,Ee)&&ie.indexOf(Ee)<0&&(X[Ee]=Q[Ee]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(Ee=Object.getOwnPropertySymbols(Q);pe<Ee.length;pe++)ie.indexOf(Ee[pe])<0&&Object.prototype.propertyIsEnumerable.call(Q,Ee[pe])&&(X[Ee[pe]]=Q[Ee[pe]])}return X}function de(Q,ie,X,Ee){return new(X||(X=Promise))(function(Oe,vt){function $t(Ft){try{He(Ee.next(Ft))}catch(zn){vt(zn)}}function tn(Ft){try{He(Ee.throw(Ft))}catch(zn){vt(zn)}}function He(Ft){Ft.done?Oe(Ft.value):function pe(Oe){return Oe instanceof X?Oe:new X(function(vt){vt(Oe)})}(Ft.value).then($t,tn)}He((Ee=Ee.apply(Q,ie||[])).next())})}function he(Q){return this instanceof he?(this.v=Q,this):new he(Q)}function ve(Q,ie,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,Ee=X.apply(Q,ie||[]),Oe=[];return pe={},vt("next"),vt("throw"),vt("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function vt(En){Ee[En]&&(pe[En]=function(Yt){return new Promise(function(yi,Gt){Oe.push([En,Yt,yi,Gt])>1||$t(En,Yt)})})}function $t(En,Yt){try{!function tn(En){En.value instanceof he?Promise.resolve(En.value.v).then(He,Ft):zn(Oe[0][2],En)}(Ee[En](Yt))}catch(yi){zn(Oe[0][3],yi)}}function He(En){$t("next",En)}function Ft(En){$t("throw",En)}function zn(En,Yt){En(Yt),Oe.shift(),Oe.length&&$t(Oe[0][0],Oe[0][1])}}function We(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,ie=Q[Symbol.asyncIterator];return ie?ie.call(Q):(Q=function Z(Q){var ie="function"==typeof Symbol&&Symbol.iterator,X=ie&&Q[ie],Ee=0;if(X)return X.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&Ee>=Q.length&&(Q=void 0),{value:Q&&Q[Ee++],done:!Q}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),X={},Ee("next"),Ee("throw"),Ee("return"),X[Symbol.asyncIterator]=function(){return this},X);function Ee(Oe){X[Oe]=Q[Oe]&&function(vt){return new Promise(function($t,tn){!function pe(Oe,vt,$t,tn){Promise.resolve(tn).then(function(He){Oe({value:He,done:$t})},vt)}($t,tn,(vt=Q[Oe](vt)).done,vt.value)})}}}P.d(Ce,{FC:()=>ve,KL:()=>We,_T:()=>se,mG:()=>de,qq:()=>he})},5e3:(st,Ce,P)=>{P.d(Ce,{$8M:()=>sa,$Z:()=>ub,AFp:()=>uI,AaK:()=>de,AsE:()=>jg,CRH:()=>Yw,CZH:()=>Ov,CqO:()=>qE,EJc:()=>Fv,F4k:()=>db,FYo:()=>Mw,FiY:()=>Cr,G48:()=>wI,GfV:()=>gv,Gpc:()=>j,JOm:()=>ne,LFG:()=>nt,LSH:()=>zc,Lbi:()=>lI,NdJ:()=>zE,OlP:()=>yn,Oqu:()=>P_,PXZ:()=>sr,Q6J:()=>y_,QGY:()=>ef,Qsj:()=>xw,R0b:()=>Vs,RDi:()=>zi,Rgc:()=>$e,SBq:()=>Cf,Sil:()=>hI,Suo:()=>Wl,TTD:()=>zs,TgZ:()=>Id,Tol:()=>Da,VLi:()=>ec,X6Q:()=>Jt,XFs:()=>at,Xpm:()=>Mt,Y36:()=>wd,YKP:()=>yv,YNc:()=>Sg,Yjl:()=>ur,Yz7:()=>Yt,ZZ4:()=>Lm,_Bn:()=>wf,_UZ:()=>v_,_Vd:()=>om,_c5:()=>Wv,_uU:()=>iw,aQg:()=>Um,c2e:()=>Ld,cJS:()=>Gt,cg1:()=>W_,dDg:()=>Jl,deG:()=>Rc,dqk:()=>Pt,eFA:()=>zf,ekj:()=>yr,g9A:()=>kv,h0i:()=>Gl,hGG:()=>vC,hij:()=>ba,iGM:()=>Zw,ifc:()=>Vt,ip1:()=>aI,kL8:()=>K_,lG2:()=>qt,n5z:()=>ol,oAB:()=>K,oxw:()=>gb,q4F:()=>Uo,qLn:()=>on,qOj:()=>me,qZA:()=>__,sBO:()=>Rm,sIi:()=>Zh,s_b:()=>mm,soG:()=>Vd,tBr:()=>br,tb:()=>Ho,tp0:()=>Di,uIk:()=>Ag,vHH:()=>Me,vpe:()=>ze,wAp:()=>ht,xp6:()=>xy,z2F:()=>Mm,zSh:()=>Ky,zs3:()=>ko});var g=P(7579),W=P(727),O=P(8306),se=P(6451),J=P(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ae(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=fe({__forward_ref__:fe});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function Z(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Me extends Error{constructor(s,a){super(function Pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function ye(i,s){const a=s?` in ${s}`:"";throw new Me(-201,`No provider for ${ve(i)} found${a}`)}function tn(i,s){null==i&&function He(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Gt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lt(i){return Qn(i,Si)||Qn(i,Bi)}function Qn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Er(i){return i&&(i.hasOwnProperty(wr)||i.hasOwnProperty(ji))?i[wr]:null}const Si=fe({\u0275prov:fe}),wr=fe({\u0275inj:fe}),Bi=fe({ngInjectableDef:fe}),ji=fe({ngInjectorDef:fe});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let Pr;function Vn(i){const s=Pr;return Pr=i,s}function Xr(i,s,a){const u=Lt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&at.Optional?null:void 0!==s?s:void ye(de(i),"Injector")}function fn(i){return{toString:i}.toString()}var Kn=(()=>((Kn=Kn||{})[Kn.OnPush=0]="OnPush",Kn[Kn.Default=1]="Default",Kn))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,Jn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=rt||"undefined"!=typeof global&&global||mt||Jn,Xn={},ut=[],ar=fe({\u0275cmp:fe}),Rt=fe({\u0275dir:fe}),Ke=fe({\u0275pipe:fe}),be=fe({\u0275mod:fe}),Ye=fe({\u0275fac:fe}),lt=fe({__NG_ELEMENT_ID__:fe});let Ot=0;function Mt(i){return fn(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Kn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ut,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||ut,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return u.id+=Ot++,u.inputs=ft(i.inputs,a),u.outputs=ft(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,u})}function L(i){return Ut(i)||function wn(i){return i[Rt]||null}(i)}function $(i){return function Ct(i){return i[Ke]||null}(i)}const ue={};function K(i){return fn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ut,declarations:i.declarations||ut,imports:i.imports||ut,exports:i.exports||ut,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ue[i.id]=i.type),s})}function ft(i,s){if(null==i)return Xn;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const qt=Mt;function ur(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[ar]||null}function un(i,s){const a=i[be]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function _i(i){return Array.isArray(i)&&"object"==typeof i[1]}function ni(i){return Array.isArray(i)&&!0===i[1]}function cc(i){return 0!=(8&i.flags)}function ys(i){return 2==(2&i.flags)}function Ba(i){return 1==(1&i.flags)}function kr(i){return null!==i.template}function Qd(i){return 0!=(512&i[2])}function Fr(i,s){return i.hasOwnProperty(Ye)?i[Ye]:null}class mo{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function zs(){return Yo}function Yo(i){return i.type.prototype.ngOnChanges&&(i.setInput=bp),mc}function mc(){const i=Es(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Xn)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function bp(i,s,a,u){const c=Es(i)||function ri(i,s){return i[yo]=s}(i,{previous:Xn,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new mo(I&&I.currentValue,s,_===Xn),i[u]=s}zs.ngInherit=!0;const yo="__ngSimpleChanges__";function Es(i){return i[yo]||null}let Wa;function zi(i){Wa=i}function dn(i){return!!i.listen}const _o={createRenderer:(i,s)=>function Qo(){return void 0!==Wa?Wa:"undefined"!=typeof document?document:void 0}()};function sn(i){for(;Array.isArray(i);)i=i[0];return i}function Ks(i,s){return sn(s[i])}function lr(i,s){return sn(s[i.index])}function Jo(i,s){return i.data[s]}function cr(i,s){const a=s[i];return _i(a)?a:a[0]}function Is(i){return 4==(4&i[2])}function Wi(i){return 128==(128&i[2])}function Vr(i,s){return null==s?null:i[s]}function Ds(i){i[18]=0}function bs(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const ct={lFrame:Ys(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ja(){return ct.bindingsEnabled}function we(){return ct.lFrame.lView}function xt(){return ct.lFrame.tView}function pn(){let i=vo();for(;null!==i&&64===i.type;)i=i.parent;return i}function vo(){return ct.lFrame.currentTNode}function Ur(i,s){const a=ct.lFrame;a.currentTNode=i,a.isParent=s}function $u(){return ct.lFrame.isParent}function Xa(){return ct.isInCheckNoChangesMode}function Cs(i){ct.isInCheckNoChangesMode=i}function Ts(){return ct.lFrame.bindingIndex++}function Ei(i){const s=ct.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function nu(i,s){const a=ct.lFrame;a.bindingIndex=a.bindingRootIndex=i,ea(s)}function ea(i){ct.lFrame.currentDirectiveIndex=i}function Wu(){return ct.lFrame.currentQueryIndex}function Ku(i){ct.lFrame.currentQueryIndex=i}function wc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Zu(i,s,a){if(a&at.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&at.Host||(c=wc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=ct.lFrame=Ic();return u.currentTNode=s,u.lView=i,!0}function Zs(i){const s=Ic(),a=i[1];ct.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ic(){const i=ct.lFrame,s=null===i?null:i.child;return null===s?Ys(i):s}function Ys(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Dc(){const i=ct.lFrame;return ct.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const bc=Dc;function Qs(){const i=Dc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function dr(){return ct.lFrame.selectedIndex}function Ss(i){ct.lFrame.selectedIndex=i}function In(){const i=ct.lFrame;return Jo(i.tView,i.selectedIndex)}function Ki(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function na(i,s,a){Cc(i,s,3,a)}function ru(i,s,a,u){(3&i[2])===a&&Cc(i,s,a,u)}function kn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Cc(i,s,a,u){const f=null!=u?u:-1,_=s.length-1;let E=0;for(let I=void 0!==u?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=u&&E>=u)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Cp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Cp(i,s,a,u){const c=a[u]<0,f=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class wo{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function el(i,s,a){const u=dn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];u?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];tl(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Yi(i){return 3===i||4===i||6===i}function tl(i){return 64===i.charCodeAt(0)}function ra(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||Xs(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function Xs(i,s,a,u,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function Sc(i){return-1!==i}function Xt(i){return 32767&i}function mn(i,s){let a=function Io(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Dt=!0;function Ms(i){const s=Dt;return Dt=i,s}let nh=0;function si(i,s){const a=Do(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Bn(u.data,i),Bn(s,null),Bn(u.blueprint,null));const c=Br(i,s),f=i.injectorIndex;if(Sc(c)){const _=Xt(c),E=mn(c,s),I=E[1].data;for(let A=0;A<8;A++)s[f+A]=E[_+A]|I[_+A]}return s[f+8]=c,f}function Bn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Do(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Br(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(u=2===_?f.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function to(i,s,a){!function eo(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(lt)&&(u=a[lt]),null==u&&(u=a[lt]=nh++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function no(i,s,a){if(a&at.Optional)return i;ye(s,"NodeInjector")}function bo(i,s,a,u){if(a&at.Optional&&void 0===u&&(u=null),0==(a&(at.Self|at.Host))){const c=i[9],f=Vn(void 0);try{return c?c.get(s,u,a&at.Optional):Xr(s,u,a&at.Optional)}finally{Vn(f)}}return no(u,s,a)}function oi(i,s,a,u=at.Default,c){if(null!==i){const f=function Mc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(lt)?i[lt]:void 0;return"number"==typeof s?s>=0?255&s:jn:s}(a);if("function"==typeof f){if(!Zu(s,i,u))return u&at.Host?no(c,a,u):bo(s,a,u,c);try{const _=f(u);if(null!=_||u&at.Optional)return _;ye(a)}finally{bc()}}else if("number"==typeof f){let _=null,E=Do(i,s),I=-1,A=u&at.Host?s[16][6]:null;for((-1===E||u&at.SkipSelf)&&(I=-1===E?Br(i,s):s[E+8],-1!==I&&sl(u,!1)?(_=s[1],E=Xt(I),s=mn(I,s)):E=-1);-1!==E;){const S=s[1];if(ia(f,E,S.data)){const k=ro(E,s,a,_,u,A);if(k!==xs)return k}I=s[E+8],-1!==I&&sl(u,s[1].data[E+8]===A)&&ia(f,E,s)?(_=S,E=Xt(I),s=mn(I,s)):E=-1}}}return bo(s,a,u,c)}const xs={};function jn(){return new wi(pn(),we())}function ro(i,s,a,u,c,f){const _=s[1],E=_.data[i+8],S=il(E,_,a,null==u?ys(E)&&Dt:u!=_&&0!=(3&E.type),c&at.Host&&f===E);return null!==S?Ri(s,_,S,E):xs}function il(i,s,a,u,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let z=u?E:E+S;z<V;z++){const ge=_[z];if(z<I&&a===ge||z>=I&&ge.type===a)return z}if(c){const z=_[I];if(z&&kr(z)&&z.type===a)return I}return null}function Ri(i,s,a,u){let c=i[a];const f=s.data;if(function Tc(i){return i instanceof wo}(c)){const _=c;_.resolving&&function Je(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Me(-200,`Circular dependency in DI detected for ${i}${a}`)}(ve(f[a]));const E=Ms(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Vn(_.injectImpl):null;Zu(i,u,at.Default);try{c=i[a]=_.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function Ju(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const _=Yo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Vn(I),Ms(E),_.resolving=!1,bc()}}return c}function ia(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function sl(i,s){return!(i&at.Self||i&at.Host&&s)}class wi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return oi(this._tNode,this._lView,s,u,a)}}function ol(i){return fn(()=>{const s=i.prototype.constructor,a=s[Ye]||io(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[Ye]||io(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function io(i){return Ge(i)?()=>{const s=io(Z(i));return s&&s()}:Fr(i)}function sa(i){return function rl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(Yi(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(pn(),i)}const Ji="__parameters__";function so(i,s,a){return fn(()=>{const u=function su(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,A,S){const k=I.hasOwnProperty(Ji)?I[Ji]:Object.defineProperty(I,Ji,{value:[]})[Ji];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class yn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rc=new yn("AnalyzeForEntryComponents");function Dr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Dr(u,s)):s!==i&&s.push(u)}return s}function Ii(i,s){i.forEach(a=>Array.isArray(a)?Ii(a,s):s(a))}function ul(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Xi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ui(i,s,a){let u=ua(i,s);return u>=0?i[1|u]=a:(u=~u,function aa(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function ah(i,s){const a=ua(i,s);if(a>=0)return i[1|a]}function ua(i,s){return function oo(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const ts={},Rs="__NG_DI_FLAG__",dl="ngTempTokenPath",b=/\n/gm,F="__source",q=fe({provide:String,useValue:fe});let ee;function Se(i){const s=ee;return ee=i,s}function Ze(i,s=at.Default){if(void 0===ee)throw new Me(203,"");return null===ee?Xr(i,void 0,s):ee.get(i,s&at.Optional?null:void 0,s)}function nt(i,s=at.Default){return(function Wn(){return Pr}()||Ze)(Z(i),s)}const Bt=nt;function _t(i){const s=[];for(let a=0;a<i.length;a++){const u=Z(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Me(900,"");let c,f=at.Default;for(let _=0;_<u.length;_++){const E=u[_],I=vn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(nt(c,f))}else s.push(nt(u))}return s}function xn(i,s){return i[Rs]=s,i.prototype[Rs]=s,i}function vn(i){return i[Rs]}const br=xn(so("Inject",i=>({token:i})),-1),Cr=xn(so("Optional"),8),Di=xn(so("SkipSelf"),4);class mh{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function rs(i){return i instanceof mh?i.changingThisBreaksApplicationSecurity:i}const fa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$p=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var $n=(()=>(($n=$n||{})[$n.NONE=0]="NONE",$n[$n.HTML=1]="HTML",$n[$n.STYLE=2]="STYLE",$n[$n.SCRIPT=3]="SCRIPT",$n[$n.URL=4]="URL",$n[$n.RESOURCE_URL=5]="RESOURCE_URL",$n))();function zc(i){const s=function Kc(){const i=we();return i&&i[12]}();return s?s.sanitize($n.URL,i)||"":function pl(i,s){const a=function vh(i){return i instanceof mh&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?rs(i):function hu(i){return(i=String(i)).match(fa)||i.match($p)?i:"unsafe:"+i}(he(i))}const Yp="__ngContext__";function tt(i,s){i[Yp]=s}function bi(i){const s=function li(i){return i[Yp]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Qc(i){return i.ngOriginalError}function Sh(i,...s){i.error(...s)}class on{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function gu(i){return i&&i.ngErrorLogger||Sh}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Qc(s);for(;a&&Qc(a);)a=Qc(a);return a||null}}const Dl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function p(i){return i instanceof Function?i():i}var ne=(()=>((ne=ne||{})[ne.Important=1]="Important",ne[ne.DashCase=2]="DashCase",ne))();function Qe(i,s){return undefined(i,s)}function Dn(i){const s=i[3];return ni(s)?s[3]:s}function Xc(i){return ed(i[13])}function yu(i){return ed(i[4])}function ed(i){for(;null!==i&&!ni(i);)i=i[4];return i}function xo(i,s,a,u,c){if(null!=u){let f,_=!1;ni(u)?f=u:_i(u)&&(_=!0,u=u[0]);const E=sn(u);0===i&&null!==a?null==c?S0(s,a,E):Cl(s,a,E,c||null,!0):1===i&&null!==a?Cl(s,a,E,c||null,!0):2===i?function O0(i,s,a){const u=ng(i,s);u&&function M0(i,s,a,u){dn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function Ph(i,s,a,u,c){const f=a[7];f!==sn(a)&&xo(s,i,u,f,c);for(let E=10;E<a.length;E++){const I=a[E];id(I[1],I,i,s,u,f)}}(s,i,f,a,c)}}function St(i,s,a){if(dn(i))return i.createElement(s,a);{const u=null!==a?function za(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function T0(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,bs(c,-1)),a.splice(u,1)}function Os(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&T0(c,u),s>0&&(i[a-1][4]=u[4]);const f=Xi(i,10+s);!function Ey(i,s){id(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Iy(i,s){if(!(256&s[2])){const a=s[11];dn(a)&&a.destroyNode&&id(i,s,a,3,null,null),function wy(i){let s=i[13];if(!s)return tg(i[1],i);for(;s;){let a=null;if(_i(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)_i(s)&&tg(s[1],s),s=s[3];null===s&&(s=i),_i(s)&&tg(s[1],s),a=s&&s[4]}s=a}}(s)}}function tg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function gA(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof wo)){const f=a[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function A0(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):sn(s[_]),I=u[c=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],I,A):A>=0?u[c=A]():u[c=-A].unsubscribe(),f+=2}else{const _=u[c=a[f+1]];a[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&dn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ni(s[3])){a!==s[3]&&T0(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function Ar(i,s,a){return function uo(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return lr(u,a)}(i,s.parent,a)}function Cl(i,s,a,u,c){dn(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function S0(i,s,a){dn(i)?i.appendChild(s,a):s.appendChild(a)}function Dy(i,s,a,u,c){null!==u?Cl(i,s,a,u,c):S0(i,s,a)}function ng(i,s){return dn(i)?i.parentNode(s):s.parentNode}let Cy=function by(i,s,a){return 40&i.type?lr(i,a):null};function kt(i,s,a,u){const c=Ar(i,u,s),f=s[11],E=function R0(i,s,a){return Cy(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Dy(f,c,a[I],E,!1);else Dy(f,c,a,E,!1)}function vu(i,s){if(null!==s){const a=s.type;if(3&a)return lr(s,i);if(4&a)return ga(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return vu(i,u);{const c=i[s.index];return ni(c)?ga(-1,c):sn(c)}}if(32&a)return Qe(s,i)()||sn(i[s.index]);{const u=N0(i,s);return null!==u?Array.isArray(u)?u[0]:vu(Dn(i[16]),u):vu(i,s.next)}}return null}function N0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ga(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return vu(u,c)}return s[7]}function rg(i,s,a,u,c,f,_){for(;null!=a;){const E=u[a.index],I=a.type;if(_&&0===s&&(E&&tt(sn(E),u),a.flags|=4),64!=(64&a.flags))if(8&I)rg(i,s,a.child,u,c,f,!1),xo(s,i,c,E,f);else if(32&I){const A=Qe(a,u);let S;for(;S=A();)xo(s,i,c,S,f);xo(s,i,c,E,f)}else 16&I?Oh(i,s,u,a,c,f):xo(s,i,c,E,f);a=_?a.projectionNext:a.next}}function id(i,s,a,u,c,f){rg(a,u,i.firstChild,s,c,f,!1)}function Oh(i,s,a,u,c,f){const _=a[16],I=_[6].projection[u.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)xo(s,i,c,I[A],f);else rg(i,s,I,_[3],c,f,!0)}function kh(i,s,a){dn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Ty(i,s,a){dn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function ig(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const Sy="ng-template";function k0(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==ig(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function F0(i){return 4===i.type&&i.value!==Sy}function tD(i,s,a){return s===(4!==i.type||a?i.value:Sy)}function nD(i,s,a){let u=4;const c=i.attrs||[],f=function sD(i){for(let s=0;s<i.length;s++)if(Yi(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&u){if(u=2|1&u,""!==I&&!tD(i,I,a)||""===I&&1===s.length){if(ki(u))return!1;_=!0}}else{const A=8&u?I:s[++E];if(8&u&&null!==i.attrs){if(!k0(i.attrs,A,a)){if(ki(u))return!1;_=!0}continue}const k=rD(8&u?"class":I,c,F0(i),a);if(-1===k){if(ki(u))return!1;_=!0;continue}if(""!==A){let V;V=k>f?"":c[k+1].toLowerCase();const z=8&u?V:null;if(z&&-1!==ig(z,A,0)||2&u&&A!==V){if(ki(u))return!1;_=!0}}}}else{if(!_&&!ki(u)&&!ki(I))return!1;if(_&&ki(I))continue;_=!1,u=I|1&u}}return ki(u)||_}function ki(i){return 0==(1&i)}function rD(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function oD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function L0(i,s,a=!1){for(let u=0;u<s.length;u++)if(nD(i,s[u],a))return!0;return!1}function sg(i,s){return i?":not("+s.trim()+")":s}function My(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!ki(_)&&(s+=sg(f,c),c=""),u=_,f=f||!ki(u);a++}return""!==c&&(s+=sg(f,c)),s}const bt={};function xy(i){U0(xt(),we(),dr()+i,Xa())}function U0(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&na(s,f,a)}else{const f=i.preOrderHooks;null!==f&&ru(s,f,0,a)}Ss(a)}function Fh(i,s){return i<<17|s<<2}function lo(i){return i>>17&32767}function Vh(i){return 2|i}function No(i){return(131068&i)>>2}function Uh(i,s){return-131069&i|s<<2}function Ry(i){return 1|i}function Py(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const _=i.data[f];Ku(c),_.contentQueries(2,s[f],f)}}}function wu(i,s,a,u,c,f,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,Ds(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function ad(i,s,a,u,c){let f=i.data[s];if(null===f)f=function ky(i,s,a,u,c){const f=vo(),_=$u(),I=i.data[s]=function pD(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,c),function qu(){return ct.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const _=function Eo(){const i=ct.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Ur(f,!0),f}function ud(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function Hh(i,s,a){Zs(s);try{const u=i.viewQuery;null!==u&&Gy(1,u,a);const c=i.template;null!==c&&Fy(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Py(i,s),i.staticViewQueries&&Gy(2,i.viewQuery,a);const f=i.components;null!==f&&function pg(i,s){for(let a=0;a<s.length;a++)AD(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Qs()}}function _a(i,s,a,u){const c=s[2];if(256==(256&c))return;Zs(s);const f=Xa();try{Ds(s),function eu(i){return ct.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Fy(i,s,a,2,u);const _=3==(3&c);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&na(s,A,null)}else{const A=i.preOrderHooks;null!==A&&ru(s,A,0,null),kn(s,0)}if(function CD(i){for(let s=Xc(i);null!==s;s=yu(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&bs(f,1),c[2]|=1024}}}(s),function aE(i){for(let s=Xc(i);null!==s;s=yu(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Wi(u)&&_a(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&Py(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&na(s,A)}else{const A=i.contentHooks;null!==A&&ru(s,A,1),kn(s,1)}!function Ps(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)Ss(~c);else{const f=c,_=a[++u],E=a[++u];nu(_,f),E(2,s[f])}}}finally{Ss(-1)}}(i,s);const E=i.components;null!==E&&function Z0(i,s){for(let a=0;a<s.length;a++)TD(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Gy(2,I,u),!f)if(_){const A=i.viewCheckHooks;null!==A&&na(s,A)}else{const A=i.viewHooks;null!==A&&ru(s,A,2),kn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,bs(s[3],-1))}finally{Qs()}}function Y0(i,s,a,u){const c=s[10],f=!Xa(),_=Is(s);try{f&&!_&&c.begin&&c.begin(),_&&Hh(i,s,u),_a(i,s,a,u)}finally{f&&!_&&c.end&&c.end()}}function Fy(i,s,a,u,c){const f=dr(),_=2&u;try{Ss(-1),_&&s.length>20&&U0(i,s,20,Xa()),a(u,c)}finally{Ss(f)}}function gg(i,s,a){!Ja()||(function vD(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||si(a,s),tt(u,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],A=kr(I);A&&DD(s,a,I);const S=Ri(s,i,E,a);tt(S,s),null!==_&&AA(0,E-c,S,I,0,_),A&&(cr(a.index,s)[8]=S)}}(i,s,a,lr(a,s)),128==(128&a.flags)&&function ED(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,E=function zu(){return ct.lFrame.currentDirectiveIndex}();try{Ss(_);for(let I=u;I<c;I++){const A=i.data[I],S=s[I];ea(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&tE(A,S)}}finally{Ss(-1),ea(E)}}(i,s,a))}function Nl(i,s,a=lr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function Ly(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=mg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function mg(i,s,a,u,c,f,_,E,I,A){const S=20+u,k=S+c,V=function fD(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:bt);return a}(S,k),z="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:z,incompleteFirstPass:!1}}function yg(i,s,a,u){const c=qy(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&cE(i).push(u,c.length-1))}function Vy(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function Uy(i,s,a,u){let c=!1;if(Ja()){const f=function wD(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];L0(a,_.selectors,!1)&&(c||(c=[]),to(si(a,s),i,_.type),kr(_)?(nE(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==f){c=!0,iE(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const k=f[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,A=ud(i,s,f.length,null);for(let S=0;S<f.length;S++){const k=f[S];a.mergedAttrs=ra(a.mergedAttrs,k.hostAttrs),sE(i,a,s,A,k),ID(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function _g(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<u;A++){const S=c[A],k=S.inputs,V=null===f||F0(s)?null:oE(k,f);_.push(V),E=Vy(k,A,E),I=Vy(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function rE(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Me(-301,!1);u.push(s[c],f)}}}(a,u,_)}return a.mergedAttrs=ra(a.mergedAttrs,a.attrs),c}function eE(i,s,a,u,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function _D(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(u,c,_)}}function tE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function nE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function ID(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;kr(s)&&(a[""]=i)}}function iE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function sE(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=Fr(c.type)),_=new wo(f,kr(c),null);i.blueprint[u]=_,a[u]=_,eE(i,s,0,u,ud(i,a,c.hostVars,bt),c)}function DD(i,s,a){const u=lr(s,i),c=Ly(a),f=i[10],_=Dg(i,wu(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=_}function Oo(i,s,a,u,c,f){const _=lr(i,s);!function Ig(i,s,a,u,c,f,_){if(null==f)dn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(f):_(f,u||"",c);dn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,u,c)}function AA(i,s,a,u,c,f){const _=f[s];if(null!==_){const E=u.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],k=_[I++];null!==E?u.setInput(a,k,A,S):a[S]=k}}}function oE(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function By(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function TD(i,s){const a=cr(s,i);if(Wi(a)){const u=a[1];80&a[2]?_a(u,a,u.template,a[8]):a[5]>0&&jy(a)}}function jy(i){for(let u=Xc(i);null!==u;u=yu(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const _=f[1];_a(_,f,_.template,f[8])}else f[5]>0&&jy(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=cr(a[u],i);Wi(c)&&c[5]>0&&jy(c)}}function AD(i,s){const a=cr(s,i),u=a[1];(function uE(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),Hh(u,a,a[8])}function Dg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function qh(i){for(;i;){i[2]|=64;const s=Dn(i);if(Qd(i)&&!s)return i;i=s}return null}function Hy(i,s,a){const u=s[10];u.begin&&u.begin();try{_a(i,s,i.template,a)}catch(c){throw Fi(s,c),c}finally{u.end&&u.end()}}function bg(i){!function $y(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=bi(a),c=u[1];Y0(c,u,c.template,a)}}(i[8])}function Gy(i,s,a){Ku(0),s(i,a)}const xD=(()=>Promise.resolve(null))();function qy(i){return i[7]||(i[7]=[])}function cE(i){return i.cleanup||(i.cleanup=[])}function Fi(i,s){const a=i[9],u=a?a.get(on,null):null;u&&u.handleError(s)}function hE(i,s,a,u,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,u,E):I[E]=c}}function Po(i,s,a){const u=Ks(s,i);!function Nh(i,s,a){dn(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function ld(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ae(c,E):2==f&&(u=ae(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const zy=new yn("INJECTOR",-1);class Wy{get(s,a=ts){if(a===ts){const u=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw u.name="NullInjectorError",u}return a}}const Ky=new yn("Set Injector scope."),dd={},fE={};let Wh;function RD(){return void 0===Wh&&(Wh=new Wy),Wh}function Iu(i,s=null,a=null,u){const c=Zy(i,s,a,u);return c._resolveInjectorDefTypes(),c}function Zy(i,s=null,a=null,u){return new ND(i,a,s||RD(),u)}class ND{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&Ii(a,E=>this.processProvider(E,s,a)),Ii([s],E=>this.processInjectorType(E,[],f)),this.records.set(zy,hd(void 0,this));const _=this.records.get(Ky);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:de(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ts,u=at.Default){this.assertNotDestroyed();const c=Se(this),f=Vn(void 0);try{if(!(u&at.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function mE(i){return"function"==typeof i||"object"==typeof i&&i instanceof yn}(s)&&Lt(s);E=I&&this.injectableDefInScope(I)?hd(Yy(s),dd):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&at.Self?RD():this.parent).get(s,a=u&at.Optional&&a===ts?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[dl]=_[dl]||[]).unshift(de(s)),c)throw _;return function da(i,s,a,u){const c=i[dl];throw s[F]&&c.unshift(s[F]),i.message=function To(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=de(s);if(Array.isArray(s))c=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):de(E)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[dl]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Vn(f),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(de(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processInjectorType(s,a,u){if(!(s=Z(s)))return!1;let c=Er(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==u.indexOf(_);if(void 0!==f&&(c=Er(f)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(_);try{Ii(c.imports,k=>{this.processInjectorType(k,a,u)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:z}=S[k];Ii(z,ge=>this.processProvider(ge,V,z||ut))}}this.injectorDefTypes.add(_);const I=Fr(_)||(()=>new _);this.records.set(_,hd(I,dd));const A=c.providers;if(null!=A&&!E){const S=s;Ii(A,k=>this.processProvider(k,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=fd(s=Z(s))?s:Z(s&&s.provide);const f=function OD(i,s,a){return Qy(i)?hd(void 0,i.useValue):hd(gE(i),dd)}(s);if(fd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=hd(void 0,dd,!0),_.factory=()=>_t(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===dd&&(a.value=fE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function LD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Yy(i){const s=Lt(i),a=null!==s?s.factory:Fr(i);if(null!==a)return a;if(i instanceof yn)throw new Me(204,!1);if(i instanceof Function)return function pE(i){const s=i.length;if(s>0)throw function $r(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Me(204,!1);const a=function Jr(i){const s=i&&(i[Si]||i[Bi]);if(s){const a=function hs(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Me(204,!1)}function gE(i,s,a){let u;if(fd(i)){const c=Z(i);return Fr(c)||Yy(c)}if(Qy(i))u=()=>Z(i.useValue);else if(function kD(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(..._t(i.deps||[]));else if(function PD(i){return!(!i||!i.useExisting)}(i))u=()=>nt(Z(i.useExisting));else{const c=Z(i&&(i.useClass||i.provide));if(!function FD(i){return!!i.deps}(i))return Fr(c)||Yy(c);u=()=>new c(..._t(i.deps))}return u}function hd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Qy(i){return null!==i&&"object"==typeof i&&q in i}function fd(i){return"function"==typeof i}let ko=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return Iu({name:""},u,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return Iu({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=ts,i.NULL=new Wy,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>nt(zy)}),i.__NG_ELEMENT_ID__=-1,i})();function NA(i,s){Ki(bi(i)[1],pn())}function me(i){let s=function zD(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(kr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Me(903,"");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=pd(i.inputs),_.declaredInputs=pd(i.declaredInputs),_.outputs=pd(i.outputs);const E=c.hostBindings;E&&DE(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&jt(i,I),A&&Du(i,A),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),kr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===me&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Ol(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=ra(c.hostAttrs,a=ra(a,c.hostAttrs))}}(u)}function pd(i){return i===Xn?{}:i===ut?[]:i}function jt(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function Du(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function DE(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let Li=null;function va(){if(!Li){const i=Pt.Symbol;if(i&&i.iterator)Li=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Li=u)}}}return Li}function Zh(i){return!!Tg(i)&&(Array.isArray(i)||!(i instanceof Map)&&va()in i)}function Tg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ag(i,s,a,u){const c=we();return ci(c,Ts(),s)&&(xt(),Oo(In(),c,i,s,a,u)),Ag}function Ea(i,s,a,u,c,f){const E=function Pl(i,s,a,u){const c=ci(i,s,a);return ci(i,s+1,u)||c}(i,function ii(){return ct.lFrame.bindingIndex}(),a,c);return Ei(2),E?s+he(a)+u+he(c)+f:bt}function Sg(i,s,a,u,c,f,_,E){const I=we(),A=xt(),S=i+20,k=A.firstCreatePass?function ME(i,s,a,u,c,f,_,E,I){const A=s.consts,S=ad(s,i,4,_||null,Vr(A,E));Uy(s,a,S,Vr(A,I)),Ki(s,S);const k=S.tViews=mg(2,S,u,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,u,c,f,_):A.data[S];Ur(k,!1);const V=I[11].createComment("");kt(A,I,V,k),tt(V,I),Dg(I,I[S]=By(V,I,V,k)),Ba(k)&&gg(A,I,k),null!=_&&Nl(I,k,E)}function wd(i,s=at.Default){const a=we();return null===a?nt(i,s):oi(pn(),a,Z(i),s)}function ub(){throw new Error("invalid")}function y_(i,s,a){const u=we();return ci(u,Ts(),s)&&function ss(i,s,a,u,c,f,_,E){const I=lr(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[u])?(hE(i,a,S,u,c),ys(s)&&function vg(i,s){const a=cr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function gD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,dn(f)?f.setProperty(I,u,c):tl(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}(xt(),In(),u,i,s,u[11],a,!1),y_}function GE(i,s,a,u,c){const _=c?"class":"style";hE(i,a,s.inputs[_],_,u)}function Id(i,s,a,u){const c=we(),f=xt(),_=20+i,E=c[11],I=c[_]=St(E,s,function uy(){return ct.lFrame.currentNamespace}()),A=f.firstCreatePass?function PA(i,s,a,u,c,f,_){const E=s.consts,A=ad(s,i,2,c,Vr(E,f));return Uy(s,a,A,Vr(E,_)),null!==A.attrs&&ld(A,A.attrs,!1),null!==A.mergedAttrs&&ld(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,u):f.data[_];Ur(A,!0);const S=A.mergedAttrs;null!==S&&el(E,I,S);const k=A.classes;null!==k&&Ty(E,I,k);const V=A.styles;return null!==V&&kh(E,I,V),64!=(64&A.flags)&&kt(f,c,I,A),0===function Xo(){return ct.lFrame.elementDepthCount}()&&tt(I,c),function Ya(){ct.lFrame.elementDepthCount++}(),Ba(A)&&(gg(f,c,A),function Gh(i,s,a){if(cc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,c)),null!==u&&Nl(c,A),Id}function __(){let i=pn();$u()?function Hu(){ct.lFrame.isParent=!1}():(i=i.parent,Ur(i,!1));const s=i;!function Qa(){ct.lFrame.elementDepthCount--}();const a=xt();return a.firstCreatePass&&(Ki(a,i),cc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function th(i){return 0!=(16&i.flags)}(s)&&GE(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Tp(i){return 0!=(32&i.flags)}(s)&&GE(a,s,we(),s.stylesWithoutHost,!1),__}function v_(i,s,a,u){return Id(i,s,a,u),__(),v_}function ef(i){return!!i&&"function"==typeof i.then}function db(i){return!!i&&"function"==typeof i.subscribe}const qE=db;function zE(i,s,a,u){const c=we(),f=xt(),_=pn();return function fb(i,s,a,u,c,f,_,E){const I=Ba(u),S=i.firstCreatePass&&cE(i),k=s[8],V=qy(s);let z=!0;if(3&u.type||E){const Be=lr(u,s),et=E?E(Be):Be,Ie=V.length,dt=E?Ht=>E(sn(Ht[u.index])):u.index;if(dn(a)){let Ht=null;if(!E&&I&&(Ht=function hb(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===u){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,u.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=f,Ht.__ngLastListenerFn__=f,z=!1;else{f=E_(u,s,k,f,!1);const cn=a.listen(et,c,f);V.push(f,cn),S&&S.push(c,dt,Ie,Ie+1)}}else f=E_(u,s,k,f,!0),et.addEventListener(c,f,_),V.push(f),S&&S.push(c,dt,Ie,_)}else f=E_(u,s,k,f,!1);const ge=u.outputs;let Ne;if(z&&null!==ge&&(Ne=ge[c])){const Be=Ne.length;if(Be)for(let et=0;et<Be;et+=2){const ls=s[Ne[et]][Ne[et+1]].subscribe(f),oc=V.length;V.push(f,ls),S&&S.push(c,u.index,oc,-(oc+1))}}}(f,c,c[11],_,i,s,!!a,u),zE}function pb(i,s,a,u){try{return!1!==a(u)}catch(c){return Fi(i,c),!1}}function E_(i,s,a,u,c){return function f(_){if(_===Function)return u;const E=2&i.flags?cr(i.index,s):s;0==(32&s[2])&&qh(E);let I=pb(s,0,u,_),A=f.__ngNextListenerFn__;for(;A;)I=pb(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function gb(i=1){return function As(i){return(ct.lFrame.contextLView=function Yu(i,s){for(;i>0;)s=s[15],i--;return s}(i,ct.lFrame.contextLView))[8]}(i)}function Fg(i,s,a,u,c){const f=i[a+1],_=null===s;let E=u?lo(f):No(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];vb(i[E],s)&&(I=!0,i[E+1]=u?Ry(S):Vh(S)),E=u?lo(S):No(S)}I&&(i[a+1]=u?Vh(f):Ry(f))}function vb(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ua(i,s)>=0}const mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Eb(i){return i.substring(mr.key,mr.keyEnd)}function Lo(i,s){const a=mr.textEnd;return a===s?-1:(s=mr.keyEnd=function S_(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,mr.key=s,a),Ia(i,s,a))}function Ia(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function yr(i,s){return function ho(i,s,a,u){const c=we(),f=xt(),_=Ei(2);f.firstUpdatePass&&XE(f,i,_,u),s!==bt&&ci(c,_,s)&&Ug(f,f.data[dr()],c,c[11],i,c[_+1]=function rw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(rs(i)))),i}(s,a),u,_)}(i,s,null,!0),yr}function Da(i){!function Fs(i,s,a,u){const c=xt(),f=Ei(2);c.firstUpdatePass&&XE(c,null,f,u);const _=we();if(a!==bt&&ci(_,f,a)){const E=c.data[dr()];if(Bg(E,u)&&!x_(c,f)){let I=u?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(a=ae(I,a||"")),GE(c,E,_,a,u)}else!function nw(i,s,a,u,c,f,_,E){c===bt&&(c=ut);let I=0,A=0,S=0<c.length?c[0]:null,k=0<f.length?f[0]:null;for(;null!==S||null!==k;){const V=I<c.length?c[I+1]:void 0,z=A<f.length?f[A+1]:void 0;let Ne,ge=null;S===k?(I+=2,A+=2,V!==z&&(ge=k,Ne=z)):null===k||null!==S&&S<k?(I+=2,ge=S):(A+=2,ge=k,Ne=z),null!==ge&&Ug(i,s,a,u,ge,Ne,_,E),S=I<c.length?c[I]:null,k=A<f.length?f[A]:null}}(c,E,_,_[11],_[f+1],_[f+1]=function Ai(i,s,a){if(null==a||""===a)return ut;const u=[],c=rs(a);if(Array.isArray(c))for(let f=0;f<c.length;f++)i(u,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&i(u,f,c[f]);else"string"==typeof c&&s(u,c);return u}(i,s,a),u,f)}}(ui,Vo,i,!0)}function Vo(i,s){for(let a=function Ib(i){return function wt(i){mr.key=0,mr.keyEnd=0,mr.value=0,mr.valueEnd=0,mr.textEnd=i.length}(i),Lo(i,Ia(i,0,mr.textEnd))}(s);a>=0;a=Lo(s,a))ui(i,Eb(s),!0)}function x_(i,s){return s>=i.expandoStartIndex}function XE(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[dr()],_=x_(i,a);Bg(f,u)&&null===s&&!_&&(s=!1),s=function ew(i,s,a,u){const c=function ta(i){const s=ct.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=kl(a=Wr(null,i,s,a,u),s.attrs,u),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Wr(c,i,s,a,u),null===f){let I=function R_(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==No(u))return i[lo(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=Wr(null,i,s,I[1],u),I=kl(I,s.attrs,u),function Vg(i,s,a,u){i[lo(a?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function tw(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=kl(u,i[f].hostAttrs,a);return kl(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function yb(i,s,a,u,c,f){let _=f?s.classBindings:s.styleBindings,E=lo(_),I=No(_);i[u]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||ua(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=lo(i[E+1]);i[u+1]=Fh(V,E),0!==V&&(i[V+1]=Uh(i[V+1],u)),i[E+1]=function B0(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=Fh(E,0),0!==E&&(i[E+1]=Uh(i[E+1],u)),E=u;else i[u+1]=Fh(I,0),0===E?E=u:i[I+1]=Uh(i[I+1],u),I=u;A&&(i[u+1]=Vh(i[u+1])),Fg(i,S,u,!0),Fg(i,S,u,!1),function _b(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&ua(f,s)>=0&&(a[u+1]=Ry(a[u+1]))}(s,S,i,u,f),_=Fh(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,u)}}function Wr(i,s,a,u,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],u=kl(u,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function kl(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ui(i,_,!!a||s[++f]))}return void 0===i?null:i}function Ug(i,s,a,u,c,f,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];nf(function og(i){return 1==(1&i)}(A)?O_(I,s,a,c,No(A),_):void 0)||(nf(f)||function Lh(i){return 2==(2&i)}(A)&&(f=O_(I,null,a,c,E,_)),function P0(i,s,a,u,c){const f=dn(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:ne.DashCase;if(null==c)f?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ne.Important),f?i.setStyle(a,u,c,_):a.style.setProperty(u,c,E?"important":"")}}}(u,_,Ks(dr(),a),c,f))}function O_(i,s,a,u,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,k=null===S;let V=a[c+1];V===bt&&(V=k?ut:void 0);let z=k?ah(V,u):S===u?V:void 0;if(A&&!nf(z)&&(z=ah(I,u)),nf(z)&&(E=z,_))return E;const ge=i[c+1];c=_?lo(ge):No(ge)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=ah(I,u))}return E}function nf(i){return void 0!==i}function Bg(i,s){return 0!=(i.flags&(s?16:32))}function iw(i,s=""){const a=we(),u=xt(),c=i+20,f=u.firstCreatePass?ad(u,c,1,s,null):u.data[c],_=a[c]=function td(i,s){return dn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);kt(u,a,_,f),Ur(f,!1)}function P_(i){return ba("",i,""),P_}function ba(i,s,a){const u=we(),c=function bu(i,s,a,u){return ci(i,Ts(),a)?s+he(a)+u:bt}(u,i,s,a);return c!==bt&&Po(u,dr(),c),ba}function jg(i,s,a,u,c){const f=we(),_=Ea(f,i,s,a,u,c);return _!==bt&&Po(f,dr(),_),jg}const Ca=void 0;var Kr=["en",[["a","p"],["AM","PM"],Ca],[["AM","PM"],Ca,Ca],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ca,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ca,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ca,"{1} 'at' {0}",Ca],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xr(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Ta={};function W_(i){const s=function Z_(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=cw(s);if(a)return a;const u=s.split("-")[0];if(a=cw(u),a)return a;if("en"===u)return Kr;throw new Error(`Missing locale data for the locale "${i}".`)}function K_(i){return W_(i)[ht.PluralCase]}function cw(i){return i in Ta||(Ta[i]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[i]),Ta[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const af="en-US";let dw=af;function vf(i,s,a,u,c){if(i=Z(i),Array.isArray(i))for(let f=0;f<i.length;f++)vf(i[f],s,a,u,c);else{const f=xt(),_=we();let E=fd(i)?i:Z(i.provide),I=gE(i);const A=pn(),S=1048575&A.providerIndexes,k=A.directiveStart,V=A.providerIndexes>>20;if(fd(i)||!i.multi){const z=new wo(I,c,wd),ge=im(E,s,c?S:S+V,k);-1===ge?(to(si(A,_),f,E),Ef(f,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(z),_.push(z)):(a[ge]=z,_[ge]=z)}else{const z=im(E,s,S+V,k),ge=im(E,s,S,S+V),Ne=z>=0&&a[z],Be=ge>=0&&a[ge];if(c&&!Be||!c&&!Ne){to(si(A,_),f,E);const et=function Kb(i,s,a,u,c){const f=new wo(i,a,wd);return f.multi=[],f.index=s,f.componentProviders=0,cv(f,c,u&&!a),f}(c?Wb:dv,a.length,c,u,I);!c&&Be&&(a[ge].providerFactory=et),Ef(f,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(et),_.push(et)}else Ef(f,i,z>-1?z:ge,cv(a[c?ge:z],I,!c&&u));!c&&u&&Be&&a[ge].componentProviders++}}}function Ef(i,s,a,u){const c=fd(s),f=function Jy(i){return!!i.useClass}(s);if(c||f){const I=(f?Z(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[u,I]):A[S+1].push(u,I)}else A.push(a,I)}}}function cv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function im(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function dv(i,s,a,u){return hv(this.multi,[])}function Wb(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Ri(a,a[1],this.providerFactory.index,u);f=E.slice(0,_),hv(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],hv(c,f);return f}function hv(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function wf(i,s=[]){return a=>{a.providersResolver=(u,c)=>function Sw(i,s,a){const u=xt();if(u.firstCreatePass){const c=kr(i);vf(a,u.data,u.blueprint,c,!0),vf(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Df{}class bf{resolveComponentFactory(s){throw function fv(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let om=(()=>{class i{}return i.NULL=new bf,i})();function ir(){return $l(pn(),we())}function $l(i,s){return new Cf(lr(i,s))}let Cf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=ir,i})();function Zb(i){return i instanceof Cf?i.nativeElement:i}class Mw{}let xw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Nw(){const i=we(),a=cr(pn().index,i);return function Rw(i){return i[11]}(_i(a)?a:i)}(),i})(),am=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class gv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Uo=new gv("13.3.5"),um={};function lm(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(sn(f)),ni(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&lm(I[1],I,A,u)}const _=a.type;if(8&_)lm(i,s,a.child,u);else if(32&_){const E=Qe(a,s);let I;for(;I=E();)u.push(I)}else if(16&_){const E=N0(s,a);if(Array.isArray(E))u.push(...E);else{const I=Dn(s[16]);lm(I[1],I,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class Hl{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return lm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ni(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(Os(s,u),Xi(a,u))}this._attachedToViewContainer=!1}Iy(this._lView[1],this._lView)}onDestroy(s){yg(this._lView[1],this._lView,null,s)}markForCheck(){qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function lE(i,s,a){Cs(!0);try{Hy(i,s,a)}finally{Cs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Me(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function eg(i,s){id(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Me(902,"");this._appRef=s}}class Tf extends Hl{constructor(s){super(s),this._view=s}detectChanges(){bg(this._view)}checkNoChanges(){!function MD(i){Cs(!0);try{bg(i)}finally{Cs(!1)}}(this._view)}get context(){return null}}class mv extends om{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new Af(a,this.ngModule)}}function cm(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Af extends Df{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function ma(i){return i.map(My).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return cm(this.componentDef.inputs)}get outputs(){return cm(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function Ow(i,s){return{get:(a,u,c)=>{const f=i.get(a,um,c);return f!==um||u===um?f:s.get(a,u,c)}}}(s,c.injector):s,_=f.get(Mw,_o),E=f.get(am,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=u?function J0(i,s,a){if(dn(i))return i.selectRootElement(s,a===Vt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):St(_.createRenderer(null,this.componentDef),A,function dm(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function qD(i,s){return{components:[],scheduler:i||Dl,clean:xD,playerHandler:s||null,flags:0}}(),z=mg(0,null,null,1,0,null,null,null,null,null),ge=wu(null,z,V,k,null,null,_,I,E,f);let Ne,Be;Zs(ge);try{const et=function HD(i,s,a,u,c,f){const _=a[1];a[20]=i;const I=ad(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(ld(I,A,!0),null!==i&&(el(c,i,A),null!==I.classes&&Ty(c,i,I.classes),null!==I.styles&&kh(c,i,I.styles)));const S=u.createRenderer(i,s),k=wu(a,Ly(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return _.firstCreatePass&&(to(si(I,a),_,s.type),nE(_,I),iE(I,a.length,1)),Dg(a,k),a[20]=k}(S,this.componentDef,ge,_,I);if(S)if(u)el(I,S,["ng-version",Uo.full]);else{const{attrs:Ie,classes:dt}=function sd(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!ki(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&el(I,S,Ie),dt&&dt.length>0&&Ty(I,S,dt.join(" "))}if(Be=Jo(z,20),void 0!==a){const Ie=Be.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const Ht=a[dt];Ie.push(null!=Ht?Array.from(Ht):null)}}Ne=function GD(i,s,a,u,c){const f=a[1],_=function yD(i,s,a){const u=pn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),sE(i,u,s,ud(i,s,1,null),a));const c=Ri(s,i,u.directiveStart,u);tt(c,s);const f=lr(u,s);return f&&tt(f,s),c}(f,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=pn();s.contentQueries(1,_,I.directiveStart)}const E=pn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ss(E.index),eE(a[1],E,0,E.directiveStart,E.directiveEnd,s),tE(s,_)),_}(et,this.componentDef,ge,V,[NA]),Hh(z,ge,null)}finally{Qs()}return new Pw(this.componentType,Ne,$l(Be,ge),ge,Be)}}class Pw extends class If{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Tf(c),this.componentType=s}get injector(){return new wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Gl{}class yv{}const Ru=new Map;class Ev extends Gl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new mv(this);const u=un(s);this._bootstrapComponents=p(u.bootstrap),this._r3Injector=Zy(s,a,[{provide:Gl,useValue:this},{provide:om,useValue:this.componentFactoryResolver}],de(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ko.THROW_IF_NOT_FOUND,u=at.Default){return s===ko||s===Gl||s===zy?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pm extends yv{constructor(s){super(),this.moduleType=s,null!==un(s)&&function fm(i){const s=new Set;!function a(u){const c=un(u,!0),f=c.id;null!==f&&(function _v(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${de(s)} vs ${de(s.name)}`)}(f,Ru.get(f),u),Ru.set(f,u));const _=p(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Ev(this.moduleType,s)}}function Nf(i){return s=>{setTimeout(i,void 0,s)}}const ze=class Rf extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,f,_;let E=s,I=a||(()=>null),A=u;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(f=k.error)||void 0===f?void 0:f.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=Nf(I),E&&(E=Nf(E)),A&&(A=Nf(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof W.w0&&s.add(S),S}};function Et(){return this._results[va()]()}class bv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=va(),u=bv.prototype;u[a]||(u[a]=Et)}get changes(){return this._changes||(this._changes=new ze)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=Dr(s);(this._changesDetected=!function uu(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let $e=(()=>{class i{}return i.__NG_ELEMENT_ID__=Rr,i})();const oe=$e,Ae=class extends oe{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=wu(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),Hh(a,u,s),new Hl(u)}};function Rr(){return Of(pn(),we())}function Of(i,s){return 4&i.type?new Ae(s,i,$l(i,s)):null}let mm=(()=>{class i{}return i.__NG_ELEMENT_ID__=eC,i})();function eC(){return zw(pn(),we())}const tC=mm,Gw=class extends tC{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return $l(this._hostTNode,this._hostLView)}get injector(){return new wi(this._hostTNode,this._hostLView)}get parentInjector(){const s=Br(this._hostTNode,this._hostLView);if(Sc(s)){const a=mn(s,this._hostLView),u=Xt(s);return new wi(a[1].data[u+8],a)}return new wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=qw(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const _=s&&!function jr(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,u=k.injector,c=k.projectableNodes,f=k.ngModuleRef}const I=_?s:new Af(Ut(s)),A=u||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(Gl,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(function Ka(i){return ni(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=u[3],V=new Gw(k,k[6],k[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function JI(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],ul(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function XI(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,_,f);const E=ga(f,_),I=u[11],A=ng(I,_[7]);return null!==A&&function Ro(i,s,a,u,c,f){u[0]=c,u[6]=s,id(i,u,a,1,c,f)}(c,_[6],I,u,A,E),s.attachToViewContainerRef(),ul(ym(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=qw(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=Os(this._lContainer,a);u&&(Xi(ym(this._lContainer),a),Iy(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=Os(this._lContainer,a);return u&&null!=Xi(ym(this._lContainer),a)?new Hl(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function qw(i){return i[8]}function ym(i){return i[8]||(i[8]=[])}function zw(i,s){let a;const u=s[i.index];if(ni(u))a=u;else{let c;if(8&i.type)c=sn(u);else{const f=s[11];c=f.createComment("");const _=lr(i,s);Cl(f,ng(f,_),c,function x0(i,s){return dn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=By(u,s,c,i),Dg(s,a)}return new Gw(a,i,s)}class _m{constructor(s){this.queryList=s,this.matches=null}clone(){return new _m(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tt{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new Tt(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ou(s,a).matches&&this.queries[a].setDirty()}}class ql{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class vm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new vm(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Fn{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Fn(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,yt(a,f)),this.matchTNodeWithReadOption(s,a,il(a,s,f,!1,!1))}else u===$e?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,il(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Cf||c===mm||c===$e&&4&a.type)this.addMatch(a.index,-2);else{const f=il(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function yt(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function zl(i,s,a,u){return-1===a?function Ww(i,s){return 11&i.type?$l(i,s):4&i.type?Of(i,s):null}(s,i):-2===a?function Kw(i,s,a){return a===Cf?$l(s,i):a===$e?Of(s,i):a===mm?zw(s,i):void 0}(i,s,u):Ri(i,i[1],a,s)}function Nd(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:zl(s,f[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function zt(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=Nd(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)u.push(_[E/2]);else{const A=f[E+1],S=s[-I];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&zt(V[1],V,A,u)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const z=k[V];zt(z[1],z,A,u)}}}}}return u}function Zw(i){const s=we(),a=xt(),u=Wu();Ku(u+1);const c=Ou(a,u);if(i.dirty&&Is(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?zt(a,s,u,[]):Nd(a,s,c,u);i.reset(f,Zb),i.notifyOnChanges()}return!0}return!1}function Wl(i,s,a,u){const c=xt();if(c.firstCreatePass){const f=pn();(function xa(i,s,a){null===i.queries&&(i.queries=new vm),i.queries.track(new Fn(s,a))})(c,new ql(s,a,u),f.index),function Hn(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Qw(i,s,a){const u=new bv(4==(4&a));yg(i,s,u,u.destroy),null===s[19]&&(s[19]=new Tt),s[19].queries.push(new _m(u))}(c,we(),a)}function Yw(){return function _r(i,s){return i[19].queries[s].queryList}(we(),Wu())}function Ou(i,s){return i.queries.getByIndex(s)}function Bf(...i){}const aI=new yn("Application Initializer");let Ov=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Bf,this.reject=Bf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(ef(f))a.push(f);else if(qE(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(nt(aI,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const uI=new yn("AppId",{providedIn:"root",factory:function ka(){return`${Pv()}${Pv()}${Pv()}`}});function Pv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const kv=new yn("Platform Initializer"),lI=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ho=new yn("appBootstrapListener");let Ld=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Vd=new yn("LocaleId",{providedIn:"root",factory:()=>Bt(Vd,at.Optional|at.SkipSelf)||function bm(){return"undefined"!=typeof $localize&&$localize.locale||af}()}),Fv=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ls{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let hI=(()=>{class i{compileModuleSync(a){return new pm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=p(un(a).declarations).reduce((_,E)=>{const I=Ut(E);return I&&_.push(new Af(I)),_},[]);return new Ls(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Lv=(()=>Promise.resolve(0))();function Gf(i){"undefined"==typeof Zone?Lv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Vs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function fI(){let i=Pt.requestAnimationFrame,s=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function gI(i){const s=()=>{!function pI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Pt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ud(i),i.isCheckStableRunning=!0,Cm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ud(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,_,E)=>{try{return mI(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),yI(i)}},onInvoke:(a,u,c,f,_,E,I)=>{try{return mI(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),yI(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ud(i),Cm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,aC,Bf,Bf);try{return f.runTask(_,a,u)}finally{f.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const aC={};function Cm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ud(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function mI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function yI(i){i._nesting--,Cm(i)}class _I{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze,this.onMicrotaskEmpty=new ze,this.onStable=new ze,this.onError=new ze}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let Jl=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),Gf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(nt(Vs))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),Xl=(()=>{class i{constructor(){this._applications=new Map,Tm.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return Tm.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class vI{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function ec(i){Tm=i}let Tm=new vI,Us=null;const Vv=new yn("AllowMultipleToken"),Uv=new yn("PlatformOnDestroy");class sr{constructor(s,a){this.name=s,this.token=a}}function zf(i,s,a=[]){const u=`Platform: ${s}`,c=new yn(u);return(f=[])=>{let _=Sm();if(!_||_.injector.get(Vv,!1)){const E=[...a,...f,{provide:c,useValue:!0}];i?i(E):function Am(i){if(Us&&!Us.get(Vv,!1))throw new Me(400,"");Us=i;const s=i.get(jv),a=i.get(kv,null);a&&a.forEach(u=>u())}(function Bv(i=[],s){return ko.create({name:s,providers:[{provide:Ky,useValue:"platform"},{provide:Uv,useValue:()=>Us=null},...i]})}(E,u))}return function lC(i){const s=Sm();if(!s)throw new Me(401,"");return s}()}}function Sm(){var i;return null!==(i=null==Us?void 0:Us.get(jv))&&void 0!==i?i:null}let jv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function Wf(i,s){let a;return a="noop"===i?new _I:("zone.js"===i?void 0:i)||new Vs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:Vs,useValue:E}];return E.run(()=>{const A=ko.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(on,null);if(!k)throw new Me(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:z=>{k.handleError(z)}});S.onDestroy(()=>{xm(this._modules,S),V.unsubscribe()})}),function tc(i,s,a){try{const u=a();return ef(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(k,E,()=>{const V=S.injector.get(Ov);return V.runInitializers(),V.donePromise.then(()=>(function uf(i){tn(i,"Expected localeId to be defined"),"string"==typeof i&&(dw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Vd,af)||af),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=$v({},u);return function qf(i,s,a){const u=new pm(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(Mm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Me(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const a=this._injector.get(Uv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(nt(ko))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function $v(i,s){return Array.isArray(s)?s.reduce($v,i):Object.assign(Object.assign({},i),s)}let Mm=(()=>{class i{constructor(a,u,c,f){this._zone=a,this._injector=u,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new O.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),Gf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(_,E.pipe((0,J.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Me(405,"");let c;c=a instanceof Df?a:this._injector.get(om).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function uC(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Gl),E=c.create(ko.NULL,[],u||c.selector,f),I=E.location.nativeElement,A=E.injector.get(Jl,null),S=A&&E.injector.get(Xl);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),xm(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Me(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;xm(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Ho,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(nt(Vs),nt(ko),nt(on),nt(Ov))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function xm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let EI=!0,Yn=!1;function Jt(){return Yn=!0,EI}function wI(){if(Yn)throw new Error("Cannot enable prod mode after platform setup.");EI=!1}let Rm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Qr,i})();function Qr(i){return function Tn(i,s,a){if(ys(i)&&!a){const u=cr(i.index,s);return new Hl(u,u)}return 47&i.type?new Hl(s[16],s):null}(pn(),we(),16==(16&i))}class II{constructor(){}supports(s){return Zh(s)}create(s){return new Qf(s)}}const mC=(i,s)=>s;class Qf{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||mC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const _=!u||a&&a.currentIndex<km(u,c,f)?a:u,E=km(_,c,f),I=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const z=V<f.length?f[V]:f[V]=0,ge=z+V;S<=ge&&ge<A&&(f[V]=z+1)}f[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Zh(s))throw new Me(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),u=!0),a=a._next}else c=0,function YD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[va()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new DI(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new vr),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vr),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class DI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class vr{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new yC,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function km(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class qv{constructor(){}supports(s){return s instanceof Map||Tg(s)}create(){return new Jf}}class Jf{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Tg(s)))throw new Me(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new Go(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class Go{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fm(){return new Lm([new II])}let Lm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Fm()),deps:[[i,new Di,new Cr]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new Me(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:Fm}),i})();function zv(){return new Um([new qv])}let Um=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||zv()),deps:[[i,new Di,new Cr]]}}find(a){const u=this.factories.find(f=>f.supports(a));if(u)return u;throw new Me(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:zv}),i})();const Wv=zf(null,"core",[]);let vC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(nt(Mm))},i.\u0275mod=K({type:i}),i.\u0275inj=Gt({}),i})()},3942:(st,Ce,P)=>{P.d(Ce,{Z:()=>Me});var g=P(2090),W=P(4859),O=P(9681),se=P(1877);class J{constructor(he,ve){this._delegate=he,this.firebase=ve,(0,O._addComponent)(he,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,ve=O._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(he);return!We.isInitialized()&&"EXPLICIT"===(null===(Je=We.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&We.initialize(),We.getImmediate({identifier:ve})}_removeServiceInstance(he,ve=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(ve)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ae(){const Pe=function de(Pe){const he={},ve={__esModule:!0,initializeApp:function De(Ue,te={}){const qe=O.initializeApp(Ue,te);if((0,g.r3)(he,qe.name))return he[qe.name];const Q=new Pe(qe,ve);return he[qe.name]=Q,Q},app:We,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function _e(Ue){const te=Ue.name,qe=te.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const Q=(ie=We())=>{if("function"!=typeof ie[qe])throw re.create("invalid-app-argument",{appName:te});return ie[qe]()};void 0!==Ue.serviceProps&&(0,g.ZB)(Q,Ue.serviceProps),ve[qe]=Q,Pe.prototype[qe]=function(...ie){return this._getService.bind(this,te).apply(this,Ue.multipleInstances?ie:[])}}return"PUBLIC"===Ue.type?ve[qe]:null},removeApp:function Je(Ue){delete he[Ue]},useAsService:function je(Ue,te){return"serverAuth"===te?null:te},modularAPIs:O}};function We(Ue){if(!(0,g.r3)(he,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:Ue});return he[Ue]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function ye(){return Object.keys(he).map(Ue=>he[Ue])}}),We.App=Pe,ve}(J);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function he(ve){(0,g.ZB)(Pe,ve)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Pe}(),j=new se.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=B;!function Te(Pe){(0,O.registerVersion)("@firebase/app-compat","0.1.23",Pe)}()},9681:(st,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Er,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>zn,_addOrOverwriteComponent:()=>En,_apps:()=>He,_clearComponents:()=>Lt,_components:()=>Ft,_getProvider:()=>yi,_registerComponent:()=>Yt,_removeServiceInstance:()=>Gt,deleteApp:()=>ji,getApp:()=>wr,getApps:()=>Bi,initializeApp:()=>Si,onLog:()=>Wn,registerVersion:()=>Pr,setLogLevel:()=>Vn});var g=P(5861),W=P(4859),O=P(1877),se=P(2090);class J{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function fe(Ke){const be=Ke.getComponent();return"VERSION"===(null==be?void 0:be.type)}(Ye)){const lt=Ye.getImmediate();return`${lt.library}/${lt.version}`}return null}).filter(Ye=>Ye).join(" ")}}const re="@firebase/app",ae=new O.Yd("@firebase/app"),$t="[DEFAULT]",tn={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},He=new Map,Ft=new Map;function zn(Ke,be){try{Ke.container.addComponent(be)}catch(Ye){ae.debug(`Component ${be.name} failed to register with FirebaseApp ${Ke.name}`,Ye)}}function En(Ke,be){Ke.container.addOrOverwriteComponent(be)}function Yt(Ke){const be=Ke.name;if(Ft.has(be))return ae.debug(`There were multiple attempts to register component ${be}.`),!1;Ft.set(be,Ke);for(const Ye of He.values())zn(Ye,Ke);return!0}function yi(Ke,be){const Ye=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),Ke.container.getProvider(be)}function Gt(Ke,be,Ye=$t){yi(Ke,be).clearInstance(Ye)}function Lt(){Ft.clear()}const Jr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class hs{constructor(be,Ye,lt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=lt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}const Er="9.7.0";function Si(Ke,be={}){"object"!=typeof be&&(be={name:be});const Ye=Object.assign({name:$t,automaticDataCollectionEnabled:!1},be),lt=Ye.name;if("string"!=typeof lt||!lt)throw Jr.create("bad-app-name",{appName:String(lt)});const Ot=He.get(lt);if(Ot){if((0,se.vZ)(Ke,Ot.options)&&(0,se.vZ)(Ye,Ot.config))return Ot;throw Jr.create("duplicate-app",{appName:lt})}const Mt=new W.H0(lt);for(const L of Ft.values())Mt.addComponent(L);const U=new hs(Ke,Ye,Mt);return He.set(lt,U),U}function wr(Ke=$t){const be=He.get(Ke);if(!be)throw Jr.create("no-app",{appName:Ke});return be}function Bi(){return Array.from(He.values())}function ji(Ke){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(Ke){const be=Ke.name;He.has(be)&&(He.delete(be),yield Promise.all(Ke.container.getProviders().map(Ye=>Ye.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function Pr(Ke,be,Ye){var lt;let Ot=null!==(lt=tn[Ke])&&void 0!==lt?lt:Ke;Ye&&(Ot+=`-${Ye}`);const Mt=Ot.match(/\s|\//),U=be.match(/\s|\//);if(Mt||U){const L=[`Unable to register library "${Ot}" with version "${be}":`];return Mt&&L.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),Mt&&U&&L.push("and"),U&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void ae.warn(L.join(" "))}Yt(new W.wA(`${Ot}-version`,()=>({library:Ot,version:be}),"VERSION"))}function Wn(Ke,be){if(null!==Ke&&"function"!=typeof Ke)throw Jr.create("invalid-log-argument");(0,O.Am)(Ke,be)}function Vn(Ke){(0,O.Ub)(Ke)}const fn="firebase-heartbeat-store";let Kn=null;function fs(){return Kn||(Kn=(0,se.X3)("firebase-heartbeat-database",1,(Ke,be)=>{0===be&&Ke.createObjectStore(fn)}).catch(Ke=>{throw Jr.create("storage-open",{originalErrorMessage:Ke.message})})),Kn}function Vt(){return(Vt=(0,g.Z)(function*(Ke){try{return(yield fs()).transaction(fn).objectStore(fn).get(Jn(Ke))}catch(be){throw Jr.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function rt(Ke,be){return mt.apply(this,arguments)}function mt(){return(mt=(0,g.Z)(function*(Ke,be){try{const lt=(yield fs()).transaction(fn,"readwrite");return yield lt.objectStore(fn).put(be,Jn(Ke)),lt.complete}catch(Ye){throw Jr.create("storage-set",{originalErrorMessage:Ye.message})}})).apply(this,arguments)}function Jn(Ke){return`${Ke.name}!${Ke.options.appId}`}class $s{constructor(be){this.container=be,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new ut(Ye),this._heartbeatsCachePromise=this._storage.read().then(lt=>(this._heartbeatsCache=lt,lt))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const lt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=or();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Ot&&!be._heartbeatsCache.heartbeats.some(Mt=>Mt.date===Ot))return be._heartbeatsCache.heartbeats.push({date:Ot,agent:lt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Mt=>{const U=new Date(Mt.date).valueOf();return Date.now()-U<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ye=or(),{heartbeatsToSend:lt,unsentEntries:Ot}=function Xn(Ke,be=1024){const Ye=[];let lt=Ke.slice();for(const Ot of Ke){const Mt=Ye.find(U=>U.agent===Ot.agent);if(Mt){if(Mt.dates.push(Ot.date),ar(Ye)>be){Mt.dates.pop();break}}else if(Ye.push({agent:Ot.agent,dates:[Ot.date]}),ar(Ye)>be){Ye.pop();break}lt=lt.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:lt}}(be._heartbeatsCache.heartbeats),Mt=(0,se.L)(JSON.stringify({version:2,heartbeats:lt}));return be._heartbeatsCache.lastSentHeartbeatDate=Ye,Ot.length>0?(be._heartbeatsCache.heartbeats=Ot,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Mt})()}}function or(){return(new Date).toISOString().substring(0,10)}class ut{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function zo(Ke){return Vt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ye=this;return(0,g.Z)(function*(){var lt;if(yield Ye._canUseIndexedDBPromise){const Mt=yield Ye.read();return rt(Ye.app,{lastSentHeartbeatDate:null!==(lt=be.lastSentHeartbeatDate)&&void 0!==lt?lt:Mt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ye=this;return(0,g.Z)(function*(){var lt;if(yield Ye._canUseIndexedDBPromise){const Mt=yield Ye.read();return rt(Ye.app,{lastSentHeartbeatDate:null!==(lt=be.lastSentHeartbeatDate)&&void 0!==lt?lt:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...be.heartbeats]})}})()}}function ar(Ke){return(0,se.L)(JSON.stringify({version:2,heartbeats:Ke})).length}!function Rt(Ke){Yt(new W.wA("platform-logger",be=>new J(be),"PRIVATE")),Yt(new W.wA("heartbeat",be=>new $s(be),"PRIVATE")),Pr(re,"0.7.22",Ke),Pr(re,"0.7.22","esm2017"),Pr("fire-js","")}("")},4859:(st,Ce,P)=>{P.d(Ce,{H0:()=>de,wA:()=>O});var g=P(5861),W=P(2090);class O{constructor(B,j,Z){this.name=B,this.instanceFactory=j,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Z=new W.BH;if(this.instancesDeferred.set(j,Z),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:j});Ge&&Z.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Z=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Ge=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Te){if(Ge)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function re(ae){return"EAGER"===ae.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch(j){}for(const[j,Z]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:Ge});Z.resolve(Te)}catch(Te){}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...j.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Z=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:Z,options:j});for(const[Te,Me]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Te)&&Me.resolve(Ge);return Ge}onInit(B,j){var Z;const Ge=this.normalizeInstanceIdentifier(j),Te=null!==(Z=this.onInitCallbacks.get(Ge))&&void 0!==Z?Z:new Set;Te.add(B),this.onInitCallbacks.set(Ge,Te);const Me=this.instances.get(Ge);return Me&&B(Me,Ge),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Z=this.onInitCallbacks.get(j);if(Z)for(const Ge of Z)try{Ge(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Z=this.instances.get(B);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=B,ae===se?void 0:ae),options:j}),this.instances.set(B,Z),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Z,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Z)}catch(Ge){}var ae;return Z||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(st,Ce,P)=>{P.d(Ce,{Am:()=>ae,Ub:()=>de,Yd:()=>re,in:()=>W});const g=[];var W=(()=>{return(B=W||(W={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",W;var B})();const O={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},se=W.INFO,J={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},fe=(B,j,...Z)=>{if(j<B.logLevel)return;const Ge=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${Ge}]  ${B.name}:`,...Z)};class re{constructor(j){this.name=j,this._logLevel=se,this._logHandler=fe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in W))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...j),this._logHandler(this,W.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...j),this._logHandler(this,W.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,W.INFO,...j),this._logHandler(this,W.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,W.WARN,...j),this._logHandler(this,W.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...j),this._logHandler(this,W.ERROR,...j)}}function de(B){g.forEach(j=>{j.setLogLevel(B)})}function ae(B,j){for(const Z of g){let Ge=null;j&&j.level&&(Ge=O[j.level]),Z.userLogHandler=null===B?null:(Te,Me,...Pe)=>{const he=Pe.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(Je){return null}}).filter(ve=>ve).join(" ");Me>=(null!=Ge?Ge:Te.logLevel)&&B({level:W[Me].toLowerCase(),message:he,args:Pe,type:Te.name})}}}},5861:(st,Ce,P)=>{function g(O,se,J,fe,re,de,ae){try{var B=O[de](ae),j=B.value}catch(Z){return void J(Z)}B.done?se(j):Promise.resolve(j).then(fe,re)}function W(O){return function(){var se=this,J=arguments;return new Promise(function(fe,re){var de=O.apply(se,J);function ae(j){g(de,fe,re,ae,B,"next",j)}function B(j){g(de,fe,re,ae,B,"throw",j)}ae(void 0)})}}P.d(Ce,{Z:()=>W})}},st=>{st(st.s=9752)}]);